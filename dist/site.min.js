require=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){e.exports=[{name:"Circle stroked",tags:["circle","disc","shape","shapes","geometric","stroke","round"],icon:"circle-stroked"},{name:"Circle solid",tags:["circle","shape","shapes","geometric","round"],icon:"circle"},{name:"Square stroked",tags:["box","square","shapes","shape","geometric","stroke"],icon:"square-stroked"},{name:"Square solid",tags:["box","square","shape","shapes","geometric"],icon:"square"},{name:"Triangle stroked",tags:["triangle","shape","shapes","geometric","stroke"],icon:"triangle-stroked"},{name:"Triangle solid",tags:["triangle","shape","shapes","geometric"],icon:"triangle"},{name:"Star stroked",tags:["star","shape","shapes","geometric","stroke"],icon:"star-stroked"},{name:"Star solid",tags:["star","shape","shapes","geometric"],icon:"star"},{name:"Cross",tags:["cross","x","ex","shape","shapes","geometric"],icon:"cross"},{name:"Marker Stroke",tags:["marker","point","shape","shapes","stroke"],icon:"marker-stroked"},{name:"Marker Solid",tags:["marker","point","shape","shapes"],icon:"marker"},{name:"Religious Jewish",tags:["jewish","judaism","hebrew","star","david","religious","religion","temple","synagogue"],icon:"religious-jewish"},{name:"Religious Christian",tags:["christian","cross","religious","religion","church","cathedral"],icon:"religious-christian"},{name:"Religious Muslim",tags:["muslim","crescent","star","religious","religion","mosque"],icon:"religious-muslim"},{name:"Cemetery",tags:["cemetery","graveyard","funeral","religious","religion","memorial"],icon:"cemetery"},{name:"Rocket",tags:["rocket","space","launch","transportation"],icon:"rocket"},{name:"Airport",tags:["airplane","plane","airport","transportation"],icon:"airport"},{name:"Heliport",tags:["heliport","helicopter","transportation"],icon:"heliport"},{name:"Rail",tags:["rail","train","transportation"],icon:"rail"},{name:"Rail Metro",tags:["rail","train","metro","subway","rapid-transit","transportation"],icon:"rail-metro"},{name:"Rail Light",tags:["rail","train","light-rail","transportation"],icon:"rail-light"},{name:"Bus",tags:["vehicle","bus","transportation"],icon:"bus"},{name:"Fuel",tags:["petrol","fuel","gas","transportation","station"],icon:"fuel"},{name:"Parking",tags:["parking","transportation"],icon:"parking"},{name:"Parking Garage",tags:["parking","transportation","garage"],icon:"parking-garage"},{name:"Airfield",tags:["airfield","airport","plane","landing strip"],icon:"airfield"},{name:"Roadblock",tags:["roadblock","stop","warning","dead end"],icon:"roadblock"},{name:"Ferry",tags:["ship","boat","water","ferry","transportation"],icon:"ferry"},{name:"Harbor",tags:["marine","dock","water","wharf"],icon:"harbor"},{name:"Bicycle",tags:["cycling","cycle","transportation"],icon:"bicycle"},{name:"Park",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park"},{name:"Park 2",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park2"},{name:"Museum",tags:["recreation","museum","tourism"],icon:"museum"},{name:"Lodging",tags:["lodging","hotel","recreation","motel","tourism"],icon:"lodging"},{name:"Monument",tags:["recreation","statue","monument","tourism"],icon:"monument"},{name:"Zoo",tags:["recreation","zoo","animal","giraffe"],icon:"zoo"},{name:"Garden",tags:["recreation","garden","park","flower","nature"],icon:"garden"},{name:"Campsite",tags:["recreation","campsite","camp","camping","tent","nature"],icon:"campsite"},{name:"Theatre",tags:["recreation","theatre","theater","entertainment","play","performance"],icon:"theatre"},{name:"Art gallery",tags:["art","center","museum","gallery","creative","recreation","entertainment","studio"],icon:"art-gallery"},{name:"Pitch",tags:["pitch","track","athletic","sports","field"],icon:"pitch"},{name:"Soccer",tags:["soccer","sports"],icon:"soccer"},{name:"American Football",tags:["football","sports"],icon:"america-football"},{name:"Tennis",tags:["tennis","court","ball","sports"],icon:"tennis"},{name:"Basketball",tags:["basketball","ball","sports"],icon:"basketball"},{name:"Baseball",tags:["baseball","softball","ball","sports"],icon:"baseball"},{name:"Golf",tags:["golf","sports","course"],icon:"golf"},{name:"Swimming",tags:["swimming","water","swim","sports"],icon:"swimming"},{name:"Cricket",tags:["cricket","sports"],icon:"cricket"},{name:"Skiing",tags:["winter","skiing","ski","sports"],icon:"skiing"},{name:"School",tags:["school","highschool","elementary","children","amenity","middle"],icon:"school"},{name:"College",tags:["college","school","amenity","university"],icon:"college"},{name:"Library",tags:["library","books","amenity"],icon:"library"},{name:"Post",tags:["post","office","amenity","mail","letter"],icon:"post"},{name:"Fire station",tags:["fire","station","amenity"],icon:"fire-station"},{name:"Town hall",tags:["townhall","mayor","building","amenity","government"],icon:"town-hall"},{name:"Police",tags:["police","jail","arrest","amenity","station"],icon:"police"},{name:"Prison",tags:["prison","jail","amenity"],icon:"prison"},{name:"Embassy",tags:["embassy","diplomacy","consulate","amenity","flag"],icon:"embassy"},{name:"Beer",tags:["bar","beer","drink","commercial","biergarten","pub"],icon:"beer"},{name:"Restaurant",tags:["restaurant","commercial"],icon:"restaurant"},{name:"Cafe",tags:["cafe","coffee","commercial","tea"],icon:"cafe"},{name:"Shop",tags:["shop","mall","commercial","store"],icon:"shop"},{name:"Fast Food",tags:["food","fast","commercial","burger","drive-through"],icon:"fast-food"},{name:"Bar",tags:["bar","drink","commercial","club","martini","lounge"],icon:"bar"},{name:"Bank",tags:["bank","atm","commercial","money"],icon:"bank"},{name:"Grocery",tags:["food","grocery","commercial","store","market"],icon:"grocery"},{name:"Cinema",tags:["cinema","theatre","film","movie","commercial","theater","entertainment"],icon:"cinema"},{name:"Pharmacy",tags:["pharmacy","drugs","medication","social","medicine","prescription"],icon:"pharmacy"},{name:"Hospital",tags:["hospital","health","medication","social","medicine","medical","clinic"],icon:"hospital"},{name:"Danger",tags:["minefield","landmine","disaster","dangerous","hazard"],icon:"danger"},{name:"Industrial",tags:["industrial","factory","property","building"],icon:"industrial"},{name:"Warehouse",tags:["warehouse","property","storage","building"],icon:"warehouse"},{name:"Commercial",tags:["commercial","property","business","building"],icon:"commercial"},{name:"Building",tags:["building","property","structure","business","building"],icon:"building"},{name:"Place of worship",tags:["religion","ceremony","religious","nondenominational","church","temple"],icon:"place-of-worship"},{name:"Alcohol shop",tags:["alcohol","liquor","store","shop","beer","wine","vodka"],icon:"alcohol-shop"},{name:"Logging",tags:["logger","chainsaw","woods","industry"],icon:"logging"},{name:"Oil well",tags:["oil","natural","environment","industry","resources"],icon:"oil-well"},{name:"Slaughterhouse",tags:["cows","cattle","food","meat","industry","resources"],icon:"slaughterhouse"},{name:"Dam",tags:["water","natural","hydro","hydroelectric","energy","environment","industry","resources"],icon:"dam"},{name:"Water",tags:["water","natural","hydro","lake","river","ocean","resources"],icon:"water"},{name:"Wetland",tags:["water","swamp","natural"],icon:"wetland"},{name:"Disability",tags:["handicap","wheelchair","access"],icon:"disability"},{name:"Telephone",tags:["payphone","call"],icon:"telephone"},{name:"Emergency Telephone",tags:["payphone","danger","safety","call"],icon:"emergency-telephone"},{name:"Toilets",tags:["bathroom","men","women","sink","washroom","lavatory"],icon:"toilets"},{name:"Waste Basket",tags:["trash","rubbish","bin","garbage"],icon:"waste-basket"},{name:"Music",tags:["stage","performance","band","concert","venue"],icon:"music"},{name:"Land Use",tags:["zoning","usage","area"],icon:"land-use"},{name:"City",tags:["area","point","place","urban"],icon:"city"},{name:"Town",tags:["area","point","place","small"],icon:"town"},{name:"Village",tags:["area","point","place","small","rural"],icon:"village"},{name:"Farm",tags:["building","farming","crops","plants","agriculture","rural"],icon:"farm"},{name:"Bakery",tags:["bakery","pastry","croissant","food","shop","bread"],icon:"bakery"},{name:"Dog Park",tags:["dog","pet"],icon:"dog-park"},{name:"Lighthouse",tags:["building","navigation","nautical","ocean","logistics"],icon:"lighthouse"},{name:"Clothing Store",tags:["clothing","store","shop"],icon:"clothing-store"},{name:"Polling Place",tags:["poll","polling","vote"],icon:"polling-place"},{name:"Playground",tags:["playground","play","park","children"],icon:"playground"},{name:"Entrance",tags:["entrance","enter","subway","rail"],icon:"entrance"},{name:"Heart",tags:["heart","love","shape","shapes","wedding"],icon:"heart"},{name:"London Underground",tags:["deprecated"],icon:"london-underground"},{name:"Minefield",tags:["deprecated"],icon:"minefield"},{name:"Rail Underground",tags:["deprecated"],icon:"rail-underground"},{name:"Rail Above",tags:["deprecated"],icon:"rail-above"},{name:"Camera",tags:["camera","photo","commercial","shop"],icon:"camera"},{name:"Laundry",tags:["laundry","washing machine","dry_cleaning","commercial","store"],icon:"laundry"},{name:"Car",tags:["car","auto","vehicle","transportation"],icon:"car"},{name:"Suitcase",tags:["suitcase","travel","travel agency","commercial","store"],icon:"suitcase"},{name:"Hairdresser",tags:["scissors","barber shop","barber","stylist","hair","cut","salon"],icon:"hairdresser"},{name:"Chemist",tags:["shop","science","chemistry","experiment","research","pharmacy"],icon:"chemist"},{name:"Mobile phone",tags:["phone","cellphone","communication","mobile"],icon:"mobilephone"},{name:"Scooter",tags:["bike","transportation","vehicle","route","moped","motorcycle"],icon:"scooter"},{name:"Gift",tags:["gift","shop","commercial","store"],icon:"gift"},{name:"Ice cream",tags:["ice","sweets","food","shop"],icon:"ice-cream"},{name:"Dentist",tags:["dentist","tooth","health","medication","social","medicine","medical"],icon:"dentist"}]},{}],2:[function(t,e,n){function r(t,e){var n=document.createElement(t);return e&&(n.className=e),n}function i(t,e){a({uri:s+t,headers:{Authorization:"token "+o},json:!0,crossOrigin:!0},function(t,n,r){e(null,r)})}var o,a=t("browser-request"),s="https://api.github.com";e.exports=function(t,n){return o=t,s=n||s,e.exports},e.exports.open=function(){function t(){i("/gists?page="+a,function(i,s){if(i)throw i;s.filter(e).forEach(n),function(e){for(var n=o.getElementsByClassName("gist-map-next"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);var s=o.appendChild(r("div","gist-map-next"));s.innerHTML="load more",s.onclick=function(){a++,t()}}()})}function e(t){var e=!1;for(var n in t.files)n.match(/\.(geo)?json/i)&&(e=!0);return e}function n(t){var e=o.appendChild(r("div","gist-map-item"));e.appendChild(r("div","gist-map-title")).textContent=t.description,e.appendChild(r("div","gist-map-contents")).textContent=Object.keys(t.files).join(", "),e.onclick=function(e){i("/gists/"+t.id,function(t,n){s(n,e)})}}var o=r("div","gist-map-browser"),a=0,s=function(t){},u={container:o,onclick:function(t){return s=t,u},appendTo:function(t){return t.appendChild(o),u}};return t(),u}},{"browser-request":6}],3:[function(t,e,n){function r(t,e){0===t.length?i("/user",function(t,n){i("/user/orgs",function(t,r){var i=r.map(function(t){return[t]});e(null,[n].concat(i))})}):1===t.length?"User"===t[0].type?i("/users/"+t[0].login+"/repos",function(n,r){e(null,r.map(function(e){return[t[0],e]}))}):i("/orgs/"+t[0].login+"/repos",function(n,r){e(null,r.map(function(e){return[t[0],e]}))}):2===t.length?i("/repos/"+t[1].full_name+"/branches",function(n,r){e(null,r.map(function(e){return[t[0],t[1],e]}))}):3===t.length?i("/repos/"+t[1].full_name+"/git/trees/"+t[2].commit.sha,function(n,r){var i=[];!r.length&&r.tree&&(r=[r]);for(var o=0;o<r.length;o++)for(var a=0;a<r[o].tree.length;a++)i.push([t[0],t[1],t[2],r[o].tree[a]]);c&&i.push([t[0],t[1],t[2],{type:"new",name:"+ New File"}]),e(null,i)}):t.length>3&&i("/repos/"+t[1].full_name+"/git/trees/"+t[t.length-1].sha,function(n,r){var i=[];!r.length&&r.tree&&(r=[r]);for(var o=0;o<r.length;o++)for(var a=0;a<r[o].tree.length;a++)i.push(t.concat([r[o].tree[a]]));c&&i.push([t[0],t[1],t[2],{type:"new",name:"+ New File"}]),e(null,i)})}function i(t,e){function n(e,i){s({uri:e||l+t,headers:{Authorization:"token "+o},json:!0,crossOrigin:!0},function(t,e,o){var a=(e.getResponseHeader("Link")||"").match(/\<([^\>]+)\>\; rel="next"/);a&&r.defer(n,a[1]),i(null,o)})}var r=a(1);r.defer(n,null).awaitAll(function(t,n){if(n){var r=n.reduce(function(t,e){return t.concat(e)},[]);e(t,r)}else e(t)})}var o,a=t("queue-async"),s=t("browser-request"),u=t("treeui"),l="https://api.github.com",c=!1;e.exports=function(t,n,r){return o=t,void 0!==n&&(c=n),l=r||l,e.exports},e.exports.open=function(){return u(r).expandable(function(t){var e=t[t.length-1];return"blob"!==e.type&&"commit"!==e.type&&"new"!==e.type}).display(function(t){var e=t[t.length-1];return e.name||e.login||e.path})},e.exports.request=i},{"browser-request":6,"queue-async":90,treeui:139}],4:[function(t,e,n){(function(n){"use strict";function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function a(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(y.isFunction(t)){if(w)return t.name;var e=t.toString().match(x);return e&&e[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function l(t){if(w||!y.isFunction(t))return y.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function c(t,e,n,r,i){throw new _.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function f(t,e){t||c(t,!0,e,"==",_.ok)}function h(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(y.isDate(t)&&y.isDate(e))return t.getTime()===e.getTime();if(y.isRegExp(t)&&y.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(y.isPrimitive(t)||y.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=p(t),o=p(e);if(i&&!o||!i&&o)return!1;if(i)return t=v.call(t),e=v.call(e),h(t,e,n);var a,s,u=k(t),l=k(e);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!h(t[a],e[a],n,r))return!1;return!0}(t,e,n,s))}return n?t===e:t==e}function p(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function d(t,e,n){h(t,e,!0)&&c(t,e,n,"notDeepStrictEqual",d)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&c(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&y.isError(i),s=!t&&i&&!n;if((a&&o&&g(i,n)||s)&&c(i,n,"Got unwanted exception"+r),t&&i&&n&&!g(i,n)||!t&&i)throw i}var y=t("util/"),b=Object.prototype.hasOwnProperty,v=Array.prototype.slice,w="foo"===function(){}.name,_=e.exports=f,x=/\s*function\s+([^\(\s]*)\s*/;_.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return u(l(t.actual),128)+" "+t.operator+" "+u(l(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=s(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},y.inherits(_.AssertionError,Error),_.fail=c,_.ok=f,_.equal=function(t,e,n){t!=e&&c(t,e,n,"==",_.equal)},_.notEqual=function(t,e,n){t==e&&c(t,e,n,"!=",_.notEqual)},_.deepEqual=function(t,e,n){h(t,e,!1)||c(t,e,n,"deepEqual",_.deepEqual)},_.deepStrictEqual=function(t,e,n){h(t,e,!0)||c(t,e,n,"deepStrictEqual",_.deepStrictEqual)},_.notDeepEqual=function(t,e,n){h(t,e,!1)&&c(t,e,n,"notDeepEqual",_.notDeepEqual)},_.notDeepStrictEqual=d,_.strictEqual=function(t,e,n){t!==e&&c(t,e,n,"===",_.strictEqual)},_.notStrictEqual=function(t,e,n){t===e&&c(t,e,n,"!==",_.notStrictEqual)},_.throws=function(t,e,n){m(!0,t,e,n)},_.doesNotThrow=function(t,e,n){m(!1,t,e,n)},_.ifError=function(t){if(t)throw t};var k=Object.keys||function(t){var e=[];for(var n in t)b.call(t,n)&&e.push(n);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":142}],5:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function o(t,e,n){for(var r,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(i(r));return o.join("")}n.byteLength=function(t){return 3*t.length/4-r(t)},n.toByteArray=function(t){var e,n,i,o,a,l,c=t.length;a=r(t),l=new u(3*c/4-a),i=a>0?c-4:c;var f=0;for(e=0,n=0;e<i;e+=4,n+=3)o=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],l[f++]=o>>16&255,l[f++]=o>>8&255,l[f++]=255&o;return 2===a?(o=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,l[f++]=255&o):1===a&&(o=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,l[f++]=o>>8&255,l[f++]=255&o),l},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i="",s=[],u=0,l=n-r;u<l;u+=16383)s.push(o(t,u,u+16383>l?l:u+16383));return 1===r?(e=t[n-1],i+=a[e>>2],i+=a[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=a[e>>10],i+=a[e>>4&63],i+=a[e<<2&63],i+="="),s.push(i),s.join("")};for(var a=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,f=l.length;c<f;++c)a[c]=l[c],s[l.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],6:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof n?e.exports=r():t.returnExports=r()}(this,function(){function t(i,o){if("function"!=typeof o)throw new Error("Bad callback given: "+o);if(!i)throw new Error("No options given");var a=i.onResponse;if(i="string"==typeof i?{uri:i}:JSON.parse(JSON.stringify(i)),i.onResponse=a,i.verbose&&(t.log=function(){var t,n,r={},i=["trace","debug","info","warn","error"];for(n=0;n<i.length;n++)r[t=i[n]]=e,"undefined"!=typeof console&&console&&console[t]&&(r[t]=function(t,e){return function(n,r){"object"==typeof r&&(n+=" "+JSON.stringify(r));return t[e].call(t,n)}}(console,t));return r}()),i.url&&(i.uri=i.url,delete i.url),!i.uri&&""!==i.uri)throw new Error("options.uri is a required argument");if("string"!=typeof i.uri)throw new Error("options.uri must be a string");for(var s=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],u=0;u<s.length;u++)if(i[s[u]])throw new Error("options."+s[u]+" is not supported");if(i.callback=o,i.method=i.method||"GET",i.headers=i.headers||{},i.body=i.body||null,i.timeout=i.timeout||t.DEFAULT_TIMEOUT,i.headers.host)throw new Error("Options.headers.host is not supported");i.json&&(i.headers.accept=i.headers.accept||"application/json","GET"!==i.method&&(i.headers["content-type"]="application/json"),"boolean"!=typeof i.json?i.body=JSON.stringify(i.json):"string"!=typeof i.body&&(i.body=JSON.stringify(i.body)));var l=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(i.qs){var c="string"==typeof i.qs?i.qs:l(i.qs);-1!==i.uri.indexOf("?")?i.uri=i.uri+"&"+c:i.uri=i.uri+"?"+c}if(i.form){if("string"==typeof i.form)throw"form name unsupported";if("POST"===i.method){var f=(i.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(i.headers["content-type"]=f,f){case"application/x-www-form-urlencoded":i.body=l(i.form).replace(/%20/g,"+");break;case"multipart/form-data":var h=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+t[r]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e}(i.form);i.body=h.body,i.headers["content-type"]=h.type;break;default:throw new Error("unsupported encoding:"+f)}}}return i.onResponse=i.onResponse||e,!0===i.onResponse&&(i.onResponse=o,i.callback=e),!i.headers.authorization&&i.auth&&(i.headers.authorization="Basic "+function(t){var e,n,r,i,o,a,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,h="",p=[];if(!t)return t;do{e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),i=(u=e<<16|n<<8|r)>>18&63,o=u>>12&63,a=u>>6&63,s=63&u,p[f++]=l.charAt(i)+l.charAt(o)+l.charAt(a)+l.charAt(s)}while(c<t.length);switch(h=p.join(""),t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}(i.auth.username+":"+i.auth.password)),function(e){function i(){if(!f.response){if(f.response=!0,t.log.debug("Got response",{id:a.id,status:a.status}),clearTimeout(a.timeoutTimer),a.statusCode=a.status,u&&0==a.statusCode){var n=new Error("CORS request rejected: "+e.uri);return n.cors="rejected",f.loading=!0,f.end=!0,e.callback(n,a)}e.onResponse(null,a)}}function o(){f.loading||(f.loading=!0,t.log.debug("Response body loading",{id:a.id}))}var a=new n,s=!1,u=function(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(t){(e=document.createElement("a")).href="",e=e.href}var r=n.exec(e.toLowerCase())||[],i=n.exec(t.toLowerCase());return!(!i||i[1]==r[1]&&i[2]==r[2]&&(i[3]||("http:"===i[1]?80:443))==(r[3]||("http:"===r[1]?80:443)))}(e.uri),l="withCredentials"in a;if(r+=1,a.seq_id=r,a.id=r+": "+e.method+" "+e.uri,a._id=a.id,u&&!l){var c=new Error("Browser does not support cross-origin request: "+e.uri);return c.cors="unsupported",e.callback(c,a)}a.timeoutTimer=setTimeout(function(){s=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=e.timeout,t.log.error("Timeout",{id:a._id,milliseconds:e.timeout}),e.callback(n,a)},e.timeout);var f={response:!1,loading:!1,end:!1};a.onreadystatechange=function(r){if(s)return t.log.debug("Ignoring timed out state change",{state:a.readyState,id:a.id});if(t.log.debug("State change",{state:a.readyState,id:a.id,timed_out:s}),a.readyState===n.OPENED){t.log.debug("Request started",{id:a.id});for(var u in e.headers)a.setRequestHeader(u,e.headers[u])}else a.readyState===n.HEADERS_RECEIVED?i():a.readyState===n.LOADING?(i(),o()):a.readyState===n.DONE&&(i(),o(),function(){if(!f.end){if(f.end=!0,t.log.debug("Request done",{id:a.id}),a.body=a.responseText,e.json)try{a.body=JSON.parse(a.responseText)}catch(t){return e.callback(t,a)}e.callback(null,a,a.body)}}())},a.open(e.method,e.uri,!0),u&&(a.withCredentials=!!e.withCredentials);return a.send(e.body),a}(i)}function e(){}var n=XMLHttpRequest;if(!n)throw new Error("missing XMLHttpRequest");t.log={trace:e,debug:e,info:e,warn:e,error:e};var r=0;t.withCredentials=!1,t.DEFAULT_TIMEOUT=18e4,t.defaults=function(e,n){var r=function(t){return function(n,r){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var i in e)void 0===n[i]&&(n[i]=e[i]);return t(n,r)}},i=r(t);return i.get=r(t.get),i.post=r(t.post),i.put=r(t.put),i.head=r(t.head),i};return["get","put","post","head"].forEach(function(e){var n=e.toUpperCase();t[e.toLowerCase()]=function(e){"string"==typeof e?e={method:n,uri:e}:(e=JSON.parse(JSON.stringify(e))).method=n;var r=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,r)}}),t.couch=function(n,r){"string"==typeof n&&(n={uri:n}),n.json=!0,n.body&&(n.json=n.body),delete n.body,r=r||e;return t(n,function(t,e,n){if(t)return r(t,e,n);if((e.statusCode<200||e.statusCode>299)&&n.error){t=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var i in n)t[i]=n[i];return r(t,e,n)}return r(t,e,n)})},t})},{}],7:[function(t,e,n){},{}],8:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],9:[function(t,e,n){"use strict";function r(t){if(t>j)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return s(t)}return o(t,e,n)}function o(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return r.__proto__=i.prototype,r}(t,e,n):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|c(t,e),o=r(n),a=o.write(t,e);a!==n&&(o=o.slice(0,a));return o}(t,e):function(t){if(i.isBuffer(t)){var e=0|l(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(t){return t!=t}(t.length)?r(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t){return a(t),r(t<0?0:0|l(t))}function u(t){for(var e=t.length<0?0:0|l(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function l(t){if(t>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|t}function c(t,e){if(i.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return M(t).length;default:if(r)return L(t).length;e=(""+e).toLowerCase(),r=!0}}function f(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0);(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return function(t,e,n){return 0===e&&n===t.length?A.fromByteArray(t):A.fromByteArray(t.slice(e,n))}(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function h(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:d(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):d(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function d(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(t,l)===o(e,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var f=!0,h=0;h<u;h++)if(o(t,l+h)!==o(e,h)){f=!1;break}if(f)return l}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function m(t,e,n,r){return C(L(e,t.length-n),t,n,r)}function y(t,e,n,r){return C(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function b(t,e,n,r){return y(t,e,n,r)}function v(t,e,n,r){return C(M(e),t,n,r)}function w(t,e,n,r){return C(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=t[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=t[i+1],l=t[i+2],128==(192&u)&&128==(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}function x(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,r,o,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function S(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function E(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,4),P.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,i){return e=+e,n>>>=0,i||S(t,0,n,8),P.write(t,e,n,r,52,8),n+8}function L(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M(t){return A.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function C(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}var A=t("base64-js"),P=t("ieee754");n.Buffer=i,n.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},n.INSPECT_MAX_BYTES=50;var j=2147483647;n.kMaxLength=j,(i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return function(t,e,n){return a(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}(t,e,n)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=c,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)h(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)h(this,e,e+3),h(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)h(this,e,e+7),h(this,e+1,e+6),h(this,e+2,e+5),h(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):f.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,s=n-e,u=Math.min(a,s),l=this.slice(r,o),c=t.slice(e,n),f=0;f<u;++f)if(l[f]!==c[f]){a=l[f],s=c[f];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return p(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return p(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return v(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||x(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||x(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||x(t,4,this.length),P.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||x(t,4,this.length),P.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||x(t,8,this.length),P.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||x(t,8,this.length),P.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){k(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){k(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return E(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return E(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=i.isBuffer(t)?t:new i(t,r),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var T=/[^+/0-9A-Za-z-_]/g},{"base64-js":5,ieee754:35}],10:[function(t,e,n){(function(t){"use strict";function n(t){return Object.prototype.toString.call(t)}function r(e,n,r,o){function a(e,r){if(null===e)return null;if(0==r)return e;var c;if("object"!=typeof e)return e;if(i.isArray(e)?c=[]:i.isRegExp(e)?(c=new RegExp(e.source,i.getRegExpFlags(e)),e.lastIndex&&(c.lastIndex=e.lastIndex)):i.isDate(e)?c=new Date(e.getTime()):l&&t.isBuffer(e)?(c=new t(e.length),e.copy(c)):c=void 0===o?Object.create(Object.getPrototypeOf(e)):Object.create(o),n){var f=s.indexOf(e);if(-1!=f)return u[f];s.push(e),u.push(c)}for(var h in e)c[h]=a(e[h],r-1);return c}var s=[],u=[],l=void 0!==t;return void 0===n&&(n=!0),void 0===r&&(r=1/0),a(e,r)}var i={isArray:function(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===n(t)},isDate:function(t){return"object"==typeof t&&"[object Date]"===n(t)},isRegExp:function(t){return"object"==typeof t&&"[object RegExp]"===n(t)},getRegExpFlags:function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}};"object"==typeof e&&(e.exports=r),r.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e}}).call(this,t("buffer").Buffer)},{buffer:9}],11:[function(t,e,n){function r(t){return!!t.match(/(Lat)(itude)?/gi)}function i(t){return!!t.match(/(L)(on|ng)(gitude)?/i)}function o(t){return"object"==typeof t?Object.keys(t).length:0}function a(t){var e=[];return[",",";","\t","|"].forEach(function(n){var r=s(n).parse(t);if(r.length>=1){for(var i=o(r[0]),a=0;a<r.length;a++)if(o(r[a])!==i)return;e.push({delimiter:n,arity:Object.keys(r[0]).length})}}),e.length?e.sort(function(t,e){return e.arity-t.arity})[0].delimiter:null}var s=t("dsv"),u=t("sexagesimal");e.exports={isLon:i,isLat:r,csv:s.csv.parse,tsv:s.tsv.parse,dsv:s,auto:function(t){var e=a(t);return e?s(e).parse(t):null},csv2geojson:function(t,e,n){n||(n=e,e={}),e.delimiter=e.delimiter||",";var o=e.latfield||"",l=e.lonfield||"",c=[],f={type:"FeatureCollection",features:c};if("auto"===e.delimiter&&"string"==typeof t&&(e.delimiter=a(t),!e.delimiter))return n({type:"Error",message:"Could not autodetect delimiter"});var h="string"==typeof t?s(e.delimiter).parse(t):t;if(!h.length)return n(null,f);if(!o||!l){for(var p in h[0])!o&&r(p)&&(o=p),!l&&i(p)&&(l=p);if(!o||!l){var d=[];for(var g in h[0])d.push(g);return n({type:"Error",message:"Latitude and longitude fields not present",data:h,fields:d})}}for(var m=[],y=0;y<h.length;y++)if(void 0!==h[y][l]&&void 0!==h[y][l]){var b,v,w,_=h[y][l],x=h[y][o];(w=u(_,"EW"))&&(_=w),(w=u(x,"NS"))&&(x=w),b=parseFloat(_),v=parseFloat(x),isNaN(b)||isNaN(v)?m.push({message:"A row contained an invalid value for latitude or longitude",row:h[y]}):(e.includeLatLon||(delete h[y][l],delete h[y][o]),c.push({type:"Feature",properties:h[y],geometry:{type:"Point",coordinates:[parseFloat(b),parseFloat(v)]}}))}n(m.length?m:null,f)},toLine:function(t){for(var e=t.features,n={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<e.length;r++)n.geometry.coordinates.push(e[r].geometry.coordinates);return n.properties=e[0].properties,{type:"FeatureCollection",features:[n]}},toPolygon:function(t){for(var e=t.features,n={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<e.length;r++)n.geometry.coordinates[0].push(e[r].geometry.coordinates);return n.properties=e[0].properties,{type:"FeatureCollection",features:[n]}}}},{dsv:18,sexagesimal:91}],12:[function(t,e,n){function r(){var t=d3.dispatch("change","rowfocus");return d3.rebind(function(e){e.each(function(e){function n(){function e(e){e.data[d3.select(this).attr("field")]=function(t){var e=parseFloat(t);return e.toString()===t?e:t}(this.value),t.change(e.data,e.index)}function i(t){return t.entries().reduce(function(t,e){return t[e.key]=e.value,t},{})}var a=o.values(),s=r.select("thead").select("tr").selectAll("th").data(a,function(t){return t}),u=s.enter().append("th");u.append("span").text(String);var l=u.append("button"),c=u.append("button");s.exit().remove();var f=r.select("tbody").selectAll("tr").data(function(t){return t});f.enter().append("tr"),f.exit().remove();var h=f.selectAll("td").data(a,function(t){return t});h.enter().append("td").append("input").attr("field",String),h.exit().remove(),l.on("click",function(e){var r=e;confirm("Delete column "+r+"?")&&(o.remove(r),f.selectAll("input").data(function(e,n){var o=d3.map(e);o.remove(r);var a=i(o);return t.change(a,n),{data:a,index:n}}),n())}),l.append("span").attr("class","icon-minus"),l.append("span").text(" delete"),c.append("span").text(" rename"),c.on("click",function(e){var r=e,a=prompt("New name for column "+r+"?");a&&(o.remove(r),o.add(a),f.selectAll("input").data(function(e,n){var o=d3.map(e);o.set(a,o.get(r)),o.remove(r);var s=i(o);return t.change(s,n),{data:s,index:n}}),n())}),f.selectAll("input").data(function(t,e){return d3.range(a.length).map(function(){return{data:t,index:e}})}).classed("disabled",function(t){return void 0===t.data[d3.select(this).attr("field")]}).property("value",function(t){var e=t.data[d3.select(this).attr("field")];return isNaN(e)?e||"":e}).on("keyup",e).on("change",e).on("click",function(t){void 0===t.data[d3.select(this).attr("field")]&&(t.data[d3.select(this).attr("field")]="",n())}).on("focus",function(e){t.rowfocus(e.data,e.index)})}var r,i=d3.select(this),o=d3.set();e.map(Object.keys).forEach(function(t){t.forEach(function(t){o.add(t)})}),function(){var t=i.selectAll(".controls").data([e]).enter().append("div").attr("class","controls").append("button").on("click",function(){var t=prompt("column name");t&&(o.add(t),n())});t.append("span").attr("class","icon-plus"),t.append("span").text(" new column");var a=i.selectAll("table").data([e]).enter().append("table"),s=a.append("thead");a.append("tbody"),s.append("tr"),r=i.select("table")}(),n()})},t,"on")}void 0!==e&&(e.exports=function(t){return r})},{}],13:[function(t,e,n){e.exports.structure=t("./src/structure")},{"./src/structure":17}],14:[function(t,e,n){function r(t){var e={},n=[];for(var r in t)e[r]=typeof t[r];for(var a in e){var s=o[e[a]];n.push({name:a,type:s,size:i[s]})}return n}var i=t("./fieldsize"),o={string:"C",number:"N",boolean:"L"};e.exports.multi=function(t){var e={};return t.forEach(function(t){!function(t,e){for(var n in e)t[n]=e[n]}(e,t)}),r(e)},e.exports.bytesPer=function(t){return t.reduce(function(t,e){return t+e.size},1)},e.exports.obj=r},{"./fieldsize":15}],15:[function(t,e,n){e.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},{}],16:[function(t,e,n){e.exports.lpad=function(t,e,n){for(;t.length<e;)t=n+t;return t},e.exports.rpad=function(t,e,n){for(;t.length<e;)t+=n;return t},e.exports.writeField=function(t,e,n,r){for(var i=0;i<e;i++)t.setUint8(r,n.charCodeAt(i)),r++;return r}},{}],17:[function(t,e,n){t("./fieldsize");var r=t("./lib"),i=t("./fields");e.exports=function(t){var e=i.multi(t),n=32*e.length+1,o=i.bytesPer(e),a=new ArrayBuffer(n+32+o*t.length),s=new Date,u=new DataView(a);u.setUint8(0,3),u.setUint8(1,s.getFullYear()-1900),u.setUint8(2,s.getMonth()),u.setUint8(3,s.getDate()),u.setUint32(4,t.length,!0);var l=n+32;return u.setUint16(8,l,!0),u.setUint16(10,o,!0),u.setInt8(n-1,13),e.forEach(function(t,e){t.name.split("").slice(0,8).forEach(function(t,n){u.setInt8(32+32*e+n,t.charCodeAt(0))}),u.setInt8(32+32*e+11,t.type.charCodeAt(0)),u.setInt8(32+32*e+16,t.size),"N"==t.type&&u.setInt8(32+32*e+17,0)}),offset=n+32,t.forEach(function(t,n){u.setUint8(offset,32),offset++,e.forEach(function(e){var n=t[e.name]||0;switch(e.type){case"L":u.setUint8(offset,n?84:70),offset++;break;case"D":offset=r.writeField(u,8,r.lpad(n.toString(),8," "),offset);break;case"N":offset=r.writeField(u,e.size,r.lpad(n.toString(),e.size," ").substr(0,18),offset);break;case"C":offset=r.writeField(u,e.size,r.rpad(n.toString(),e.size," "),offset);break;default:throw new Error("Unknown field type")}})}),u.setUint8(offset-1,26),u}},{"./fields":14,"./fieldsize":15,"./lib":16}],18:[function(t,e,n){e.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{}],19:[function(t,e,n){"use strict";var r=/["'&<>]/;e.exports=function(t){var e=""+t,n=r.exec(e);if(!n)return e;var i,o="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(o+=e.substring(s,a)),s=a+1,o+=i}return s!==a?o+e.substring(s,a):o}},{}],20:[function(t,e,n){function r(){if(!(this instanceof r))return new r;this._bbox=[1/0,1/0,-1/0,-1/0],this._valid=!1}e.exports=r,r.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},r.prototype.union=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},r.prototype.bbox=function(){return this._valid?this._bbox:null},r.prototype.contains=function(t){return this._valid?this._bbox[0]<=t[0]&&this._bbox[1]<=t[1]&&this._bbox[2]>=t[0]&&this._bbox[3]>=t[1]:null},r.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],21:[function(t,e,n){var r=r||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!t.externalHost&&"download"in r,o=t.webkitRequestFileSystem,a=t.requestFileSystem||o||t.mozRequestFileSystem,s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",l=0,c=[],f=function(){for(var t=c.length;t--;){var e=c[t];"string"==typeof e?n().revokeObjectURL(e):e.remove()}c.length=0},h=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){s(t)}}},p=function(s,f){var p,d,g,m=this,y=s.type,b=!1,v=function(){var t=n().createObjectURL(s);return c.push(t),t},w=function(){h(m,"writestart progress write writeend".split(" "))},_=function(){!b&&p||(p=v()),d?d.location.href=p:window.open(p,"_blank"),m.readyState=m.DONE,w()},x=function(t){return function(){if(m.readyState!==m.DONE)return t.apply(this,arguments)}},k={create:!0,exclusive:!1};if(m.readyState=m.INIT,f||(f="download"),i)return p=v(),r.href=p,r.download=f,function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}(r),m.readyState=m.DONE,void w();t.chrome&&y&&y!==u&&(g=s.slice||s.webkitSlice,s=g.call(s,0,s.size,u),b=!0),o&&"download"!==f&&(f+=".download"),(y===u||o)&&(d=t),a?(l+=s.size,a(t.TEMPORARY,l,x(function(t){t.root.getDirectory("saved",k,x(function(t){var e=function(){t.getFile(f,k,x(function(t){t.createWriter(x(function(e){e.onwriteend=function(e){d.location.href=t.toURL(),c.push(t),m.readyState=m.DONE,h(m,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&_()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=m["on"+t]}),e.write(s),m.abort=function(){e.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),_)}),_)};t.getFile(f,{create:!1},x(function(t){t.remove(),e()}),x(function(t){t.code===t.NOT_FOUND_ERR?e():_()}))}),_)}),_)):_()},d=p.prototype,g=function(t,e){return new p(t,e)};return d.abort=function(){this.readyState=this.DONE,h(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,t.addEventListener("unload",f,!1),g.unload=function(){f(),t.removeEventListener("unload",f,!1)},g}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&null!==e?e.exports=r:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return r})},{}],22:[function(t,e,n){function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e=0;if(t.length>2){for(var n,r,i=0;i<t.length-1;i++)n=t[i],e+=o((r=t[i+1])[0]-n[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));e=e*a.RADIUS*a.RADIUS/2}return e}function o(t){return t*Math.PI/180}var a=t("wgs84");e.exports=function(t){if("Polygon"===t.type)return r(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=r(t.coordinates[n]);return e}return null}},{wgs84:144}],23:[function(t,e,n){e.exports=function(t,e){function n(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}return n(t)}},{}],24:[function(t,e,n){var r=t("geojson-normalize"),i=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var e=[];return i(r(t)).features.forEach(function(t){t.geometry&&(e=e.concat(o(t.geometry.coordinates)))}),e}},{"./flatten":23,"geojson-flatten":26,"geojson-normalize":27}],25:[function(t,e,n){function r(t){for(var e=a(),n=i(t),r=0;r<n.length;r++)e.include(n[r]);return e}var i=t("geojson-coords"),o=t("traverse"),a=t("extent");e.exports=function(t){return r(t).bbox()},e.exports.polygon=function(t){return r(t).polygon()},e.exports.bboxify=function(t){return o(t).map(function(t){t&&"string"==typeof t.type&&(t.bbox=r(t).bbox(),this.update(t))})}},{extent:20,"geojson-coords":24,traverse:138}],26:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(t,e){return t.concat(r(e))},[]),t;case"Feature":return r(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}});case"MultiPoint":return t.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return t.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return t.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return t.geometries;case"Point":case"Polygon":case"LineString":return[t];default:return t}}e.exports=r},{}],27:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=r[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],28:[function(t,e,n){function r(){return Math.random()-.5}function i(){return{type:"Point",coordinates:[360*r(),180*r()]}}e.exports=function(t,e){switch(e){case"point":for(var n=[],r=0;r<t;r++)n.push(function(t){return{type:"Feature",geometry:t,properties:{}}}(i()));return function(t){return{type:"FeatureCollection",features:t}}(n)}}},{}],29:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(i(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return function(t,e){"Polygon"===t.type?t.coordinates=o(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(o,e)));return t}(t,e);default:return t}}function i(t,e){return function(n){return t(n,e)}}function o(t,e){e=!!e,t[0]=a(t[0],e);for(var n=1;n<t.length;n++)t[n]=a(t[n],!e);return t}function a(t,e){return function(t){return s.ring(t)>=0}(t)===e?t:t.reverse()}var s=t("geojson-area");e.exports=r},{"geojson-area":30}],30:[function(t,e,n){function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e=0;if(t.length>2){for(var n,r,i=0;i<t.length-1;i++)n=t[i],e+=o((r=t[i+1])[0]-n[0])*(2+Math.sin(o(n[1]))+Math.sin(o(r[1])));e=e*a.RADIUS*a.RADIUS/2}return e}function o(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=function(t){if("Polygon"===t.type)return r(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=r(t.coordinates[n]);return e}return null},e.exports.ring=i},{wgs84:144}],31:[function(t,e,n){var r=t("dsv");e.exports=function(t,e){switch(t.type){case"FeatureCollection":break;case"Feature":t={type:"FeatureCollection",features:[t]};break;case"Point":t={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};break;default:return null}return r(e||",").format(t.features.filter(function(t){return"Point"==t.geometry.type}).map(function(t){var e=JSON.parse(JSON.stringify(t.properties));return e.lon=t.geometry.coordinates[0],e.lat=t.geometry.coordinates[1],e}))}},{dsv:18}],32:[function(t,e,n){var r=t("jsonlint-lines");e.exports.hint=function(t){function e(t){t.type?h[t.type]?t&&h[t.type](t):f.push({message:"The type "+t.type+" is unknown",line:t.__line__}):f.push({message:"The type property is required and was not found",line:t.__line__})}function n(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function i(t,e,n){if(void 0===t[e])return f.push({message:'"'+e+'" property required',line:t.__line__});if("array"===n){if(!Array.isArray(t[e]))return f.push({message:'"'+e+'" property should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else if(n&&typeof t[e]!==n)return f.push({message:'"'+e+'" property should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}function o(t,e){return Array.isArray(t)?t.length<2?f.push({message:"position must have 2 or more elements",line:t.__line__||e}):n(t,"number")?void 0:f.push({message:"each element in a position must be a number",line:t.__line__||e}):f.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||e})}function a(t,e,n,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===n)return o(t,r);if(1===n&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return f.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r});t.length<4&&f.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),!t.length||t[t.length-1].length===t[0].length&&t[t.length-1].every(function(e,n){return t[0][n]===e})||f.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r})}else"Line"===e&&t.length<2&&f.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(!Array.isArray(t))return f.push({message:"coordinates must be list of positions",line:r});t.forEach(function(t){a(t,e,n-1,t.__line__||r)})}function s(t){if(t.crs)if("object"==typeof t.crs){var e=i(t.crs,"type","string"),n=i(t.crs,"properties","object");e||n||("name"==t.crs.type?i(t.crs.properties,"name","string"):"link"==t.crs.type&&i(t.crs.properties,"href","string"))}else f.push({message:"the value of the crs property must be an object, not a "+typeof t.crs,line:t.__line__})}function u(t){if(t.bbox)if(Array.isArray(t.bbox)){if(!n(t.bbox,"number"))return f.push({message:"each element in a bbox property must be a number",line:t.bbox.__line__})}else f.push({message:"bbox property must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function l(t){s(t),u(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&f.push({message:'Feature "id" property must have a string or number value',line:t.__line__}),"Feature"!==t.type&&f.push({message:"GeoJSON features must have a type=feature property",line:t.__line__}),i(t,"properties","object"),i(t,"geometry","object")||t.geometry&&e(t.geometry)}var c,f=[],h={Point:function(t){s(t),u(t),i(t,"coordinates","array")||o(t.coordinates)},Feature:l,MultiPoint:function(t){s(t),u(t),i(t,"coordinates","array")||a(t.coordinates,"",1)},LineString:function(t){s(t),u(t),i(t,"coordinates","array")||a(t.coordinates,"Line",1)},MultiLineString:function(t){s(t),u(t),i(t,"coordinates","array")||a(t.coordinates,"Line",2)},FeatureCollection:function(t){if(s(t),u(t),!i(t,"features","array")){if(!n(t.features,"object"))return f.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(l)}},GeometryCollection:function(t){s(t),u(t),i(t,"geometries","array")||t.geometries.forEach(function(t){t&&e(t)})},Polygon:function(t){s(t),u(t),i(t,"coordinates","array")||a(t.coordinates,"LinearRing",2)},MultiPolygon:function(t){s(t),u(t),i(t,"coordinates","array")||a(t.coordinates,"LinearRing",3)}};if("string"!=typeof t)return[{message:"Expected string input",line:0}];try{c=r.parse(t)}catch(t){var p=t.message.match(/line (\d+)/),d=0;return p&&(d=parseInt(p[1],10)),[{line:d-1,message:t.message,error:t}]}return"object"!=typeof c||null===c||void 0===c?(f.push({message:"The root of a GeoJSON object must be an object.",line:0}),f):(e(c),f)}},{"jsonlint-lines":37}],33:[function(t,e,n){var r=t("dsv").csv.parse;e.exports=function(t){var e=r(t).reduce(function(t,e){return t[e.shape_id]=(t[e.shape_id]||[]).concat(e),t},{});return{type:"FeatureCollection",features:Object.keys(e).map(function(t){return{type:"Feature",id:t,properties:{shape_id:t},geometry:{type:"LineString",coordinates:e[t].sort(function(t,e){return+t.shape_pt_sequence-e.shape_pt_sequence}).map(function(t){return[parseFloat(t.shape_pt_lon),parseFloat(t.shape_pt_lat)]})}}})}}},{dsv:34}],34:[function(t,e,n){e.exports=new Function('dsv.version = "0.0.4";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.slice(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.slice(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.slice(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && (a = f(a, n++)) == null) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{}],35:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*g}},{}],36:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],37:[function(t,e,n){(function(r){var i=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o,a){var s=o.length-1;switch(i){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=n.lexer.lex()||f)&&(t=n.symbols_[t]||t),t}var n=this,r=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0,f=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,g,m,y,b,v,w,_,x,k={};;){if(m=r[r.length-1],this.defaultActions[m]?y=this.defaultActions[m]:(null!==d&&void 0!==d||(d=e()),y=a[m]&&a[m][d]),void 0===y||!y.length||!y[0]){var S="";x=[];for(v in a[m])this.terminals_[v]&&v>2&&x.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(u+1)+": Unexpected "+(d==f?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:x})}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(y[0]){case 1:r.push(d),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(y[1]),d=null,g?(d=g,g=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(w=this.productions_[y[1]][1],k.$=i[i.length-w],k._$={first_line:o[o.length-(w||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(w||1)].first_column,last_column:o[o.length-1].last_column},p&&(k._$.range=[o[o.length-(w||1)].range[0],o[o.length-1].range[1]]),void 0!==(b=this.performAction.call(k,s,l,u,this.yy,y[1],i,o)))return b;w&&(r=r.slice(0,-1*w*2),i=i.slice(0,-1*w),o=o.slice(0,-1*w)),r.push(this.productions_[y[1]][0]),i.push(k.$),o.push(k._$),_=a[r[r.length-2]][r[r.length-1]],r.push(_);break;case 3:return!0}}return!0}},n={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;return t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return e.lexer=n,t.prototype=e,e.Parser=t,new t}();void 0!==t&&void 0!==n&&(n.parser=i,n.Parser=i.Parser,n.parse=function(){return i.parse.apply(i,arguments)},n.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),r.exit(1));var i=t("fs").readFileSync(t("path").normalize(e[1]),"utf8");return n.parser.parse(i)},void 0!==e&&t.main===e&&n.main(r.argv.slice(1)))}).call(this,t("_process"))},{_process:88,fs:8,path:85}],38:[function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t,e){for(var n,i,o,a,s,u,l,c="",f=0;f<t.length;)a=(n=t.charCodeAt(f++))>>2,s=(3&n)<<4|(i=t.charCodeAt(f++))>>4,u=(15&i)<<2|(o=t.charCodeAt(f++))>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),c=c+r.charAt(a)+r.charAt(s)+r.charAt(u)+r.charAt(l);return c},n.decode=function(t,e){var n,i,o,a,s,u,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)n=r.indexOf(t.charAt(c++))<<2|(a=r.indexOf(t.charAt(c++)))>>4,i=(15&a)<<4|(s=r.indexOf(t.charAt(c++)))>>2,o=(3&s)<<6|(u=r.indexOf(t.charAt(c++))),l+=String.fromCharCode(n),64!=s&&(l+=String.fromCharCode(i)),64!=u&&(l+=String.fromCharCode(o));return l}},{}],39:[function(t,e,n){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},{}],40:[function(t,e,n){"use strict";n.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},n.DEFLATE=t("./flate")},{"./flate":45}],41:[function(t,e,n){"use strict";var r=t("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if(void 0===t||!t.length)return 0;var n="string"!==r.getTypeOf(t);void 0===e&&(e=0);var o=0;e^=-1;for(var a=0,s=t.length;a<s;a++)o=n?t[a]:t.charCodeAt(a),e=e>>>8^i[255&(e^o)];return-1^e}},{"./utils":58}],42:[function(t,e,n){"use strict";function r(t){this.data=null,this.length=0,this.index=0}var i=t("./utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":58}],43:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!1,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],44:[function(t,e,n){"use strict";var r=t("./utils");n.string2binary=function(t){return r.string2binary(t)},n.string2Uint8Array=function(t){return r.transformTo("uint8array",t)},n.uint8Array2String=function(t){return r.transformTo("string",t)},n.string2Blob=function(t){var e=r.transformTo("arraybuffer",t);return r.arrayBuffer2Blob(e)},n.arrayBuffer2Blob=function(t){return r.arrayBuffer2Blob(t)},n.transformTo=function(t,e){return r.transformTo(t,e)},n.getTypeOf=function(t){return r.getTypeOf(t)},n.checkSupport=function(t){return r.checkSupport(t)},n.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,n.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,n.pretty=function(t){return r.pretty(t)},n.findCompression=function(t){return r.findCompression(t)},n.isRegExp=function(t){return r.isRegExp(t)}},{"./utils":58}],45:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");n.uncompressInputType=r?"uint8array":"array",n.compressInputType=r?"uint8array":"array",n.magic="\b\0",n.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},n.uncompress=function(t){return i.inflateRaw(t)}},{pako:69}],46:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}var i=t("./base64");(r.prototype=t("./object")).load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return i.encode(t)},decode:function(t){return i.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":38,"./compressions":40,"./defaults":43,"./deprecatedPublicUtils":44,"./load":47,"./object":50,"./support":54}],47:[function(t,e,n){"use strict";var r=t("./base64"),i=t("./zipEntries");e.exports=function(t,e){var n,o,a,s;for((e=e||{}).base64&&(t=r.decode(t)),n=(o=new i(t,e)).files,a=0;a<n.length;a++)s=n[a],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":38,"./zipEntries":59}],48:[function(t,e,n){(function(t){"use strict";e.exports=function(e,n){return new t(e,n)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,t("buffer").Buffer)},{buffer:9}],49:[function(t,e,n){"use strict";function r(t){this.data=t,this.length=this.data.length,this.index=0}var i=t("./uint8ArrayReader");(r.prototype=new i).readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":55}],50:[function(t,e,n){"use strict";var r=t("./support"),i=t("./utils"),o=t("./crc32"),a=t("./signature"),s=t("./defaults"),u=t("./base64"),l=t("./compressions"),c=t("./compressedObject"),f=t("./nodeBuffer"),h=t("./utf8"),p=t("./stringWriter"),d=t("./uint8ArrayWriter"),g=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},m=function(t){var e=g(t);return"string"===i.getTypeOf(e)?!t.options.binary&&r.nodebuffer?f(e,"utf-8"):t.asBinary():e},y=function(t){var e=g(this);return null===e||void 0===e?"":(this.options.base64&&(e=u.decode(e)),e=t&&this.options.binary?L.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",L.utf8encode(e))),e)},b=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};b.prototype={asText:function(){return y.call(this,!0)},asBinary:function(){return y.call(this,!1)},asNodeBuffer:function(){var t=m(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=m(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var v=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},w=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},_=function(t,e,n){var r,o=i.getTypeOf(e);if("string"==typeof(n=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=w(t,s),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t}(n)).unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(t=k(t)),n.createFolders&&(r=x(t))&&S.call(this,r,!0),n.dir||null===e||void 0===e)n.base64=!1,n.binary=!1,e=null,o=null;else if("string"===o)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(e=i.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=i.transformTo("uint8array",e))}var a=new b(t,e,n);return this.files[t]=a,a},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},k=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},S=function(t,e){return e=void 0!==e&&e,t=k(t),this.files[t]||_.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},E=function(t,e,n){var r,a=new c;return t._data instanceof c?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=l.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n))):((r=m(t))&&0!==r.length&&!t.dir||(e=l.STORE,r=""),a.uncompressedSize=r.length,a.crc32=o(r),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},I=function(t,e,n,r,s){n.compressedContent;var u,l,c,f,p=i.transformTo("string",h.utf8encode(e.name)),d=e.comment||"",g=i.transformTo("string",h.utf8encode(d)),m=p.length!==e.name.length,y=g.length!==d.length,b=e.options,w="",_="",x="";c=e._initialMetadata.dir!==e.dir?e.dir:b.dir,f=e._initialMetadata.date!==e.date?e.date:b.date;var k=0,S=0;c&&(k|=16),"UNIX"===s?(S=798,k|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(e.unixPermissions,c)):(S=20,k|=function(t,e){return 63&(t||0)}(e.dosPermissions)),u=f.getHours(),u<<=6,u|=f.getMinutes(),u<<=5,u|=f.getSeconds()/2,l=f.getFullYear()-1980,l<<=4,l|=f.getMonth()+1,l<<=5,l|=f.getDate(),m&&(_=v(1,1)+v(o(p),4)+p,w+="up"+v(_.length,2)+_),y&&(x=v(1,1)+v(this.crc32(g),4)+g,w+="uc"+v(x.length,2)+x);var E="";E+="\n\0",E+=m||y?"\0\b":"\0\0",E+=n.compressionMethod,E+=v(u,2),E+=v(l,2),E+=v(n.crc32,4),E+=v(n.compressedSize,4),E+=v(n.uncompressedSize,4),E+=v(p.length,2),E+=v(w.length,2);return{fileRecord:a.LOCAL_FILE_HEADER+E+p+w,dirRecord:a.CENTRAL_FILE_HEADER+v(S,2)+E+v(g.length,2)+"\0\0\0\0"+v(k,4)+v(r,4)+p+w+g,compressedObject:n}},L={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,r,i,o=[];for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],i=new b(r.name,r._data,w(r.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,i)&&o.push(i));return o},file:function(t,e,n){if(1===arguments.length){if(i.isRegExp(t)){var r=t;return this.filter(function(t,e){return!e.dir&&r.test(t)})}return this.filter(function(e,n){return!n.dir&&e===t})[0]||null}return t=this.root+t,_.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter(function(e,n){return n.dir&&t.test(e)});var e=this.root+t,n=S.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter(function(e,n){return n.name.slice(0,t.length)===t}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,n,r=[],o=0,s=0,c=i.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var f in this.files)if(this.files.hasOwnProperty(f)){var h=this.files[f],g=h.options.compression||t.compression.toUpperCase(),m=l[g];if(!m)throw new Error(g+" is not a valid compression method !");var y=h.options.compressionOptions||t.compressionOptions||{},b=E.call(this,h,m,y),_=I.call(this,f,h,b,o,t.platform);o+=_.fileRecord.length+b.compressedSize,s+=_.dirRecord.length,r.push(_)}var x="";x=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(r.length,2)+v(r.length,2)+v(s,4)+v(o,4)+v(c.length,2)+c;var k=t.type.toLowerCase();for(e="uint8array"===k||"arraybuffer"===k||"blob"===k||"nodebuffer"===k?new d(o+s+x.length):new p(o+s+x.length),n=0;n<r.length;n++)e.append(r[n].fileRecord),e.append(r[n].compressedObject.compressedContent);for(n=0;n<r.length;n++)e.append(r[n].dirRecord);e.append(x);var S=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),S);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",S),t.mimeType);case"base64":return t.base64?u.encode(S):S;default:return S}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return i.transformTo("string",h.utf8encode(t))},utf8decode:function(t){return h.utf8decode(t)}};e.exports=L},{"./base64":38,"./compressedObject":39,"./compressions":40,"./crc32":41,"./defaults":43,"./nodeBuffer":48,"./signature":51,"./stringWriter":53,"./support":54,"./uint8ArrayWriter":56,"./utf8":57,"./utils":58}],51:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],52:[function(t,e,n){"use strict";function r(t,e){this.data=t,e||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var i=t("./dataReader"),o=t("./utils");(r.prototype=new i).byteAt=function(t){return this.data.charCodeAt(t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":42,"./utils":58}],53:[function(t,e,n){"use strict";var r=t("./utils"),i=function(){this.data=[]};i.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=i},{"./utils":58}],54:[function(t,e,n){(function(t){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var e=new ArrayBuffer(0);try{n.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(e),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}}).call(this,t("buffer").Buffer)},{buffer:9}],55:[function(t,e,n){"use strict";function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var i=t("./dataReader");(r.prototype=new i).byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":42}],56:[function(t,e,n){"use strict";var r=t("./utils"),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=i},{"./utils":58}],57:[function(t,e,n){"use strict";for(var r=t("./utils"),i=t("./support"),o=t("./nodeBuffer"),a=new Array(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var u=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e},l=function(t){var e,n,i,o,s=t.length,u=new Array(2*s);for(n=0,e=0;e<s;)if((i=t[e++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<s;)i=i<<6|63&t[e++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)};n.utf8encode=function(t){return i.nodebuffer?o(t,"utf-8"):function(t){var e,n,r,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){if(i.nodebuffer)return r.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],n=0,o=(t=r.transformTo(i.uint8array?"uint8array":"array",t)).length;n<o;){var a=u(t,Math.min(n+65536,o));i.uint8array?e.push(l(t.subarray(n,a))):e.push(l(t.slice(n,a))),n=a}return e.join("")}},{"./nodeBuffer":48,"./support":54,"./utils":58}],58:[function(t,e,n){"use strict";function r(t){return t}function i(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function o(t){var e=65536,r=[],i=t.length,o=n.getTypeOf(t),a=0,s=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0))}}catch(t){s=!1}if(!s){for(var u="",c=0;c<t.length;c++)u+=String.fromCharCode(t[c]);return u}for(;a<i&&e>1;)try{"array"===o||"nodebuffer"===o?r.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,i)))):r.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,i)))),a+=e}catch(t){e=Math.floor(e/2)}return r.join("")}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}var s=t("./support"),u=t("./compressions"),l=t("./nodeBuffer");n.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},n.arrayBuffer2Blob=function(t,e){n.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(t),r.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=o;var c={};c.string={string:r,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,l(t.length))}},c.array={string:o,array:r,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},c.arraybuffer={string:function(t){return o(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:r,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},c.uint8array={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:r,nodebuffer:function(t){return l(t)}},c.nodebuffer={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:r},n.transformTo=function(t,e){if(e||(e=""),!t)return e;n.checkSupport(t);var r=n.getTypeOf(e);return c[r][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":s.nodebuffer&&l.test(t)?"nodebuffer":s.uint8array&&t instanceof Uint8Array?"uint8array":s.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!s[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},n.findCompression=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":40,"./nodeBuffer":48,"./support":54}],59:[function(t,e,n){"use strict";function r(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var i=t("./stringReader"),o=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),s=t("./utils"),u=t("./signature"),l=t("./zipEntry"),c=t("./support"),f=t("./object");r.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=f.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)(t=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(u.LOCAL_FILE_HEADER),e=!1}catch(t){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(t=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=s.getTypeOf(t);"string"!==e||c.uint8array?this.reader="nodebuffer"===e?new o(t):new a(s.transformTo("uint8array",t)):this.reader=new i(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./nodeBufferReader":49,"./object":50,"./signature":51,"./stringReader":52,"./support":54,"./uint8ArrayReader":55,"./utils":58,"./zipEntry":60}],60:[function(t,e,n){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var i=t("./stringReader"),o=t("./utils"),a=t("./compressedObject"),s=t("./object");r.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var r=t.index;t.setIndex(e);var i=t.readData(n);return t.setIndex(r),i}},prepareContent:function(t,e,n,r,i){return function(){var t=o.transformTo(r.uncompressInputType,this.getCompressedContent()),e=r.uncompress(t);if(e.length!==i)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=o.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),r=t.readString(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:s.crc32(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:s.crc32(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null}},e.exports=r},{"./compressedObject":39,"./object":50,"./stringReader":52,"./utils":58}],61:[function(t,e,n){var r=t("spherical"),i=t("geojson-area");e.exports.circle=function(t,e,n){function i(t){for(var n=[],i=0;i<o+1;i++)n.push(r.radial([t.lng,t.lat],i/o*360,e).reverse());return n}t=L.latLng(t);var o=(n=n||{}).parts||20,a=L.polygon(i(t),n);return a.setLatLng=function(e){return t=e,a.setLatLngs(i(t)),a},a.getRadius=function(t){return e},a.setRadius=function(n){return e=n,a.setLatLngs(i(t)),a},a},e.exports.area=function(t){var e=t.toGeoJSON();return i(e.geometry)}},{"geojson-area":22,spherical:103}],62:[function(t,e,n){!function(t){var e=function(){var e=t.documentMode;return"onhashchange"in t&&(void 0===e||e>7)}();L.Hash=function(t){this.onHashChange=L.Util.bind(this.onHashChange,this),t&&this.init(t)},L.Hash.parseHash=function(t){0===t.indexOf("#")&&(t=t.substr(1));var e=t.split("/");if(3==e.length){var n=parseInt(e[0],10),r=parseFloat(e[1]),i=parseFloat(e[2]);return!(isNaN(n)||isNaN(r)||isNaN(i))&&{center:new L.LatLng(r,i),zoom:n}}return!1},L.Hash.formatHash=function(t){var e=t.getCenter(),n=t.getZoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return"#"+[n,e.lat.toFixed(r),e.lng.toFixed(r)].join("/")},L.Hash.prototype={map:null,lastHash:null,parseHash:L.Hash.parseHash,formatHash:L.Hash.formatHash,init:function(t){this.map=t,this.lastHash=null,this.onHashChange(),this.isListening||this.startListening()},removeFrom:function(t){this.changeTimeout&&clearTimeout(this.changeTimeout),this.isListening&&this.stopListening(),this.map=null},onMapMove:function(){if(this.movingMap||!this.map._loaded)return!1;var t=this.formatHash(this.map);this.lastHash!=t&&(location.replace(t),this.lastHash=t)},movingMap:!1,update:function(){var t=location.hash;if(t!==this.lastHash){var e=this.parseHash(t);e?(this.movingMap=!0,this.map.setView(e.center,e.zoom),this.movingMap=!1):this.onMapMove(this.map)}},changeDefer:100,changeTimeout:null,onHashChange:function(){if(!this.changeTimeout){var t=this;this.changeTimeout=setTimeout(function(){t.update(),t.changeTimeout=null},this.changeDefer)}},isListening:!1,hashChangeInterval:null,startListening:function(){this.map.on("moveend",this.onMapMove,this),e?L.DomEvent.addListener(t,"hashchange",this.onHashChange):(clearInterval(this.hashChangeInterval),this.hashChangeInterval=setInterval(this.onHashChange,50)),this.isListening=!0},stopListening:function(){this.map.off("moveend",this.onMapMove,this),e?L.DomEvent.removeListener(t,"hashchange",this.onHashChange):clearInterval(this.hashChangeInterval),this.isListening=!1}},L.hash=function(t){return new L.Hash(t)},L.Map.prototype.addHash=function(){this._hash=L.hash(this)},L.Map.prototype.removeHash=function(){this._hash.removeFrom()}}(window)},{}],63:[function(t,e,n){(function(t){(function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=f.normal,this.options.gfm&&(this.options.tables?this.rules=f.tables:this.rules=f.gfm)}function r(t,e){if(this.options=e||c.defaults,this.links=t,this.rules=h.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function i(t){this.options=t||{}}function o(t){this.tokens=[],this.token=null,this.options=t||c.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(t,e){return t=t.source,e=e||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),n):new RegExp(t,e)}}function u(){}function l(t){for(var e,n,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function c(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null);var i,s,u=(n=l({},c.defaults,n||{})).highlight,f=0;try{i=t.lex(e,n)}catch(t){return r(t)}s=i.length;var h=function(){var t,e;try{t=o.parse(i,n)}catch(t){e=t}return n.highlight=u,e?r(e):r(null,t)};if(!u||u.length<3)return h();if(delete n.highlight,!s)return h();for(;f<i.length;f++)!function(t){"code"!==t.type?--s||h():u(t.text,t.lang,function(e,n){if(null==n||n===t.text)return--s||h();t.text=n,t.escaped=!0,--s||h()})}(i[f])}else try{return n&&(n=l({},c.defaults,n)),o.parse(t.lex(e,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+a(t.message+"",!0)+"</pre>";throw t}}var f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};f.bullet=/(?:[*+-]|\d+\.)/,f.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,f.item=s(f.item,"gm")(/bull/g,f.bullet)(),f.list=s(f.list)(/bull/g,f.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+f.def.source+")")(),f.blockquote=s(f.blockquote)("def",f.def)(),f._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",f.html=s(f.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,f._tag)(),f.paragraph=s(f.paragraph)("hr",f.hr)("heading",f.heading)("lheading",f.lheading)("blockquote",f.blockquote)("tag","<"+f._tag)("def",f.def)(),f.normal=l({},f),f.gfm=l({},f.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),f.gfm.paragraph=s(f.paragraph)("(?!","(?!"+f.gfm.fences.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|")(),f.tables=l({},f.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=f,t.lex=function(e,n){return new t(n).lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,n){var r,i,o,a,s,u,l,c,h;for(t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(e&&(o=this.rules.nptable.exec(t))){for(t=t.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<u.align.length;c++)/^ *-+: *$/.test(u.align[c])?u.align[c]="right":/^ *:-+: *$/.test(u.align[c])?u.align[c]="center":/^ *:-+ *$/.test(u.align[c])?u.align[c]="left":u.align[c]=null;for(c=0;c<u.cells.length;c++)u.cells[c]=u.cells[c].split(/ *\| */);this.tokens.push(u)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,e,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),r=!1,h=(o=o[0].match(this.rules.item)).length,c=0;c<h;c++)l=(u=o[c]).length,~(u=u.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(a===(s=f.bullet.exec(o[c+1])[0])||a.length>1&&s.length>1||(t=o.slice(c+1).join("\n")+t,c=h-1)),i=r||/\n\n(?!\s*$)/.test(u),c!==h-1&&(r="\n"===u.charAt(u.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(u,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0]});else if(!n&&e&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(e&&(o=this.rules.table.exec(t))){for(t=t.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<u.align.length;c++)/^ *-+: *$/.test(u.align[c])?u.align[c]="right":/^ *:-+: *$/.test(u.align[c])?u.align[c]="center":/^ *:-+ *$/.test(u.align[c])?u.align[c]="left":u.align[c]=null;for(c=0;c<u.cells.length;c++)u.cells[c]=u.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(u)}else if(e&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=s(h.link)("inside",h._inside)("href",h._href)(),h.reflink=s(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:s(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:s(h.br)("{2,}","*")(),text:s(h.gfm.text)("{2,}","*")()}),r.rules=h,r.output=function(t,e,n){return new r(e,n).output(t)},r.prototype.output=function(t){for(var e,n,r,i,o="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):r=n=a(i[1]),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),t=t.substring(i[0].length),o+=this.options.sanitize?a(i[0]):i[0];else if(i=this.rules.link.exec(t))t=t.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),e=(i[2]||i[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){o+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(i,e),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),o+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),o+=a(this.smartypants(i[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(i[0].length),r=n=a(i[1]),o+=this.renderer.link(r,null,n);return o},r.prototype.outputLink=function(t,e){var n=a(e.href),r=e.title?a(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,a(t[1]))},r.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t},r.prototype.mangle=function(t){for(var e,n="",r=t.length,i=0;i<r;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+a(e,!0)+'">'+(n?t:a(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:a(t,!0))+"\n</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(this.options.sanitize){try{var r=decodeURIComponent(function(t){return t.replace(/&([#\w]+);/g,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===r.indexOf("javascript:"))return""}var i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+=">"+n+"</a>"},i.prototype.image=function(t,e,n){var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},o.parse=function(t,e,n){return new o(e,n).parse(t)},o.prototype.parse=function(t){this.inline=new r(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i="",o="";for(n="",t=0;t<this.token.header.length;t++)({header:!0,align:this.token.align[t]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(i,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var a=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a);case"list_item_start":for(o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,c.options=c.setOptions=function(t){return l(c.defaults,t),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},c.Parser=o,c.parser=o.parse,c.Renderer=i,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=r,c.inlineLexer=r.output,c.parse=c,"object"==typeof n?e.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(t,e,n){var r=t("./lodash.custom.js"),i=t("geojson-rewind"),o=t("./polygon_features.json"),a={};(a=function(t,e){function n(t,n,o){function a(t,n){if("object"!=typeof n&&(n={}),"function"==typeof e.uninterestingTags)return!e.uninterestingTags(t,n);for(var r in t)if(!0!==e.uninterestingTags[r]&&!0!==n[r]&&n[r]!==t[r])return!0;return!1}function s(t){var e={timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid};for(k in e)void 0===e[k]&&delete e[k];return e}function u(t,e){function n(t){for(var e,n,r,i,o,a,s=function(t){return t[0]},u=function(t){return t[t.length-1]},l=[];t.length;)for(e=t.pop().nodes.slice(),l.push(e);t.length&&s(e)!==u(e);){for(n=s(e),r=u(e),i=0;i<t.length;i++){if(a=t[i].nodes,r===s(a)){o=e.push,a=a.slice(1);break}if(r===u(a)){o=e.push,a=a.slice(0,-1).reverse();break}if(n==u(a)){o=e.unshift,a=a.slice(0,-1);break}if(n==s(a)){o=e.unshift,a=a.slice(1).reverse();break}a=o=null}if(!a)break;t.splice(i,1),o.apply(e,a)}return l}function i(t){var e,n,r=function(t,e){for(var n=0;n<e.length;n++)if(o(e[n],t))return!0;return!1},i=function(t){return t.map(function(t){return[+t.lat,+t.lon]})},o=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],l=e[a][0],c=e[a][1];u>r!=c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i};for(t=i(t),e=0;e<u.length;e++)if(n=i(u[e]),r(n,t))return e}var o,a=!1;o=(o=e.members.filter(function(t){return"way"===t.type})).map(function(t){var e=p[t.ref];{if(void 0!==e)return{id:t.ref,role:t.role||"outer",way:e,nodes:e.nodes.filter(function(t){return void 0!==t||(a=!0,!1)})};a=!0}}),o=r.compact(o);var u,l;u=n(o.filter(function(t){return"outer"===t.role})),l=n(o.filter(function(t){return"inner"===t.role}));var c;c=u.map(function(t){return[t]});for(var f=0;f<l.length;f++){var h=i(l[f]);void 0!==h&&c[h].push(l[f])}var d=[];if(0==(d=r.compact(c.map(function(t){var e=r.compact(t.map(function(t){if(!(t.length<4))return r.compact(t.map(function(t){return[+t.lon,+t.lat]}))}));if(0!=e.length)return e}))).length)return!1;var g="MultiPolygon";1===d.length&&(g="Polygon",d=d[0]);var m={type:"Feature",id:t.type+"/"+t.id,properties:{type:t.type,id:t.id,tags:t.tags||{},relations:y[t.type][t.id]||[],meta:s(t)},geometry:{type:g,coordinates:d}};return a&&(m.properties.tainted=!0),m}for(var l=new Object,c=0;c<t.length;c++)void 0!==t[c].lat&&(l[t[c].id]=t[c]);var f=new Object;for(c=0;c<t.length;c++)void 0!==t[c].tags&&a(t[c].tags)&&(f[t[c].id]=!0);for(c=0;c<o.length;c++)if(r.isArray(o[c].members))for(var h=0;h<o[c].members.length;h++)"node"==o[c].members[h].type&&(f[o[c].members[h].ref]=!0);var p=new Object,d=new Object;for(c=0;c<n.length;c++)if(r.isArray(n[c].nodes)){p[n[c].id]=n[c];for(h=0;h<n[c].nodes.length;h++)d[n[c].nodes[h]]=!0,n[c].nodes[h]=l[n[c].nodes[h]]}var g=new Array;for(c=0;c<t.length;c++)d[t[c].id]&&!f[t[c].id]||g.push(t[c]);var m=new Array;for(c=0;c<o.length;c++)r.isArray(o[c].members)&&(m[o[c].id]=o[c]);var y={node:{},way:{},relation:{}};for(c=0;c<o.length;c++)if(r.isArray(o[c].members))for(h=0;h<o[c].members.length;h++){var b;switch(o[c].members[h].type){case"node":b=l[o[c].members[h].ref];break;case"way":b=p[o[c].members[h].ref];break;case"relation":b=m[o[c].members[h].ref]}if(b){var v=o[c].members[h].type,w=o[c].members[h].ref;void 0===y[v][w]&&(y[v][w]=[]),y[v][w].push({role:o[c].members[h].role,rel:o[c].id,reltags:o[c].tags})}}var _,x={type:"FeatureCollection",features:new Array};for(c=0;c<g.length;c++)void 0!==g[c].lon&&void 0!==g[c].lat&&x.features.push({type:"Feature",id:"node/"+g[c].id,properties:{type:"node",id:g[c].id,tags:g[c].tags||{},relations:y.node[g[c].id]||[],meta:s(g[c])},geometry:{type:"Point",coordinates:[+g[c].lon,+g[c].lat]}});var S={type:"FeatureCollection",features:new Array},E={type:"FeatureCollection",features:new Array};for(c=0;c<o.length;c++)if(void 0!==o[c].tags&&("multipolygon"==o[c].tags.type||"boundary"==o[c].tags.type)){if(!r.isArray(o[c].members))continue;var I=0;for(h=0;h<o[c].members.length;h++)"outer"==o[c].members[h].role&&I++;if(o[c].members.forEach(function(t){p[t.ref]&&("outer"!==t.role||a(p[t.ref].tags,o[c].tags)||(p[t.ref].is_multipolygon_outline=!0),"inner"!==t.role||a(p[t.ref].tags)||(p[t.ref].is_multipolygon_outline=!0))}),0==I)continue;var L=!1;1!=I||a(o[c].tags,{type:!0})||(L=!0);var M=null;if(L){var C=o[c].members.filter(function(t){return"outer"===t.role})[0];if(void 0===(C=p[C.ref]))continue;C.is_multipolygon_outline=!0,M=u(C,o[c])}else M=u(o[c],o[c]);if(!1===M)continue;E.features.push(M)}for(c=0;c<n.length;c++)if(r.isArray(n[c].nodes)&&!n[c].is_multipolygon_outline){for(n[c].tainted=!1,n[c].hidden=!1,coords=new Array,h=0;h<n[c].nodes.length;h++)"object"==typeof n[c].nodes[h]?coords.push([+n[c].nodes[h].lon,+n[c].nodes[h].lat]):n[c].tainted=!0;if(!(coords.length<=1)){var A="LineString";void 0!==n[c].nodes[0]&&n[c].nodes[0]===n[c].nodes[n[c].nodes.length-1]&&void 0!==n[c].tags&&function(t){var n=e.polygonFeatures;if("function"==typeof n)return n(t);if("no"===t.area)return!1;for(var r in t){var i=t[r],o=n[r];if(void 0!==o&&"no"!==i){if(!0===o)return!0;if(o.included_values&&!0===o.included_values[i])return!0;if(o.excluded_values&&!0!==o.excluded_values[i])return!0}}return!1}(n[c].tags)&&(A="Polygon",coords=[coords]);M={type:"Feature",id:"way/"+n[c].id,properties:{type:"way",id:n[c].id,tags:n[c].tags||{},relations:y.way[n[c].id]||[],meta:s(n[c])},geometry:{type:A,coordinates:coords}};n[c].tainted&&(M.properties.tainted=!0),"LineString"==A?S.features.push(M):E.features.push(M)}}return _={type:"FeatureCollection",features:[]},_.features=_.features.concat(E.features),_.features=_.features.concat(S.features),_.features=_.features.concat(x.features),e.flatProperties&&_.features.forEach(function(t){t.properties=r.merge(t.properties.meta,t.properties.tags,{id:t.properties.type+"/"+t.properties.id})}),_=i(_,!0)}e=r.merge({flatProperties:!1,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:o},e);return"undefined"!=typeof XMLDocument&&t instanceof XMLDocument||"undefined"==typeof XMLDocument&&t.childNodes?function(t){function e(t,e,n){t.hasAttribute(n)&&(e[n]=t.getAttribute(n))}var i=new Array,o=new Array,a=new Array;return r.each(t.getElementsByTagName("node"),function(t,n){var o={};r.each(t.getElementsByTagName("tag"),function(t){o[t.getAttribute("k")]=t.getAttribute("v")}),i[n]={type:"node"},e(t,i[n],"id"),e(t,i[n],"lat"),e(t,i[n],"lon"),e(t,i[n],"version"),e(t,i[n],"timestamp"),e(t,i[n],"changeset"),e(t,i[n],"uid"),e(t,i[n],"user"),r.isEmpty(o)||(i[n].tags=o)}),r.each(t.getElementsByTagName("way"),function(t,n){var i={},a=[];r.each(t.getElementsByTagName("tag"),function(t){i[t.getAttribute("k")]=t.getAttribute("v")}),r.each(t.getElementsByTagName("nd"),function(t,e){a[e]=t.getAttribute("ref")}),o[n]={type:"way"},e(t,o[n],"id"),e(t,o[n],"version"),e(t,o[n],"timestamp"),e(t,o[n],"changeset"),e(t,o[n],"uid"),e(t,o[n],"user"),a.length>0&&(o[n].nodes=a),r.isEmpty(i)||(o[n].tags=i)}),r.each(t.getElementsByTagName("relation"),function(t,n){var i={},o=[];r.each(t.getElementsByTagName("tag"),function(t){i[t.getAttribute("k")]=t.getAttribute("v")}),r.each(t.getElementsByTagName("member"),function(t,n){o[n]={},e(t,o[n],"ref"),e(t,o[n],"role"),e(t,o[n],"type")}),a[n]={type:"relation"},e(t,a[n],"id"),e(t,a[n],"version"),e(t,a[n],"timestamp"),e(t,a[n],"changeset"),e(t,a[n],"uid"),e(t,a[n],"user"),o.length>0&&(a[n].members=o),r.isEmpty(i)||(a[n].tags=i)}),n(i,o,a)}(t):function(t){for(var e=new Array,i=new Array,o=new Array,a=0;a<t.elements.length;a++)switch(t.elements[a].type){case"node":var s=t.elements[a];e.push(s);break;case"way":var u=r.clone(t.elements[a]);u.nodes=r.clone(u.nodes),i.push(u);break;case"relation":var l=r.clone(t.elements[a]);l.members=r.clone(l.members),o.push(l)}return n(e,i,o)}(t)}).toGeojson=a,e.exports=a},{"./lodash.custom.js":65,"./polygon_features.json":68,"geojson-rewind":67}],65:[function(t,e,n){(function(t){(function(){function r(){return I.pop()||[]}function i(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function o(t){t.length=0,I.length<M&&I.push(t)}function a(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}function s(){}function u(t,e,n,s,l){if(n){var c=n(t);if(void 0!==c)return c}if(!v(t))return t;var f=nt.call(t);if(!D[f]||!mt.nodeClass&&i(t))return t;var h=dt[f];switch(f){case N:case z:return new h(+t);case F:case U:return new h(t);case Z:return c=h(t.source,C.exec(t)),c.lastIndex=t.lastIndex,c}var p=vt(t);if(e){var d=!s;s||(s=r()),l||(l=r());for(var g=s.length;g--;)if(s[g]==t)return l[g];c=p?h(t.length):{}}else c=p?a(t):It({},t);return p&&(at.call(t,"index")&&(c.index=t.index),at.call(t,"input")&&(c.input=t.input)),e?(s.push(t),l.push(c),(p?Et:Mt)(t,function(t,r){c[r]=u(t,e,n,s,l)}),d&&(o(s),o(l)),c):c}function l(t,e){return v(t)?ft(t):{}}function c(t,e,n){if("function"!=typeof t)return S;if(void 0===e||!("prototype"in t))return t;var r=t.__bindData__;if(void 0===r&&(mt.funcNames&&(r=!t.name),!(r=r||!mt.funcDecomp))){var i=it.call(t);mt.funcNames||(r=!A.test(i)),r||(r=P.test(i),bt(t,r))}if(!1===r||!0!==r&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return x(t,e)}function f(t){function e(){var t=c?s:this;if(i){var m=a(i);st.apply(m,arguments)}if((o||p)&&(m||(m=a(arguments)),o&&st.apply(m,o),p&&m.length<u))return r|=16,f([n,d?r:-4&r,m,null,s,u]);if(m||(m=arguments),h&&(n=t[g]),this instanceof e){t=l(n.prototype);var y=n.apply(t,m);return v(y)?y:t}return n.apply(t,m)}var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=1&r,h=2&r,p=4&r,d=8&r,g=n;return bt(e,t),e}function h(t,e,n,r,i){(vt(e)?_:Mt)(e,function(e,o){var a,s,u=e,l=t[o];if(e&&((s=vt(e))||Ct(e))){for(var c=r.length;c--;)if(a=r[c]==e){l=i[c];break}if(!a){var f;n&&(f=void 0!==(u=n(l,e)))&&(l=u),f||(l=s?vt(l)?l:[]:Ct(l)?l:{}),r.push(e),i.push(l),f||h(l,e,n,r,i)}}else n&&void 0===(u=n(l,e))&&(u=e),void 0!==u&&(l=u);t[o]=l})}function p(t,e,n,r,i,o){var s=1&e,u=4&e,c=16&e,h=32&e;if(!(2&e)&&!b(t))throw new TypeError;c&&!n.length&&(e&=-17,c=n=!1),h&&!r.length&&(e&=-33,h=r=!1);var d=t&&t.__bindData__;if(d&&!0!==d)return(d=a(d))[2]&&(d[2]=a(d[2])),d[3]&&(d[3]=a(d[3])),!s||1&d[1]||(d[4]=i),!s&&1&d[1]&&(e|=8),!u||4&d[1]||(d[5]=o),c&&st.apply(d[2]||(d[2]=[]),n),h&&lt.apply(d[3]||(d[3]=[]),r),d[1]|=e,p.apply(null,d);return(1==e||17===e?function(t){function e(){if(r){var t=a(r);st.apply(t,arguments)}if(this instanceof e){var o=l(n.prototype),s=n.apply(o,t||arguments);return v(s)?s:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return bt(e,t),e}:f)([t,e,n,r,i,o])}function d(){J.shadowedProps=j,J.array=J.bottom=J.loop=J.top="",J.init="iterable",J.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)J[n]=t[n];var r=J.args;J.firstArg=/^[^,]+/.exec(r)[0];return Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+yt(J)+"\n}")(c,B,Q,at,L,y,vt,w,J.keys,tt,H,gt,U,et,nt)}function g(t){return"function"==typeof t&&rt.test(t)}function m(t){var e,n;return!(!(t&&nt.call(t)==G&&(e=t.constructor,!b(e)||e instanceof e))||!mt.argsClass&&y(t)||!mt.nodeClass&&i(t))&&(mt.ownLast?(Lt(t,function(t,e,r){return n=at.call(r,e),!1}),!1!==n):(Lt(t,function(t,e){n=e}),void 0===n||at.call(t,n)))}function y(t){return t&&"object"==typeof t&&"number"==typeof t.length&&nt.call(t)==O||!1}function b(t){return"function"==typeof t}function v(t){return!(!t||!H[typeof t])}function w(t){return"string"==typeof t||t&&"object"==typeof t&&nt.call(t)==U||!1}function _(t,e,n){if(e&&void 0===n&&vt(t))for(var r=-1,i=t.length;++r<i&&!1!==e(t[r],r,t););else Et(t,e,n);return t}function x(t,e){return arguments.length>2?p(t,17,a(arguments,2),null,e):p(t,1,null,null,e)}function S(t){return t}function E(){}var I=[],L={},M=40,C=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,P=/\bthis\b/,j=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],O="[object Arguments]",T="[object Array]",N="[object Boolean]",z="[object Date]",B="[object Error]",R="[object Function]",F="[object Number]",G="[object Object]",Z="[object RegExp]",U="[object String]",D={};D[R]=!1,D[O]=D[T]=D[N]=D[z]=D[F]=D[G]=D[Z]=D[U]=!0;var W={configurable:!1,enumerable:!1,value:null,writable:!1},J={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},H={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},V=H[typeof window]&&window||this,q=H[typeof n]&&n&&!n.nodeType&&n,Y=H[typeof e]&&e&&!e.nodeType&&e,X=Y&&Y.exports===q&&q,$=H[typeof t]&&t;!$||$.global!==$&&$.window!==$||(V=$);var K=[],Q=Error.prototype,tt=Object.prototype,et=String.prototype,nt=tt.toString,rt=RegExp("^"+String(nt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),it=Function.prototype.toString,ot=g(ot=Object.getPrototypeOf)&&ot,at=tt.hasOwnProperty,st=K.push,ut=tt.propertyIsEnumerable,lt=K.unshift,ct=function(){try{var t={},e=g(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),ft=g(ft=Object.create)&&ft,ht=g(ht=Array.isArray)&&ht,pt=g(pt=Object.keys)&&pt,dt={};dt[T]=Array,dt[N]=Boolean,dt[z]=Date,dt[R]=Function,dt[G]=Object,dt[F]=Number,dt[Z]=RegExp,dt[U]=String;var gt={};gt[T]=gt[z]=gt[F]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},gt[N]=gt[U]={constructor:!0,toString:!0,valueOf:!0},gt[B]=gt[R]=gt[Z]={constructor:!0,toString:!0},gt[G]={constructor:!0},function(){for(var t=j.length;t--;){var e=j[t];for(var n in gt)at.call(gt,n)&&!at.call(gt[n],e)&&(gt[n][e]=!1)}}();var mt=s.support={};!function(){var t=function(){this.x=1},e={0:1,length:1},n=[];t.prototype={valueOf:1,y:1};for(var r in new t)n.push(r);for(r in arguments);mt.argsClass=nt.call(arguments)==O,mt.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),mt.enumErrorProps=ut.call(Q,"message")||ut.call(Q,"name"),mt.enumPrototypes=ut.call(t,"prototype"),mt.funcDecomp=!g(V.WinRTError)&&P.test(function(){return this}),mt.funcNames="string"==typeof Function.name,mt.nonEnumArgs=0!=r,mt.nonEnumShadows=!/valueOf/.test(n),mt.ownLast="x"!=n[0],mt.spliceObjects=(K.splice.call(e,0,1),!e[0]),mt.unindexedChars="x"[0]+Object("x")[0]!="xx";try{mt.nodeClass=!(nt.call(document)==G&&!({toString:0}+""))}catch(t){mt.nodeClass=!0}}(1);var yt=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",mt.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):mt.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),mt.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),mt.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(mt.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),mt.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }    ",mt.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||mt.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};ft||(l=function(){function t(){}return function(e){if(v(e)){t.prototype=e;var n=new t;t.prototype=null}return n||V.Object()}}());var bt=ct?function(t,e){W.value=e,ct(t,"__bindData__",W)}:E;mt.argsClass||(y=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&at.call(t,"callee")&&!ut.call(t,"callee")||!1});var vt=ht||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&nt.call(t)==T||!1},wt=d({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),_t=pt?function(t){return v(t)?mt.enumPrototypes&&"function"==typeof t||mt.nonEnumArgs&&t.length&&y(t)?wt(t):pt(t):[]}:wt,xt={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:_t,loop:"if (callback(iterable[index], index, collection) === false) return result"},kt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:_t,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},St={top:"if (!objectTypes[typeof iterable]) return result;\n"+xt.top,array:!1},Et=d(xt),It=d(kt,{top:kt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Lt=d(xt,St,{useHas:!1}),Mt=d(xt,St);b(/x/)&&(b=function(t){return"function"==typeof t&&nt.call(t)==R});var Ct=ot?function(t){if(!t||nt.call(t)!=G||!mt.argsClass&&y(t))return!1;var e=t.valueOf,n=g(e)&&(n=ot(e))&&ot(n);return n?t==n||ot(t)==n:m(t)}:m;s.assign=It,s.bind=x,s.compact=function(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r},s.forEach=_,s.forIn=Lt,s.forOwn=Mt,s.keys=_t,s.merge=function(t){var e=arguments,n=2;if(!v(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var i=c(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(i=e[--n]);for(var s=a(arguments,1,n),u=-1,l=r(),f=r();++u<n;)h(t,s[u],i,l,f);return o(l),o(f),t},s.each=_,s.extend=It,s.clone=function(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),u(t,e,"function"==typeof n&&c(n,r,1))},s.identity=S,s.isArguments=y,s.isArray=vt,s.isEmpty=function(t){var e=!0;if(!t)return e;var n=nt.call(t),r=t.length;return n==T||n==U||(mt.argsClass?n==O:y(t))||n==G&&"number"==typeof r&&b(t.splice)?!r:(Mt(t,function(){return e=!1}),e)},s.isFunction=b,s.isObject=v,s.isPlainObject=Ct,s.isString=w,s.noop=E,s.VERSION="2.4.1",q&&Y&&X&&((Y.exports=s)._=s)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],66:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30,wgs84:144}],67:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(i(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return function(t,e){"Polygon"===t.type?t.coordinates=o(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(o,e)));return t}(t,e);default:return t}}function i(t,e){return function(n){return t(n,e)}}function o(t,e){e=!!e,t[0]=a(t[0],!e);for(var n=1;n<t.length;n++)t[n]=a(t[n],e);return t}function a(t,e){return function(t){return s.ring(t)>=0}(t)===e?t:t.reverse()}var s=t("geojson-area");e.exports=r},{"geojson-area":66}],68:[function(t,e,n){e.exports={building:!0,highway:{included_values:{services:!0,rest_area:!0,escape:!0}},natural:{excluded_values:{coastline:!0,ridge:!0,arete:!0,tree_row:!0}},landuse:!0,waterway:{included_values:{riverbank:!0,dock:!0,boatyard:!0,dam:!0}},amenity:!0,leisure:!0,barrier:{included_values:{city_wall:!0,ditch:!0,hedge:!0,retaining_wall:!0,wall:!0,spikes:!0}},railway:{included_values:{station:!0,turntable:!0,roundhouse:!0,platform:!0}},area:!0,boundary:!0,man_made:{excluded_values:{cutline:!0,embankment:!0,pipeline:!0}},power:{included_values:{generator:!0,station:!0,sub_station:!0,transformer:!0}},place:!0,shop:!0,aeroway:{excluded_values:{taxiway:!0}},tourism:!0,historic:!0,public_transport:!0,office:!0,"building:part":!0,military:!0,ruins:!0,"area:highway":!0,craft:!0}},{}],69:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":70,"./lib/inflate":71,"./lib/utils/common":72,"./lib/zlib/constants":75}],70:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=a.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==f)throw new Error(u[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=o.deflateSetDictionary(this.strm,i))!==f)throw new Error(u[n]);this._dict_set=!0}}function i(t,e){var n=new r(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var o=t("./zlib/deflate"),a=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),c=Object.prototype.toString,f=0,h=-1,p=0,d=8;r.prototype.push=function(t,e){var n,r,i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=s.string2buf(t):"[object ArrayBuffer]"===c.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(u),i.next_out=0,i.avail_out=u),1!==(n=o.deflate(i,r))&&n!==f)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f):2!==r||(this.onEnd(f),i.avail_out=0,!0)},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=r,n.deflate=i,n.deflateRaw=function(t,e){return e=e||{},e.raw=!0,i(t,e)},n.gzip=function(t,e){return e=e||{},e.gzip=!0,i(t,e)}},{"./utils/common":72,"./utils/strings":73,"./zlib/deflate":77,"./zlib/messages":82,"./zlib/zstream":84}],71:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(l[n]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function i(t,e){var n=new r(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var o=t("./zlib/inflate"),a=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString;r.prototype.push=function(t,e){var n,r,i,l,c,f,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?p.input=s.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(d),p.next_out=0,p.avail_out=d),(n=o.inflate(p,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&g&&(f="string"==typeof g?s.string2buf(g):"[object ArrayBuffer]"===h.call(g)?new Uint8Array(g):g,n=o.inflateSetDictionary(this.strm,f)),n===u.Z_BUF_ERROR&&!0===m&&(n=u.Z_OK,m=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==u.Z_STREAM_END&&(0!==p.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=s.utf8border(p.output,p.next_out),l=p.next_out-i,c=s.buf2string(p.output,i),p.next_out=l,p.avail_out=d-l,l&&a.arraySet(p.output,p.output,i,l,0),this.onData(c)):this.onData(a.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),p.avail_out=0,!0)},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=r,n.inflate=i,n.inflateRaw=function(t,e){return e=e||{},e.raw=!0,i(t,e)},n.ungzip=i},{"./utils/common":72,"./utils/strings":73,"./zlib/constants":75,"./zlib/gzheader":78,"./zlib/inflate":80,"./zlib/messages":82,"./zlib/zstream":84}],72:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],73:[function(t,e,n){"use strict";function r(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}var i=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new i.Buf8(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,n.string2buf=function(t){var e,n,r,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},n.buf2binstring=function(t){return r(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,o,a,u=e||t.length,l=new Array(2*u);for(i=0,n=0;n<u;)if((o=t[n++])<128)l[i++]=o;else if((a=s[o])>4)l[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<u;)o=o<<6|63&t[n++],a--;a>1?l[i++]=65533:o<65536?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+s[t[n]]>e?n:e}},{"./common":72}],74:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],75:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],76:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],77:[function(t,e,n){"use strict";function r(t,e){return t.msg=S[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(w.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){_._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,w.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=x(t.adler,e,i,n):2===t.state.wrap&&(t.adler=k(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-Q?t.strstart-(t.w_size-Q):0,l=t.window,c=t.w_mask,f=t.prev,h=t.strstart+K,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,l[n+a]===d&&l[n+a-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=K-(h-o),o=h-K,r>a){if(t.match_start=e,a=r,r>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=f[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function h(t){var e,n,r,i,o,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-Q)){w.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=a?r-a:0}while(--n);e=n=a;do{r=t.prev[--e],t.prev[e]=r>=a?r-a:0}while(--n);i+=a}if(0===t.strm.avail_in)break;if(n=c(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=$)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+$-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<$)););}while(t.lookahead<Q&&0!==t.strm.avail_in)}function p(t,e){for(var n,r;;){if(t.lookahead<Q){if(h(t),t.lookahead<Q&&e===E)return ut;if(0===t.lookahead)break}if(n=0,t.lookahead>=$&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Q&&(t.match_length=f(t,n)),t.match_length>=$)if(r=_._tr_tally(t,t.strstart-t.match_start,t.match_length-$),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=$){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=_._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(s(t,!1),0===t.strm.avail_out))return ut}return t.insert=t.strstart<$-1?t.strstart:$-1,e===M?(s(t,!0),0===t.strm.avail_out?ct:ft):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ut:lt}function d(t,e){for(var n,r,i;;){if(t.lookahead<Q){if(h(t),t.lookahead<Q&&e===E)return ut;if(0===t.lookahead)break}if(n=0,t.lookahead>=$&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=$-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Q&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===z||t.match_length===$&&t.strstart-t.match_start>4096)&&(t.match_length=$-1)),t.prev_length>=$&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-$,r=_._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-$),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=$-1,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return ut}else if(t.match_available){if((r=_._tr_tally(t,0,t.window[t.strstart-1]))&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return ut}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=_._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<$-1?t.strstart:$-1,e===M?(s(t,!0),0===t.strm.avail_out?ct:ft):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ut:lt}function g(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function m(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?et:at,t.adler=2===e.wrap?0:1,e.last_flush=E,_._tr_init(e),A):r(t,j)}function y(t){var e=m(t);return e===A&&function(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=v[t.level].max_lazy,t.good_match=v[t.level].good_length,t.nice_match=v[t.level].nice_length,t.max_chain_length=v[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=$-1,t.match_available=0,t.ins_h=0}(t.state),e}function b(t,e,n,i,a,s){if(!t)return j;var u=1;if(e===N&&(e=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>D||n!==U||i<8||i>15||e<0||e>9||s<0||s>F)return r(t,j);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*Y),this.dyn_dtree=new w.Buf16(2*(2*V+1)),this.bl_tree=new w.Buf16(2*(2*q+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(X+1),this.heap=new w.Buf16(2*H+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*H+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=u,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+$-1)/$),l.window=new w.Buf8(2*l.w_size),l.head=new w.Buf16(l.hash_size),l.prev=new w.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new w.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,y(t)}var v,w=t("../utils/common"),_=t("./trees"),x=t("./adler32"),k=t("./crc32"),S=t("./messages"),E=0,I=1,L=3,M=4,C=5,A=0,P=1,j=-2,O=-3,T=-5,N=-1,z=1,B=2,R=3,F=4,G=0,Z=2,U=8,D=9,W=15,J=8,H=286,V=30,q=19,Y=2*H+1,X=15,$=3,K=258,Q=K+$+1,tt=32,et=42,nt=69,rt=73,it=91,ot=103,at=113,st=666,ut=1,lt=2,ct=3,ft=4,ht=3;v=[new g(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===E)return ut;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,s(t,!1),0===t.strm.avail_out))return ut;if(t.strstart-t.block_start>=t.w_size-Q&&(s(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===M?(s(t,!0),0===t.strm.avail_out?ct:ft):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),ut)}),new g(4,4,8,4,p),new g(4,5,16,8,p),new g(4,6,32,32,p),new g(4,4,16,16,d),new g(8,16,32,32,d),new g(8,16,128,128,d),new g(8,32,128,256,d),new g(32,128,258,1024,d),new g(32,258,258,4096,d)],n.deflateInit=function(t,e){return b(t,e,U,W,J,G)},n.deflateInit2=b,n.deflateReset=y,n.deflateResetKeep=m,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?j:(t.state.gzhead=e,A):j},n.deflate=function(t,e){var n,c,f,p;if(!t||!t.state||e>C||e<0)return t?r(t,j):j;if(c=t.state,!t.output||!t.input&&0!==t.avail_in||c.status===st&&e!==M)return r(t,0===t.avail_out?T:j);if(c.strm=t,n=c.last_flush,c.last_flush=e,c.status===et)if(2===c.wrap)t.adler=0,u(c,31),u(c,139),u(c,8),c.gzhead?(u(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),u(c,255&c.gzhead.time),u(c,c.gzhead.time>>8&255),u(c,c.gzhead.time>>16&255),u(c,c.gzhead.time>>24&255),u(c,9===c.level?2:c.strategy>=B||c.level<2?4:0),u(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(u(c,255&c.gzhead.extra.length),u(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=k(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=nt):(u(c,0),u(c,0),u(c,0),u(c,0),u(c,0),u(c,9===c.level?2:c.strategy>=B||c.level<2?4:0),u(c,ht),c.status=at);else{var d=U+(c.w_bits-8<<4)<<8;d|=(c.strategy>=B||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(d|=tt),d+=31-d%31,c.status=at,l(c,d),0!==c.strstart&&(l(c,t.adler>>>16),l(c,65535&t.adler)),t.adler=1}if(c.status===nt)if(c.gzhead.extra){for(f=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),a(t),f=c.pending,c.pending!==c.pending_buf_size));)u(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=rt)}else c.status=rt;if(c.status===rt)if(c.gzhead.name){f=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),a(t),f=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,u(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),0===p&&(c.gzindex=0,c.status=it)}else c.status=it;if(c.status===it)if(c.gzhead.comment){f=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),a(t),f=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,u(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>f&&(t.adler=k(t.adler,c.pending_buf,c.pending-f,f)),0===p&&(c.status=ot)}else c.status=ot;if(c.status===ot&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&a(t),c.pending+2<=c.pending_buf_size&&(u(c,255&t.adler),u(c,t.adler>>8&255),t.adler=0,c.status=at)):c.status=at),0!==c.pending){if(a(t),0===t.avail_out)return c.last_flush=-1,A}else if(0===t.avail_in&&i(e)<=i(n)&&e!==M)return r(t,T);if(c.status===st&&0!==t.avail_in)return r(t,T);if(0!==t.avail_in||0!==c.lookahead||e!==E&&c.status!==st){var g=c.strategy===B?function(t,e){for(var n;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===E)return ut;break}if(t.match_length=0,n=_._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===M?(s(t,!0),0===t.strm.avail_out?ct:ft):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ut:lt}(c,e):c.strategy===R?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=K){if(h(t),t.lookahead<=K&&e===E)return ut;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=$&&t.strstart>0&&(i=t.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=t.strstart+K;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=K-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=$?(n=_._tr_tally(t,1,t.match_length-$),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=_._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return ut}return t.insert=0,e===M?(s(t,!0),0===t.strm.avail_out?ct:ft):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ut:lt}(c,e):v[c.level].func(c,e);if(g!==ct&&g!==ft||(c.status=st),g===ut||g===ct)return 0===t.avail_out&&(c.last_flush=-1),A;if(g===lt&&(e===I?_._tr_align(c):e!==C&&(_._tr_stored_block(c,0,0,!1),e===L&&(o(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),a(t),0===t.avail_out))return c.last_flush=-1,A}return e!==M?A:c.wrap<=0?P:(2===c.wrap?(u(c,255&t.adler),u(c,t.adler>>8&255),u(c,t.adler>>16&255),u(c,t.adler>>24&255),u(c,255&t.total_in),u(c,t.total_in>>8&255),u(c,t.total_in>>16&255),u(c,t.total_in>>24&255)):(l(c,t.adler>>>16),l(c,65535&t.adler)),a(t),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?A:P)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==et&&e!==nt&&e!==rt&&e!==it&&e!==ot&&e!==at&&e!==st?r(t,j):(t.state=null,e===at?r(t,O):A):j},n.deflateSetDictionary=function(t,e){var n,r,i,a,s,u,l,c,f=e.length;if(!t||!t.state)return j;if(n=t.state,2===(a=n.wrap)||1===a&&n.status!==et||n.lookahead)return j;for(1===a&&(t.adler=x(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new w.Buf8(n.w_size),w.arraySet(c,e,f-n.w_size,n.w_size,0),e=c,f=n.w_size),s=t.avail_in,u=t.next_in,l=t.input,t.avail_in=f,t.next_in=0,t.input=e,h(n);n.lookahead>=$;){r=n.strstart,i=n.lookahead-($-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+$-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=$-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=$-1,n.match_available=0,t.next_in=u,t.input=l,t.avail_in=s,n.wrap=a,A},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":72,"./adler32":74,"./crc32":76,"./messages":82,"./trees":83}],78:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],79:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,a,s,u,l,c,f,h,p,d,g,m,y,b,v,w,_,x,k,S,E,I;n=t.state,r=t.next_in,E=t.input,i=r+(t.avail_in-5),o=t.next_out,I=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,p=n.hold,d=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),v=g[p&y];e:for(;;){if(w=v>>>24,p>>>=w,d-=w,0===(w=v>>>16&255))I[o++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=g[(65535&v)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&v,(w&=15)&&(d<w&&(p+=E[r++]<<d,d+=8),_+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),v=m[p&b];n:for(;;){if(w=v>>>24,p>>>=w,d-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=m[(65535&v)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,w&=15,d<w&&(p+=E[r++]<<d,(d+=8)<w&&(p+=E[r++]<<d,d+=8)),(x+=p&(1<<w)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,d-=w,w=o-a,x>w){if((w=x-w)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,S=h,0===f){if(k+=l-w,w<_){_-=w;do{I[o++]=h[k++]}while(--w);k=o-x,S=I}}else if(f<w){if(k+=l+f-w,(w-=f)<_){_-=w;do{I[o++]=h[k++]}while(--w);if(k=0,f<_){_-=w=f;do{I[o++]=h[k++]}while(--w);k=o-x,S=I}}}else if(k+=f-w,w<_){_-=w;do{I[o++]=h[k++]}while(--w);k=o-x,S=I}for(;_>2;)I[o++]=S[k++],I[o++]=S[k++],I[o++]=S[k++],_-=3;_&&(I[o++]=S[k++],_>1&&(I[o++]=S[k++]))}else{k=o-x;do{I[o++]=I[k++],I[o++]=I[k++],I[o++]=I[k++],_-=3}while(_>2);_&&(I[o++]=I[k++],_>1&&(I[o++]=I[k++]))}break}}break}}while(r<i&&o<s);r-=_=d>>3,p&=(1<<(d-=_<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},{}],80:[function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new h.Buf32(lt),e.distcode=e.distdyn=new h.Buf32(ct),e.sane=1,e.back=-1,k):I}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,i(t)):I}function a(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?I:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,o(t))):I}function s(t,e){var n,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(n=a(t,e))!==k&&(t.state=null),n):I}function u(t){if(ht){var e;for(c=new h.Buf32(512),f=new h.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(m(b,t.lens,0,288,c,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;m(v,t.lens,0,32,f,0,t.work,{bits:5}),ht=!1}t.lencode=c,t.lenbits=9,t.distcode=f,t.distbits=5}function l(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new h.Buf8(o.wsize)),r>=o.wsize?(h.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),h.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(h.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var c,f,h=t("../utils/common"),p=t("./adler32"),d=t("./crc32"),g=t("./inffast"),m=t("./inftrees"),y=0,b=1,v=2,w=4,_=5,x=6,k=0,S=1,E=2,I=-2,L=-3,M=-4,C=-5,A=8,P=1,j=2,O=3,T=4,N=5,z=6,B=7,R=8,F=9,G=10,Z=11,U=12,D=13,W=14,J=15,H=16,V=17,q=18,Y=19,X=20,$=21,K=22,Q=23,tt=24,et=25,nt=26,rt=27,it=28,ot=29,at=30,st=31,ut=32,lt=852,ct=592,ft=15,ht=!0;n.inflateReset=o,n.inflateReset2=a,n.inflateResetKeep=i,n.inflateInit=function(t){return s(t,ft)},n.inflateInit2=s,n.inflate=function(t,e){var n,i,o,a,s,c,f,lt,ct,ft,ht,pt,dt,gt,mt,yt,bt,vt,wt,_t,xt,kt,St,Et,It=0,Lt=new h.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return I;(n=t.state).mode===U&&(n.mode=D),s=t.next_out,o=t.output,f=t.avail_out,a=t.next_in,i=t.input,c=t.avail_in,lt=n.hold,ct=n.bits,ft=c,ht=f,kt=k;t:for(;;)switch(n.mode){case P:if(0===n.wrap){n.mode=D;break}for(;ct<16;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(2&n.wrap&&35615===lt){n.check=0,Lt[0]=255&lt,Lt[1]=lt>>>8&255,n.check=d(n.check,Lt,2,0),lt=0,ct=0,n.mode=j;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&lt)<<8)+(lt>>8))%31){t.msg="incorrect header check",n.mode=at;break}if((15&lt)!==A){t.msg="unknown compression method",n.mode=at;break}if(lt>>>=4,ct-=4,xt=8+(15&lt),0===n.wbits)n.wbits=xt;else if(xt>n.wbits){t.msg="invalid window size",n.mode=at;break}n.dmax=1<<xt,t.adler=n.check=1,n.mode=512&lt?G:U,lt=0,ct=0;break;case j:for(;ct<16;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(n.flags=lt,(255&n.flags)!==A){t.msg="unknown compression method",n.mode=at;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=at;break}n.head&&(n.head.text=lt>>8&1),512&n.flags&&(Lt[0]=255&lt,Lt[1]=lt>>>8&255,n.check=d(n.check,Lt,2,0)),lt=0,ct=0,n.mode=O;case O:for(;ct<32;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.head&&(n.head.time=lt),512&n.flags&&(Lt[0]=255&lt,Lt[1]=lt>>>8&255,Lt[2]=lt>>>16&255,Lt[3]=lt>>>24&255,n.check=d(n.check,Lt,4,0)),lt=0,ct=0,n.mode=T;case T:for(;ct<16;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.head&&(n.head.xflags=255&lt,n.head.os=lt>>8),512&n.flags&&(Lt[0]=255&lt,Lt[1]=lt>>>8&255,n.check=d(n.check,Lt,2,0)),lt=0,ct=0,n.mode=N;case N:if(1024&n.flags){for(;ct<16;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.length=lt,n.head&&(n.head.extra_len=lt),512&n.flags&&(Lt[0]=255&lt,Lt[1]=lt>>>8&255,n.check=d(n.check,Lt,2,0)),lt=0,ct=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags&&((pt=n.length)>c&&(pt=c),pt&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),h.arraySet(n.head.extra,i,a,pt,xt)),512&n.flags&&(n.check=d(n.check,i,pt,a)),c-=pt,a+=pt,n.length-=pt),n.length))break t;n.length=0,n.mode=B;case B:if(2048&n.flags){if(0===c)break t;pt=0;do{xt=i[a+pt++],n.head&&xt&&n.length<65536&&(n.head.name+=String.fromCharCode(xt))}while(xt&&pt<c);if(512&n.flags&&(n.check=d(n.check,i,pt,a)),c-=pt,a+=pt,xt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=R;case R:if(4096&n.flags){if(0===c)break t;pt=0;do{xt=i[a+pt++],n.head&&xt&&n.length<65536&&(n.head.comment+=String.fromCharCode(xt))}while(xt&&pt<c);if(512&n.flags&&(n.check=d(n.check,i,pt,a)),c-=pt,a+=pt,xt)break t}else n.head&&(n.head.comment=null);n.mode=F;case F:if(512&n.flags){for(;ct<16;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(lt!==(65535&n.check)){t.msg="header crc mismatch",n.mode=at;break}lt=0,ct=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=U;break;case G:for(;ct<32;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}t.adler=n.check=r(lt),lt=0,ct=0,n.mode=Z;case Z:if(0===n.havedict)return t.next_out=s,t.avail_out=f,t.next_in=a,t.avail_in=c,n.hold=lt,n.bits=ct,E;t.adler=n.check=1,n.mode=U;case U:if(e===_||e===x)break t;case D:if(n.last){lt>>>=7&ct,ct-=7&ct,n.mode=rt;break}for(;ct<3;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}switch(n.last=1&lt,lt>>>=1,ct-=1,3&lt){case 0:n.mode=W;break;case 1:if(u(n),n.mode=X,e===x){lt>>>=2,ct-=2;break t}break;case 2:n.mode=V;break;case 3:t.msg="invalid block type",n.mode=at}lt>>>=2,ct-=2;break;case W:for(lt>>>=7&ct,ct-=7&ct;ct<32;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if((65535&lt)!=(lt>>>16^65535)){t.msg="invalid stored block lengths",n.mode=at;break}if(n.length=65535&lt,lt=0,ct=0,n.mode=J,e===x)break t;case J:n.mode=H;case H:if(pt=n.length){if(pt>c&&(pt=c),pt>f&&(pt=f),0===pt)break t;h.arraySet(o,i,a,pt,s),c-=pt,a+=pt,f-=pt,s+=pt,n.length-=pt;break}n.mode=U;break;case V:for(;ct<14;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(n.nlen=257+(31&lt),lt>>>=5,ct-=5,n.ndist=1+(31&lt),lt>>>=5,ct-=5,n.ncode=4+(15&lt),lt>>>=4,ct-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=at;break}n.have=0,n.mode=q;case q:for(;n.have<n.ncode;){for(;ct<3;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.lens[Mt[n.have++]]=7&lt,lt>>>=3,ct-=3}for(;n.have<19;)n.lens[Mt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},kt=m(y,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,kt){t.msg="invalid code lengths set",n.mode=at;break}n.have=0,n.mode=Y;case Y:for(;n.have<n.nlen+n.ndist;){for(;It=n.lencode[lt&(1<<n.lenbits)-1],mt=It>>>24,yt=It>>>16&255,bt=65535&It,!(mt<=ct);){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(bt<16)lt>>>=mt,ct-=mt,n.lens[n.have++]=bt;else{if(16===bt){for(Et=mt+2;ct<Et;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(lt>>>=mt,ct-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=at;break}xt=n.lens[n.have-1],pt=3+(3&lt),lt>>>=2,ct-=2}else if(17===bt){for(Et=mt+3;ct<Et;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}ct-=mt,xt=0,pt=3+(7&(lt>>>=mt)),lt>>>=3,ct-=3}else{for(Et=mt+7;ct<Et;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}ct-=mt,xt=0,pt=11+(127&(lt>>>=mt)),lt>>>=7,ct-=7}if(n.have+pt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=at;break}for(;pt--;)n.lens[n.have++]=xt}}if(n.mode===at)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=at;break}if(n.lenbits=9,St={bits:n.lenbits},kt=m(b,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,kt){t.msg="invalid literal/lengths set",n.mode=at;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},kt=m(v,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,kt){t.msg="invalid distances set",n.mode=at;break}if(n.mode=X,e===x)break t;case X:n.mode=$;case $:if(c>=6&&f>=258){t.next_out=s,t.avail_out=f,t.next_in=a,t.avail_in=c,n.hold=lt,n.bits=ct,g(t,ht),s=t.next_out,o=t.output,f=t.avail_out,a=t.next_in,i=t.input,c=t.avail_in,lt=n.hold,ct=n.bits,n.mode===U&&(n.back=-1);break}for(n.back=0;It=n.lencode[lt&(1<<n.lenbits)-1],mt=It>>>24,yt=It>>>16&255,bt=65535&It,!(mt<=ct);){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(yt&&0==(240&yt)){for(vt=mt,wt=yt,_t=bt;It=n.lencode[_t+((lt&(1<<vt+wt)-1)>>vt)],mt=It>>>24,yt=It>>>16&255,bt=65535&It,!(vt+mt<=ct);){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}lt>>>=vt,ct-=vt,n.back+=vt}if(lt>>>=mt,ct-=mt,n.back+=mt,n.length=bt,0===yt){n.mode=nt;break}if(32&yt){n.back=-1,n.mode=U;break}if(64&yt){t.msg="invalid literal/length code",n.mode=at;break}n.extra=15&yt,n.mode=K;case K:if(n.extra){for(Et=n.extra;ct<Et;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.length+=lt&(1<<n.extra)-1,lt>>>=n.extra,ct-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Q;case Q:for(;It=n.distcode[lt&(1<<n.distbits)-1],mt=It>>>24,yt=It>>>16&255,bt=65535&It,!(mt<=ct);){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(0==(240&yt)){for(vt=mt,wt=yt,_t=bt;It=n.distcode[_t+((lt&(1<<vt+wt)-1)>>vt)],mt=It>>>24,yt=It>>>16&255,bt=65535&It,!(vt+mt<=ct);){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}lt>>>=vt,ct-=vt,n.back+=vt}if(lt>>>=mt,ct-=mt,n.back+=mt,64&yt){t.msg="invalid distance code",n.mode=at;break}n.offset=bt,n.extra=15&yt,n.mode=tt;case tt:if(n.extra){for(Et=n.extra;ct<Et;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}n.offset+=lt&(1<<n.extra)-1,lt>>>=n.extra,ct-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=at;break}n.mode=et;case et:if(0===f)break t;if(pt=ht-f,n.offset>pt){if((pt=n.offset-pt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=at;break}pt>n.wnext?(pt-=n.wnext,dt=n.wsize-pt):dt=n.wnext-pt,pt>n.length&&(pt=n.length),gt=n.window}else gt=o,dt=s-n.offset,pt=n.length;pt>f&&(pt=f),f-=pt,n.length-=pt;do{o[s++]=gt[dt++]}while(--pt);0===n.length&&(n.mode=$);break;case nt:if(0===f)break t;o[s++]=n.length,f--,n.mode=$;break;case rt:if(n.wrap){for(;ct<32;){if(0===c)break t;c--,lt|=i[a++]<<ct,ct+=8}if(ht-=f,t.total_out+=ht,n.total+=ht,ht&&(t.adler=n.check=n.flags?d(n.check,o,ht,s-ht):p(n.check,o,ht,s-ht)),ht=f,(n.flags?lt:r(lt))!==n.check){t.msg="incorrect data check",n.mode=at;break}lt=0,ct=0}n.mode=it;case it:if(n.wrap&&n.flags){for(;ct<32;){if(0===c)break t;c--,lt+=i[a++]<<ct,ct+=8}if(lt!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=at;break}lt=0,ct=0}n.mode=ot;case ot:kt=S;break t;case at:kt=L;break t;case st:return M;case ut:default:return I}return t.next_out=s,t.avail_out=f,t.next_in=a,t.avail_in=c,n.hold=lt,n.bits=ct,(n.wsize||ht!==t.avail_out&&n.mode<at&&(n.mode<rt||e!==w))&&l(t,t.output,t.next_out,ht-t.avail_out)?(n.mode=st,M):(ft-=t.avail_in,ht-=t.avail_out,t.total_in+=ft,t.total_out+=ht,n.total+=ht,n.wrap&&ht&&(t.adler=n.check=n.flags?d(n.check,o,ht,t.next_out-ht):p(n.check,o,ht,t.next_out-ht)),t.data_type=n.bits+(n.last?64:0)+(n.mode===U?128:0)+(n.mode===X||n.mode===J?256:0),(0===ft&&0===ht||e===w)&&kt===k&&(kt=C),kt)},n.inflateEnd=function(t){if(!t||!t.state)return I;var e=t.state;return e.window&&(e.window=null),t.state=null,k},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?I:(n.head=e,e.done=!1,k):I},n.inflateSetDictionary=function(t,e){var n,r,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==Z?I:n.mode===Z&&(r=1,(r=p(r,e,i,0))!==n.check)?L:l(t,e,i,i)?(n.mode=st,M):(n.havedict=1,k):I},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":72,"./adler32":74,"./crc32":76,"./inffast":79,"./inftrees":81}],81:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,u,l,c,f,h){var p,d,g,m,y,b,v,w,_,x=h.bits,k=0,S=0,E=0,I=0,L=0,M=0,C=0,A=0,P=0,j=0,O=null,T=0,N=new r.Buf16(16),z=new r.Buf16(16),B=null,R=0;for(k=0;k<=15;k++)N[k]=0;for(S=0;S<u;S++)N[e[n+S]]++;for(L=x,I=15;I>=1&&0===N[I];I--);if(L>I&&(L=I),0===I)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(E=1;E<I&&0===N[E];E++);for(L<E&&(L=E),A=1,k=1;k<=15;k++)if(A<<=1,(A-=N[k])<0)return-1;if(A>0&&(0===t||1!==I))return-1;for(z[1]=0,k=1;k<15;k++)z[k+1]=z[k]+N[k];for(S=0;S<u;S++)0!==e[n+S]&&(f[z[e[n+S]]++]=S);if(0===t?(O=B=f,b=19):1===t?(O=i,T-=257,B=o,R-=257,b=256):(O=a,B=s,b=-1),j=0,S=0,k=E,y=c,M=L,C=0,g=-1,P=1<<L,m=P-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){0,v=k-C,f[S]<b?(w=0,_=f[S]):f[S]>b?(w=B[R+f[S]],_=O[T+f[S]]):(w=96,_=0),p=1<<k-C,E=d=1<<M;do{l[y+(j>>C)+(d-=p)]=v<<24|w<<16|_|0}while(0!==d);for(p=1<<k-1;j&p;)p>>=1;if(0!==p?(j&=p-1,j+=p):j=0,S++,0==--N[k]){if(k===I)break;k=e[n+f[S]]}if(k>L&&(j&m)!==g){for(0===C&&(C=L),y+=E,A=1<<(M=k-C);M+C<I&&!((A-=N[M+C])<=0);)M++,A<<=1;if(P+=1<<M,1===t&&P>852||2===t&&P>592)return 1;l[g=j&m]=L<<24|M<<16|y-c|0}}return 0!==j&&(l[y+j]=k-C<<24|64<<16|0),h.bits=L,0}},{"../utils/common":72}],82:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],83:[function(t,e,n){"use strict";function r(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?q[t]:q[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,n){t.bi_valid>z-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>z-t.bi_valid,t.bi_valid+=n-z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function l(t,e,n){u(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function f(t,e,n){var r,i,o=new Array(N+1),a=0;for(r=1;r<=N;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=c(o[s]++,s))}}function h(t){var e;for(e=0;e<P;e++)t.dyn_ltree[2*e]=0;for(e=0;e<j;e++)t.dyn_dtree[2*e]=0;for(e=0;e<O;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*R]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function d(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function g(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&d(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!d(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function m(t,e,n){var r,i,o,s,c=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===r?l(t,i,e):(l(t,(o=Y[i])+A+1,e),0!==(s=U[o])&&u(t,i-=X[o],s),l(t,o=a(--r),n),0!==(s=D[o])&&u(t,r-=$[o],s))}while(c<t.last_lit);l(t,R,e)}function y(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=T,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)g(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,g(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=N;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<T;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>d&&(o=d,g++),u[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=p&&(a=h[r-p]),s=u[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(g>0);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),f(o,l,t.bl_count)}function b(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*F]++):s<=10?t.bl_tree[2*G]++:t.bl_tree[2*Z]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function v(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,f=4;for(0===a&&(c=138,f=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<c&&i===a)){if(s<f)do{l(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(l(t,i,t.bl_tree),s--),l(t,F,t.bl_tree),u(t,s-3,2)):s<=10?(l(t,G,t.bl_tree),u(t,s-3,3)):(l(t,Z,t.bl_tree),u(t,s-11,7));s=0,o=i,0===a?(c=138,f=3):i===a?(c=6,f=3):(c=7,f=4)}}function w(t,e,n,r){u(t,(I<<1)+(r?1:0),3),function(t,e,n,r){p(t),r&&(s(t,n),s(t,~n)),_.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var _=t("../utils/common"),x=4,k=0,S=1,E=2,I=0,L=1,M=2,C=29,A=256,P=A+1+C,j=30,O=19,T=2*P+1,N=15,z=16,B=7,R=256,F=16,G=17,Z=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(P+2));r(H);var V=new Array(2*j);r(V);var q=new Array(512);r(q);var Y=new Array(256);r(Y);var X=new Array(C);r(X);var $=new Array(j);r($);var K,Q,tt,et=!1;n._tr_init=function(t){et||(function(){var t,e,n,r,o,a=new Array(N+1);for(n=0,r=0;r<C-1;r++)for(X[r]=n,t=0;t<1<<U[r];t++)Y[n++]=r;for(Y[n-1]=r,o=0,r=0;r<16;r++)for($[r]=o,t=0;t<1<<D[r];t++)q[o++]=r;for(o>>=7;r<j;r++)for($[r]=o<<7,t=0;t<1<<D[r]-7;t++)q[256+o++]=r;for(e=0;e<=N;e++)a[e]=0;for(t=0;t<=143;)H[2*t+1]=8,t++,a[8]++;for(;t<=255;)H[2*t+1]=9,t++,a[9]++;for(;t<=279;)H[2*t+1]=7,t++,a[7]++;for(;t<=287;)H[2*t+1]=8,t++,a[8]++;for(f(H,P+1,a),t=0;t<j;t++)V[2*t+1]=5,V[2*t]=c(t,5);K=new i(H,U,A+1,P,N),Q=new i(V,D,0,j,N),tt=new i(new Array(0),W,0,O,B)}(),et=!0),t.l_desc=new o(t.dyn_ltree,K),t.d_desc=new o(t.dyn_dtree,Q),t.bl_desc=new o(t.bl_tree,tt),t.bi_buf=0,t.bi_valid=0,h(t)},n._tr_stored_block=w,n._tr_flush_block=function(t,e,n,r){var i,o,a=0;t.level>0?(t.strm.data_type===E&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return k;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return S;for(e=32;e<A;e++)if(0!==t.dyn_ltree[2*e])return S;return k}(t)),y(t,t.l_desc),y(t,t.d_desc),a=function(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=O-1;e>=3&&0===t.bl_tree[2*J[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?w(t,e,n,r):t.strategy===x||o===i?(u(t,(L<<1)+(r?1:0),3),m(t,H,V)):(u(t,(M<<1)+(r?1:0),3),function(t,e,n,r){var i;for(u(t,e-257,5),u(t,n-1,5),u(t,r-4,4),i=0;i<r;i++)u(t,t.bl_tree[2*J[i]+1],3);v(t,t.dyn_ltree,e-1),v(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),m(t,t.dyn_ltree,t.dyn_dtree)),h(t),r&&p(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Y[n]+A+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){u(t,L<<1,3),l(t,R,H),function(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":72}],84:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],85:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return(t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:88}],86:[function(t,e,n){"use strict";function r(t,e){t=Math.round(t*e),(t<<=1)<0&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode(63+(32|31&t)),t>>=5;return n+=String.fromCharCode(t+63)}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}var o={};o.decode=function(t,e){for(var n,r=0,i=0,o=0,a=[],s=0,u=0,l=null,c=Math.pow(10,e||5);r<t.length;){l=null,s=0,u=0;do{u|=(31&(l=t.charCodeAt(r++)-63))<<s,s+=5}while(l>=32);n=1&u?~(u>>1):u>>1,s=u=0;do{u|=(31&(l=t.charCodeAt(r++)-63))<<s,s+=5}while(l>=32);i+=n,o+=1&u?~(u>>1):u>>1,a.push([i/c,o/c])}return a},o.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),i=r(t[0][0],n)+r(t[0][1],n),o=1;o<t.length;o++){var a=t[o],s=t[o-1];i+=r(a[0]-s[0],n),i+=r(a[1]-s[1],n)}return i},o.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return o.encode(i(t.coordinates),e)},o.toGeoJSON=function(t,e){return{type:"LineString",coordinates:i(o.decode(t,e))}},"object"==typeof e&&e.exports&&(e.exports=o)},{}],87:[function(t,e,n){e.exports=function(t){for(var e=t.split("\n"),n=!0,r=!1,i=!1,o=[],a=[],s=[],u={type:"FeatureCollection",features:[]},l=1;l<e.length;l++)if(function(t){return 0===t.indexOf("END")}(e[l])){if(!r){o.push(a);break}r=!1,n=!0,s.length>0&&(a.push(s),s=[])}else n?(n=!1,r=!0,i=0===e[l].indexOf("!"),a.length>0&&!i&&(o.push(a),a=[])):s.push(function(t){var e=t.replace(/^\s*|\s*$/g,"").split(/\s+/);return[parseFloat(e[0]),parseFloat(e[1])]}(e[l]));return u.features.push({type:"Feature",properties:{},geometry:{type:function(t){return 1===t.length?"Polygon":"MultiPolygon"}(o),coordinates:function(t){return 1===t.length?t[0]:t}(o)}}),u}},{}],88:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(){g&&p&&(g=!1,p.length?d=p.concat(d):m=-1,d.length&&s())}function s(){if(!g){var t=o(a);g=!0;for(var e=d.length;e;){for(p=d,d=[];++m<e;)p&&p[m].run();m=-1,e=d.length}p=null,g=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,f,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,d=[],g=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||g||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],89:[function(t,e,n){e.exports.stringQs=function(t){return t.split("&").reduce(function(t,e){var n=e.split("=");return 2===n.length&&(t[n[0]]=null===n[1]?"":decodeURIComponent(n[1])),t},{})},e.exports.qsString=function(t,e){return e=!0,Object.keys(t).sort().map(function(n){return encodeURIComponent(n)+"="+(e?function(t){return(""+t).replace("&","%26")}(t[n]):encodeURIComponent(t[n]))}).join("&")}},{}],90:[function(t,e,n){!function(){function t(t){function e(){for(;a=l<u.length&&c<t;){var n=l++,o=u[n],s=r.call(o,1);s.push(function(t){return function(n,r){--c,null==h&&(null!=n?(h=n,l=f=NaN,i()):(u[t]=r,--f?a||e():i()))}}(n)),++c,o[0].apply(null,s)}}function i(){null!=h?p(h):s?p(h,u):p.apply(null,[h].concat(u))}var o,a,s,u=[],l=0,c=0,f=0,h=null,p=n;return t||(t=1/0),o={defer:function(){return h||(u.push(arguments),++f,e()),o},await:function(t){return p=t,s=!1,f||i(),o},awaitAll:function(t){return p=t,s=!0,f||i(),o}}}function n(){}var r=[].slice;t.version="1.0.7","function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof e&&e.exports?e.exports=t:this.queue=t}()},{}],91:[function(t,e,n){e.exports=function(t,e){if(e||(e="NSEW"),"string"!=typeof t)return null;var n=t.match(/^([0-9.]+)? *(?:([0-9.]+)['] *)?(?:([0-9.]+)(?:''|"||) *)?([NSEW])?/);return n?n[4]&&-1===e.indexOf(n[4])?null:((n[1]?parseFloat(n[1]):0)+(n[2]?parseFloat(n[2])/60:0)+(n[3]?parseFloat(n[3])/3600:0))*(n[4]&&"S"===n[4]||"W"===n[4]?-1:1):null}},{}],92:[function(t,e,n){e.exports.download=t("./src/download"),e.exports.write=t("./src/write"),e.exports.zip=t("./src/zip")},{"./src/download":93,"./src/write":101,"./src/zip":102}],93:[function(t,e,n){var r=t("./zip");e.exports=function(t,e){var n=r(t,e);location.href="data:application/zip;base64,"+n}},{"./zip":102}],94:[function(t,e,n){e.exports.enlarge=function(t,e){return e[0]<t.xmin&&(t.xmin=e[0]),e[0]>t.xmax&&(t.xmax=e[0]),e[1]<t.ymin&&(t.ymin=e[1]),e[1]>t.ymax&&(t.ymax=e[1]),t},e.exports.enlargeExtent=function(t,e){return e.xmax>t.xmax&&(t.xmax=e.xmax),e.xmin<t.xmin&&(t.xmin=e.xmin),e.ymax>t.ymax&&(t.ymax=e.ymax),e.ymin<t.ymin&&(t.ymin=e.ymin),t},e.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},{}],95:[function(t,e,n){function r(t){var e={},n=[];for(var r in t)e[r]=typeof t[r];for(var o in e)n.push({name:o,type:i[e[o]]});return n}var i=t("./types").jstypes;e.exports.geojson=function(t){var e={};return t.forEach(function(t){!function(t,e){for(var n in e)t[n]=e[n]}(e,t.properties)}),r(e)},e.exports.obj=r},{"./types":100}],96:[function(t,e,n){function r(t,e){return function(n){var r=n.features.filter(function(t){return function(e){return e.geometry.type===t}}(t));return{geometries:r.map(i),properties:r.map(o),type:e}}}function i(t){return void 0!==t.geometry.coordinates[0]&&void 0!==t.geometry.coordinates[0][0]&&void 0!==t.geometry.coordinates[0][0][0]?t.geometry.coordinates[0]:t.geometry.coordinates}function o(t){return t.properties}e.exports.point=r("Point","POINT"),e.exports.line=r("LineString","POLYLINE"),e.exports.polygon=r("Polygon","POLYGON")},{}],97:[function(t,e,n){var r=t("./extent");e.exports.write=function(t,e,n,r){var i=100,o=0,a=0;t.forEach(function(t,e){n.setInt32(o,e),n.setInt32(o+4,10),n.setInt32(o+8,1,!0),n.setFloat64(o+12,t[0],!0),n.setFloat64(o+20,t[1],!0),r.setInt32(a,i/2),r.setInt32(a+4,10),a+=8,o+=28,i+=28})},e.exports.extent=function(t){return t.reduce(function(t,e){return r.enlarge(t,e)},r.blank())},e.exports.shxLength=function(t){return 8*t.length},e.exports.shpLength=function(t){return 28*t.length}},{"./extent":94}],98:[function(t,e,n){function r(t,e){return void 0===e&&(e=[]),"object"==typeof t[0][0]?t.reduce(function(t,e){return t.concat(r(e))},e):t}var i=t("./extent");e.exports.write=function(t,e,n,o,a){var s=0,u=0,l=100;t.forEach(function(t,e){var c=r(t),f=16*c.length+48,h=c.reduce(function(t,e){return i.enlarge(t,e)},i.blank());o.setInt32(u,l/2),o.setInt32(u+4,f/2),u+=8,l+=f+8,n.setInt32(s,e+1),n.setInt32(s+4,f/2),n.setInt32(s+8,a,!0),n.setFloat64(s+12,h.xmin,!0),n.setFloat64(s+20,h.ymin,!0),n.setFloat64(s+28,h.xmax,!0),n.setFloat64(s+36,h.ymax,!0),n.setInt32(s+44,1,!0),n.setInt32(s+48,c.length,!0),n.setInt32(s+52,0,!0),c.forEach(function(t,e){n.setFloat64(s+56+16*e,t[0],!0),n.setFloat64(s+56+16*e+8,t[1],!0)}),s+=f+8})},e.exports.shpLength=function(t){return 56*t.length+16*r(t).length},e.exports.shxLength=function(t){return 8*t.length},e.exports.extent=function(t){return r(t).reduce(function(t,e){return i.enlarge(t,e)},i.blank())}},{"./extent":94}],99:[function(t,e,n){e.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},{}],100:[function(t,e,n){e.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},{}],101:[function(t,e,n){function r(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function i(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}var o=t("./types"),a=t("dbf"),s=t("./prj"),u=(t("./extent"),t("./fields"),t("assert"),t("./points")),l=t("./poly"),c={1:u,5:l,3:l};e.exports=function(t,e,n,u){var l=o.geometries[e],f=c[l],h=100+f.shpLength(n),p=100+f.shxLength(n),d=new ArrayBuffer(h),g=new DataView(d),m=new ArrayBuffer(p),y=new DataView(m),b=f.extent(n);r(g,l),r(y,l),i(b,g),i(b,y),f.write(n,b,new DataView(d,100),new DataView(m,100),l),g.setInt32(24,h/2),y.setInt32(24,50+4*n.length),u(null,{shp:g,shx:y,dbf:a.structure(t),prj:s})}},{"./extent":94,"./fields":95,"./points":97,"./poly":98,"./prj":99,"./types":100,assert:4,dbf:13}],102:[function(t,e,n){var r=t("./write"),i=t("./geojson"),o=t("./prj"),a=t("jszip");e.exports=function(t,e){var n=new a,s=n.folder(e&&e.folder?e.folder:"layers");return[i.point(t),i.line(t),i.polygon(t)].forEach(function(t){t.geometries.length&&r(t.properties,t.type,t.geometries,function(n,r){var i=e&&e.types[t.type.toLowerCase()]?e.types[t.type.toLowerCase()]:t.type;s.file(i+".shp",r.shp.buffer,{binary:!0}),s.file(i+".shx",r.shx.buffer,{binary:!0}),s.file(i+".dbf",r.dbf.buffer,{binary:!0}),s.file(i+".prj",o)})}),n.generate({compression:"STORE"})}},{"./geojson":96,"./prj":99,"./write":101,jszip:46}],103:[function(t,e,n){function r(t){return t*(Math.PI/180)}function i(t){return t*(180/Math.PI)}var o=t("wgs84");e.exports.heading=function(t,e){var n=Math.sin(Math.PI*(t[0]-e[0])/180)*Math.cos(Math.PI*e[1]/180),r=Math.cos(Math.PI*t[1]/180)*Math.sin(Math.PI*e[1]/180)-Math.sin(Math.PI*t[1]/180)*Math.cos(Math.PI*e[1]/180)*Math.cos(Math.PI*(t[0]-e[0])/180);return 180*Math.atan2(n,r)/Math.PI},e.exports.distance=function(t,e){var n=Math.sin(Math.PI*(e[0]-t[0])/360),r=Math.sin(Math.PI*(e[1]-t[1])/360),i=r*r+n*n*Math.cos(Math.PI*t[1]/180)*Math.cos(Math.PI*e[1]/180);return 2*o.RADIUS*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))},e.exports.radial=function(t,e,n){var a=r(e),s=n/o.RADIUS,u=r(t[0]),l=r(t[1]),c=Math.asin(Math.sin(l)*Math.cos(s)+Math.cos(l)*Math.sin(s)*Math.cos(a));return[i((u-Math.atan2(Math.sin(a)*Math.sin(s)*Math.cos(l),Math.cos(s)-Math.sin(l)*Math.sin(c))+Math.PI)%(2*Math.PI)-Math.PI),i(c)]}},{wgs84:144}],104:[function(t,e,n){(function(t){!function(t){function n(t){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(i),u.appendChild(i),i.addBehavior("#default#userData"),i.load(s);var n=t.apply(o,e);return u.removeChild(i),n}}function r(t){return t.replace(c,"___")}var i,o={},a=t.document,s="localStorage";if(o.disabled=!1,o.set=function(t,e){},o.get=function(t){},o.remove=function(t){},o.clear=function(){},o.transact=function(t,e,n){var r=o.get(t);null==n&&(n=e,e=null),void 0===r&&(r=e||{}),n(r),o.set(t,r)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(t){return JSON.stringify(t)},o.deserialize=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}},function(){try{return s in t&&t[s]}catch(t){return!1}}())i=t[s],o.set=function(t,e){return void 0===e?o.remove(t):(i.setItem(t,o.serialize(e)),e)},o.get=function(t){return o.deserialize(i.getItem(t))},o.remove=function(t){i.removeItem(t)},o.clear=function(){i.clear()},o.getAll=function(){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=function(t){for(var e=0;e<i.length;e++){var n=i.key(e);t(n,o.get(n))}};else if(a.documentElement.addBehavior){var u,l;try{(l=new ActiveXObject("htmlfile")).open(),l.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),l.close(),u=l.w.frames[0].document,i=u.createElement("div")}catch(t){i=a.createElement("div"),u=a.body}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=n(function(t,e,n){return e=r(e),void 0===n?o.remove(e):(t.setAttribute(e,o.serialize(n)),t.save(s),n)}),o.get=n(function(t,e){return e=r(e),o.deserialize(t.getAttribute(e))}),o.remove=n(function(t,e){e=r(e),t.removeAttribute(e),t.save(s)}),o.clear=n(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(s);for(var n,r=0;n=e[r];r++)t.removeAttribute(n.name);t.save(s)}),o.getAll=function(t){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=n(function(t,e){for(var n,r=t.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)e(n.name,o.deserialize(t.getAttribute(n.name)))})}try{var f="__storejs__";o.set(f,f),o.get(f)!=f&&(o.disabled=!0),o.remove(f)}catch(t){o.disabled=!0}o.enabled=!o.disabled,void 0!==e&&e.exports?e.exports=o:"function"==typeof define&&define.amd?define(o):t.store=o}(this.window||t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(t,e,n){function r(t){return t&&t.length?" "+t.map(function(t){return t[0]+'="'+t[1]+'"'}).join(" "):""}e.exports.attr=r,e.exports.tagClose=function(t,e){return"<"+t+r(e)+"/>"},e.exports.tag=function(t,e,n){return"<"+t+r(n)+">"+e+"</"+t+">"},e.exports.encode=function(t){return(null===t?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{}],106:[function(t,e,n){(function(r){toGeoJSON=function(){"use strict";function e(t){if(!t||!t.length)return 0;for(var e=0,n=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n}function i(t,e){return t.getElementsByTagName(e)}function o(t,e){return t.getAttribute(e)}function a(t,e){return parseFloat(o(t,e))}function s(t,e){var n=i(t,e);return n.length?n[0]:null}function u(t){for(var e=0,n=[];e<t.length;e++)n[e]=parseFloat(t[e]);return n}function l(t){return t&&function(t){t.normalize&&t.normalize()}(t),t&&t.firstChild&&t.firstChild.nodeValue}function c(t){return u(t.replace(g,"").split(","))}function f(t){for(var e=t.replace(m,"").split(y),n=[],r=0;r<e.length;r++)n.push(c(e[r]));return n}function h(t){var e=[a(t,"lon"),a(t,"lat")],n=s(t,"ele");return n&&e.push(parseFloat(l(n))),e}function p(t){return d.serializeToString(t)}var d,g=/\s*/g,m=/^\s*|\s*$/g,y=/\s+/;"undefined"!=typeof XMLSerializer?d=new XMLSerializer:"object"!=typeof n||"object"!=typeof r||r.browser||(d=new(t("xmldom").XMLSerializer));return{kml:function(t,n){function r(t){return u(t.split(" "))}function a(t){for(var e=i(t,"coord"),n=[],o=0;o<e.length;o++)n.push(r(l(e[o])));return n}function h(t){var e,n,r,o,u,p=[];if(s(t,"MultiGeometry"))return h(s(t,"MultiGeometry"));if(s(t,"MultiTrack"))return h(s(t,"MultiTrack"));for(r=0;r<m.length;r++)if(n=i(t,m[r]))for(o=0;o<n.length;o++)if(e=n[o],"Point"==m[r])p.push({type:"Point",coordinates:c(l(s(e,"coordinates")))});else if("LineString"==m[r])p.push({type:"LineString",coordinates:f(l(s(e,"coordinates")))});else if("Polygon"==m[r]){var d=i(e,"LinearRing"),g=[];for(u=0;u<d.length;u++)g.push(f(l(s(d[u],"coordinates"))));p.push({type:"Polygon",coordinates:g})}else"Track"==m[r]&&p.push({type:"LineString",coordinates:a(e)});return p}n=n||{};for(var d={type:"FeatureCollection",features:[]},g={},m=["Polygon","LineString","Point","Track"],y=i(t,"Placemark"),b=i(t,"Style"),v=0;v<b.length;v++)g["#"+o(b[v],"id")]=e(p(b[v])).toString(16);for(var w=0;w<y.length;w++)d.features=d.features.concat(function(t){var e,n=h(t),r={},o=l(s(t,"name")),a=l(s(t,"styleUrl")),u=l(s(t,"description")),c=s(t,"TimeSpan"),f=s(t,"ExtendedData");if(!n.length)return[];if(o&&(r.name=o),a&&g[a]&&(r.styleUrl=a,r.styleHash=g[a]),u&&(r.description=u),c){var p=l(s(c,"begin")),d=l(s(c,"end"));r.timespan={begin:p,end:d}}if(f){var m=i(f,"Data"),y=i(f,"SimpleData");for(e=0;e<m.length;e++)r[m[e].getAttribute("name")]=l(s(m[e],"value"));for(e=0;e<y.length;e++)r[y[e].getAttribute("name")]=l(y[e])}return[{type:"Feature",geometry:1===n.length?n[0]:{type:"GeometryCollection",geometries:n},properties:r}]}(y[w]));return d},gpx:function(t,e){function n(t,e){var n,o=i(t,e),a=[];for(n=0;n<o.length;n++)a.push(h(o[n]));return{type:"Feature",properties:r(t),geometry:{type:"LineString",coordinates:a}}}function r(t){var e,n=["name","desc","author","copyright","link","time","keywords"],r={};for(e=0;e<n.length;e++)r[n[e]]=l(s(t,n[e]));return function(t){var e={};for(var n in t)t[n]&&(e[n]=t[n]);return e}(r)}var o,a=i(t,"trk"),u=i(t,"rte"),c=i(t,"wpt"),f={type:"FeatureCollection",features:[]};for(o=0;o<a.length;o++)f.features.push(n(a[o],"trkpt"));for(o=0;o<u.length;o++)f.features.push(n(u[o],"rtept"));for(o=0;o<c.length;o++)f.features.push(function(t){var e=r(t);return e.sym=l(s(t,"sym")),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:h(t)}}}(c[o]));return f}}}(),void 0!==e&&(e.exports=toGeoJSON)}).call(this,t("_process"))},{_process:88,xmldom:7}],107:[function(t,e,n){function r(t){return function(e){var n="",r="";if(t.simplestyle&&function(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}(e.properties)&&(n=function(t){return u("Style",u("IconStyle",u("Icon",u("href",function(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",r=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+r+".png"}(t))))+u("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]]),[["id",a(t)]])}(e.properties),r=u("styleUrl","#"+a(e.properties))),!e.properties||!c.valid(e.geometry))return"";var i=c.any(e.geometry);return i?n+u("Placemark",function(t,e){return t[e.name]?u("name",l(t[e.name])):""}(e.properties,t)+function(t,e){return t[e.description]?u("description",l(t[e.description])):""}(e.properties,t)+function(t){return u("ExtendedData",function(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}(t).map(o).join(""))}(e.properties)+function(t,e){return t[e.timestamp]?u("TimeStamp",u("when",l(t[e.timestamp]))):""}(e.properties,t)+i+r):""}}function i(t){return t.map(function(t){return t.join(",")}).join(" ")}function o(t){return u("Data",u("value",l(t[1])),[["name",l(t[0])]])}function a(t){return(t["marker-symbol"]||"")+(t["marker-color"]||"").replace("#","")+(t["marker-size"]||"")}var s=t("strxml"),u=s.tag,l=s.encode;e.exports=function(t,e){return e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+u("kml",u("Document",function(t){return void 0!==t.documentName?u("name",t.documentName):""}(e)+function(t){return void 0!==t.documentDescription?u("description",t.documentDescription):""}(e)+function(t,e){if(!t.type)return"";switch(t.type){case"FeatureCollection":return t.features?t.features.map(r(e)).join(""):"";case"Feature":return r(e)(t);default:return r(e)({type:"Feature",geometry:t,properties:{}})}}(t,e)),[["xmlns","http://www.opengis.net/kml/2.2"]])};var c={Point:function(t){return u("Point",u("coordinates",t.coordinates.join(",")))},LineString:function(t){return u("LineString",u("coordinates",i(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),r=u("outerBoundaryIs",u("LinearRing",u("coordinates",i(e)))),o=n.map(function(t){return u("innerBoundaryIs",u("LinearRing",u("coordinates",i(t))))}).join("");return u("Polygon",r+o)},MultiPoint:function(t){return t.coordinates.length?u("MultiGeometry",t.coordinates.map(function(t){return c.Point({coordinates:t})}).join("")):""},MultiPolygon:function(t){return t.coordinates.length?u("MultiGeometry",t.coordinates.map(function(t){return c.Polygon({coordinates:t})}).join("")):""},MultiLineString:function(t){return t.coordinates.length?u("MultiGeometry",t.coordinates.map(function(t){return c.LineString({coordinates:t})}).join("")):""},GeometryCollection:function(t){return u("MultiGeometry",t.geometries.map(c.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||"GeometryCollection"===t.type&&t.geometries.every(c.valid))},any:function(t){return c[t.type]?c[t.type](t):""}}},{strxml:105}],108:[function(t,e,n){function r(){}var i=t("./type");t("../../");e.exports=function(t,e){var n=i({geometry:function(t){var n=t.properties,r=e[t.id];if(r)if(n)for(var i in r)n[i]=r[i];else for(var i in r){t.properties=r;break}this.defaults.geometry.call(this,t)},LineString:r,MultiLineString:r,Point:r,MultiPoint:r,Polygon:r,MultiPolygon:r});for(var o in t.objects)n.object(t.objects[o])}},{"../../":"topojson","./type":136}],109:[function(t,e,n){e.exports=function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.coordinates)},MultiLineString:function(t){t.coordinates.forEach(r)},Polygon:function(t){t.coordinates.forEach(r)},MultiPolygon:function(t){t.coordinates.forEach(i)}};for(var c in t)e(t[c]);return[o,a,s,u]}},{}],110:[function(t,e,n){n.name="cartesian",n.formatDistance=function(t){return t.toString()},n.ringArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return.5*o},n.absoluteArea=Math.abs,n.triangleArea=function(t){return Math.abs((t[0][0]-t[2][0])*(t[1][1]-t[0][1])-(t[0][0]-t[1][0])*(t[2][1]-t[0][1]))},n.distance=function(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}},{}],111:[function(t,e,n){function r(t,e){return function(n){if(r=n.length){for(var r,i,o,a=new Array(r),s=-1/0,u=0;u<r;++u){var l;(l=Math.abs(a[u]=t(n[u])))>s&&(s=l,i=u)}i&&(o=n[i],n[i]=n[0],n[0]=o,o=a[i],a[i]=a[0],a[0]=o),a[0]<0&&e(n[0]);for(u=1;u<r;++u)a[u]>0&&e(n[u])}}}function i(){}var o=t("./type"),a=t("./coordinate-systems"),s=t("../../");e.exports=function(t,e){"Topology"===t.type?function(t,e){var n=null;e&&"coordinate-system"in e&&(n=a[e["coordinate-system"]]);var u=r(function(e){return n.ringArea(s.feature(t,{type:"Polygon",arcs:[e]}).geometry.coordinates[0])},function(t){var e=-1,n=t.length;for(t.reverse();++e<n;)t[e]=~t[e]}),l=o({LineString:i,MultiLineString:i,Point:i,MultiPoint:i,Polygon:function(t){u(t.arcs)},MultiPolygon:function(t){t.arcs.forEach(u)}});for(var c in t.objects)l.object(t.objects[c])}(t,e):function(t,e){var n=null;e&&"coordinate-system"in e&&(n=a[e["coordinate-system"]]);var s=r(n.ringArea,function(t){t.reverse()});o({LineString:i,MultiLineString:i,Point:i,MultiPoint:i,Polygon:function(t){s(t.coordinates)},MultiPolygon:function(t){t.coordinates.forEach(s)}}).object(t)}(t,e)}},{"../../":"topojson","./coordinate-systems":113,"./type":136}],112:[function(t,e,n){e.exports=function(t,e){function n(t){t&&i.hasOwnProperty(t.type)&&i[t.type](t)}function r(t){var n=e(t);null==n?delete t.id:t.id=n}arguments.length<2&&(e=function(t){return t.id});var i={Feature:r,FeatureCollection:function(t){t.features.forEach(r)}};for(var o in t)n(t[o]);return t}},{}],113:[function(t,e,n){e.exports={cartesian:t("./cartesian"),spherical:t("./spherical")}},{"./cartesian":110,"./spherical":123}],114:[function(t,e,n){e.exports=function(t){for(var e=t.arcs,n=-1,r=e.length;++n<r;)for(var i,o,a=e[n],s=0,u=a.length,l=a[0],c=l[0],f=l[1];++s<u;)i=(l=a[s])[0],o=l[1],a[s]=[i-c,o-f],c=i,f=o;return t}},{}],115:[function(t,e,n){function r(){}function i(){return!1}var o=t("./type"),a=t("./prune"),s=t("./clockwise"),u=t("./coordinate-systems"),l=t("../../");e.exports=function(t,e){function n(t){return t.length&&function(t){return m(t)||p.absoluteArea(f(t))>=h}(t[0])?[t.shift()].concat(t.filter(c)):null}function c(t){return m(t)||p.absoluteArea(-f(t))>=h}function f(e){return p.ringArea(l.feature(t,{type:"Polygon",arcs:[e]}).geometry.coordinates[0])}var h,p=null,d=!0,g=!0,m=i;if(e&&("coordinate-system"in e&&(p=u[e["coordinate-system"]]),"minimum-area"in e&&(h=+e["minimum-area"]),"preserve-attached"in e&&(g=!!e["preserve-attached"]),"force-clockwise"in e&&(d=!!e["force-clockwise"])),d&&s(t,e),h>0||(h=Number.MIN_VALUE),g){var y={},b=0,v=o({LineString:r,MultiLineString:r,Point:r,MultiPoint:r,MultiPolygon:function(t){for(var e=t.arcs,n=-1,r=e.length;++n<r;)this.polygon(e[n])},Polygon:function(t){this.polygon(t.arcs)},polygon:function(t){for(var e=0,n=t.length;e<n;++e,++b)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];a<0&&(a=~a);var s=y[a];y[a]=s>=0&&s!==b?-1:b}}});m=function(t){for(var e=0,n=t.length;e<n;++e){var r=t[e];if(y[r<0?~r:r]<0)return!0}};for(var w in t.objects)v.object(t.objects[w])}var _=o({LineString:r,MultiLineString:r,Point:r,MultiPoint:r,Polygon:function(t){t.arcs=n(t.arcs),t.arcs&&t.arcs.length||(t.type=null,delete t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(n).filter(function(t){return t&&t.length}),t.arcs.length||(t.type=null,delete t.arcs)},GeometryCollection:function(t){this.defaults.GeometryCollection.call(this,t),t.geometries=t.geometries.filter(function(t){return null!=t.type}),t.geometries.length||(t.type=null,delete t.geometries)}});for(var w in t.objects)_.object(t.objects[w]);a(t,e)}},{"../../":"topojson","./clockwise":111,"./coordinate-systems":113,"./prune":119,"./type":136}],116:[function(t,e,n){e.exports=function(t){function e(t){return(t&&i.hasOwnProperty(t.type)?i[t.type]:r)(t)}function n(t){var e=t.geometry;return null==e?t.type=null:(r(e),t.type=e.type,e.geometries?t.geometries=e.geometries:e.coordinates&&(t.coordinates=e.coordinates)),delete t.geometry,t}function r(t){return t?(o.hasOwnProperty(t.type)&&o[t.type](t),t):{type:null}}var i={Feature:n,FeatureCollection:function(t){return t.type="GeometryCollection",t.geometries=t.features,t.features.forEach(n),delete t.features,t}},o={GeometryCollection:function(t){for(var e=t.geometries,n=-1,i=e.length;++n<i;)e[n]=r(e[n])},MultiPoint:function(t){t.coordinates.length?t.coordinates.length<2&&(t.type="Point",t.coordinates=t.coordinates[0]):(t.type=null,delete t.coordinates)},LineString:function(t){t.coordinates.length||(t.type=null,delete t.coordinates)},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=0,i=e.length;n<i;++n){var o=e[n];o.length&&(e[r++]=o)}r?r<2?(t.type="LineString",t.coordinates=e[0]):t.coordinates.length=r:(t.type=null,delete t.coordinates)},Polygon:function(t){for(var e=t.coordinates,n=0,r=0,i=e.length;n<i;++n){var o=e[n];o.length&&(e[r++]=o)}r?t.coordinates.length=r:(t.type=null,delete t.coordinates)},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=0,i=e.length;n<i;++n){for(var o=e[n],a=0,s=0,u=o.length;a<u;++a){var l=o[a];l.length&&(o[s++]=l)}s&&(o.length=s,e[r++]=o)}r?r<2?(t.type="Polygon",t.coordinates=e[0]):e.length=r:(t.type=null,delete t.coordinates)}};for(var a in t)t[a]=e(t[a]);return t}},{}],117:[function(t,e,n){var r=t("./quantize");e.exports=function(t,e,n){function i(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}if(e){if(n===e||!t.bbox.every(isFinite))return t;var o=n/e,a=r(0,0,o,o);t.transform.scale[0]/=o,t.transform.scale[1]/=o}else{var s=t.bbox,u=isFinite(s[0])?s[0]:0,l=isFinite(s[1])?s[1]:0,c=isFinite(s[2])?s[2]:0,f=isFinite(s[3])?s[3]:0;a=r(-u,-l,c-u?(n-1)/(c-u):1,f-l?(n-1)/(f-l):1);t.transform=a.transform}var h={GeometryCollection:function(t){t.geometries.forEach(i)},Point:function(t){a.point(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a.point)}};for(var p in t.objects)i(t.objects[p]);return t.arcs=t.arcs.map(function(t){return a.line(t=t.map(function(t){return t.slice()})),t.length<2&&t.push(t[0]),t}),t}},{"./quantize":120}],118:[function(t,e,n){var r=t("./quantize");e.exports=function(t,e,n,i){function o(t){t&&f.hasOwnProperty(t.type)&&f[t.type](t)}arguments.length<4&&(i=n);var a=isFinite(e[0])?e[0]:0,s=isFinite(e[1])?e[1]:0,u=isFinite(e[2])?e[2]:0,l=isFinite(e[3])?e[3]:0,c=r(-a,-s,u-a?(i-1)/(u-a)*n/i:1,l-s?(i-1)/(l-s)*n/i:1),f={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){c.point(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(c.point)},LineString:function(t){var e=t.coordinates;c.line(e),e.length<2&&(e[1]=e[0])},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n){var i=e[n];c.line(i),i.length<2&&(i[1]=i[0])}},Polygon:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n){var i=e[n];for(c.line(i);i.length<4;)i.push(i[0])}},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];for(c.line(s);s.length<4;)s.push(s[0])}}};for(var h in t)o(t[h]);return c.transform}},{"./quantize":120}],119:[function(t,e,n){e.exports=function(t,e){function n(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}function r(t){for(var e=0,n=t.length;e<n;++e){var r,i=t[e],o=i<0&&(i=~i,!0);null==(r=f[i])&&(f[i]=r=c++,l[r]=s[i]),t[e]=o?~r:r}}function i(t){t.forEach(r)}var o=!1,a=t.objects,s=t.arcs,u=s.length,l=t.arcs=[],c=0,f=new Array(s.length);e&&"verbose"in e&&(o=!!e.verbose);var h={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var p in a)n(a[p]);return o&&console.warn("prune: retained "+c+" / "+u+" arcs ("+Math.round(c/u*100)+"%)"),t}},{}],120:[function(t,e,n){e.exports=function(t,e,n,r){function i(i){return i[0]=Math.round((i[0]+t)*n),i[1]=Math.round((i[1]+e)*r),i}return{point:i,line:function(t){for(var e,n,r,o=0,a=1,s=t.length,u=i(t[0]),l=u[0],c=u[1];++o<s;)n=(u=i(t[o]))[0],r=u[1],n===l&&r===c||((e=t[a++])[0]=l=n,e[1]=c=r);t.length=a},transform:{scale:[1/n,1/r],translate:[-t,-e]}}}},{}],121:[function(t,e,n){function r(){}var i=t("./type");e.exports=function(t,e){function n(t){return[t[0]*l+(o/2-p*l)+s,t[1]*m+(a/2-d*m)+s]}var o,a,s=0,u=!0;e&&("width"in e&&(o=+e.width),"height"in e&&(a=+e.height),"margin"in e&&(s=+e.margin),"invert"in e&&(u=!!e.invert));var l,c=t.bbox,f=c[2]-c[0],h=c[3]-c[1],p=(c[2]+c[0])/2,d=(c[3]+c[1])/2;o=Math.max(0,o-2*s),a=Math.max(0,a-2*s),o&&a?l=Math.min(o/f,a/h):o?a=(l=o/f)*h:o=(l=a/h)*f;var g,m=u?-l:l,y=n([c[0],c[1]]),b=n([c[2],c[3]]);if(t.bbox=u?[y[0],b[1],b[0],y[1]]:[y[0],y[1],b[0],b[1]],g=t.transform)g.scale[0]*=l,g.scale[1]*=m,g.translate[0]=o/2+s-(p-g.translate[0])*l,g.translate[1]=a/2+s-(d-g.translate[1])*m;else{var v=i({LineString:r,MultiLineString:r,Point:function(t){t.coordinates=n(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(n)},Polygon:r,MultiPolygon:r});for(var w in t.objects)v.object(t.objects[w]);t.arcs=t.arcs.map(function(t){return t.map(n)})}return t}},{"./type":136}],122:[function(t,e,n){var r=t("../../"),i=t("./coordinate-systems");e.exports=function(t,e){var n,o=0,a=!1,s=null,u=t.arcs.reduce(function(t,e){return t+e.length},0),l=0;if(e&&("minimum-area"in e&&(o=+e["minimum-area"]),"coordinate-system"in e&&(s=i[e["coordinate-system"]]),"retain-proportion"in e&&(n=+e["retain-proportion"]),"verbose"in e&&(a=!!e.verbose)),r.presimplify(t,s.triangleArea),n){var c=[];t.arcs.forEach(function(t){t.forEach(function(t){isFinite(t[2])&&c.push(t[2])})}),e["minimum-area"]=o=u?c.sort(function(t,e){return e-t})[Math.ceil((u-1)*n)]:0,a&&console.warn("simplification: effective minimum area "+o.toPrecision(3))}return t.arcs.forEach(t.transform?function(t){for(var e,n,r=0,i=0,a=-1,s=-1,u=t.length;++a<u;)(e=t[a])[2]>=o?((n=t[++s])[0]=e[0]+r,n[1]=e[1]+i,r=i=0):(r+=e[0],i+=e[1]);t.length=++s}:function(t){for(var e,n=-1,r=-1,i=t.length;++n<i;)(e=t[n])[2]>=o&&(t[++r]=e);t.length=++r}),t.arcs.forEach(t.transform?function(t){var e=0,n=0,r=t.length,i=t[0];for(i.length=2;++e<r;)(i=t[e]).length=2,(i[0]||i[1])&&(t[++n]=i);l+=t.length=(n||1)+1}:function(t){var e,n,r=0,i=0,o=t.length,a=t[0],s=a[0],u=a[1];for(a.length=2;++r<o;)e=(a=t[r])[0],n=a[1],a.length=2,s===e&&u===n||(t[++i]=a,s=e,u=n);l+=t.length=(i||1)+1}),a&&console.warn("simplification: retained "+l+" / "+u+" points ("+Math.round(l/u*100)+"%)"),t}},{"../../":"topojson","./coordinate-systems":113}],123:[function(t,e,n){function r(t,e){var n,r=(e[0]-t[0])*s,i=Math.sin(r),o=Math.cos(r),a=Math.sin(t[1]*s),u=Math.cos(t[1]*s),l=Math.sin(e[1]*s),c=Math.cos(e[1]*s);return Math.atan2(Math.sqrt((n=c*i)*n+(n=u*l-a*c*o)*n),a*l+u*c*o)}function i(t){return(t=Math.sin(t/2))*t}var o=Math.PI,a=o/4,s=o/180;n.name="spherical",n.formatDistance=function(t){var e=t*s*6371;return(e>1?e.toFixed(3)+"km":(1e3*e).toPrecision(3)+"m")+" ("+t.toPrecision(3)+")"},n.ringArea=function(t){if(!t.length)return 0;for(var e=0,n=t[0],r=n[0]*s,i=n[1]*s/2+a,u=r,l=Math.cos(i),c=Math.sin(i),f=1,h=t.length;f<h;++f){r=(n=t[f])[0]*s,i=n[1]*s/2+a;var p=r-u,d=Math.cos(i),g=Math.sin(i),m=c*g,y=l*d+m*Math.cos(p),b=m*Math.sin(p);e+=Math.atan2(b,y),u=r,l=d,c=g}return 2*(e>o?e-2*o:e<-o?e+2*o:e)},n.absoluteArea=function(t){return t<0?t+4*o:t},n.triangleArea=function(t){var e=r(t[0],t[1]),n=r(t[1],t[2]),i=r(t[2],t[0]),o=(e+n+i)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(o/2)*Math.tan((o-e)/2)*Math.tan((o-n)/2)*Math.tan((o-i)/2))))},n.distance=function(t,e,n,r){return t*=s,e*=s,n*=s,r*=s,2*Math.asin(Math.sqrt(i(r-e)+Math.cos(e)*Math.cos(r)*i(n-t)))}},{}],124:[function(t,e,n){var r=t("./type");e.exports=function(t,e){function n(t){return t<=c?[0,l]:t>=h?[0,f]:[o,t]}function i(t){for(var e=[],r=0,i=t.length;r<i;++r){for(var o=t[r],s=0,l=o.length;s<l;++s){var f=o[s];f.polygon=o,e.push(f);for(var p=0,d=f.length;p<d;++p){var g=f[p],m=g[0],y=g[1];if(m<=a||m>=u||y<=c||y>=h){for(var b=p+1;b<d;++b){var v=f[b],w=v[0],_=v[1];if(w>a&&w<u&&_>c&&_<h)break}if(b===p+1)continue;if(p){var x=f.slice(0,p+1);x.polygon=o,x[x.length-1]=n(y),e[e.length-1]=x}else e.pop();if(b>=d)break;e.push(f=f.slice(b-1)),f[0]=n(f[0][1]),f.polygon=o,p=-1,d=f.length}}}o.length=0}var k={},S={};for(p=0,d=e.length;p<d;++p){var E=(L=e[p])[0],I=L[L.length-1];E[0]!==I[0]||E[1]!==I[1]?(L.index=p,k[E]=S[I]=L):(L.polygon.push(L),e[p]=null)}for(p=0;p<d;++p){var L;if(L=e[p]){E=L[0],I=L[L.length-1];var M=S[E],C=k[I];if(delete k[E],delete S[I],E[0]===I[0]&&E[1]===I[1]){L.polygon.push(L);continue}M?(delete S[E],delete k[M[0]],M.pop(),e[M.index]=null,(L=M.concat(L)).polygon=M.polygon,M===C?L.polygon.push(L):(L.index=d++,e.push(k[L[0]]=S[L[L.length-1]]=L))):C?(delete k[I],delete S[C[C.length-1]],L.pop(),(L=L.concat(C)).polygon=C.polygon,L.index=d++,e[C.index]=null,e.push(k[L[0]]=S[L[L.length-1]]=L)):(L.push(L[0]),L.polygon.push(L))}}}var o=-180,a=o+.01,s=180,u=s-.01,l=-90,c=l+.01,f=90,h=f-.01;if(e){var p=e.scale[0],d=e.scale[1],g=e.translate[0],m=e.translate[1];o=Math.round((o-g)/p),s=Math.round((s-g)/p),l=Math.round((l-m)/d),f=Math.round((f-m)/d),a=Math.round((a-g)/p),u=Math.round((u-g)/p),c=Math.round((c-m)/d),h=Math.round((h-m)/d)}var y=r({Polygon:function(t){i([t.coordinates])},MultiPolygon:function(t){i(t.coordinates)}});for(var b in t)y.object(t[b])}},{"./type":136}],125:[function(t,e,n){t("./type");var r=t("./stitch"),i=t("./coordinate-systems"),o=t("./topology/index"),a=t("./delta"),s=t("./geomify"),u=t("./pre-quantize"),l=t("./post-quantize"),c=t("./bounds"),f=t("./compute-id"),h=t("./transform-properties");e.exports=function(t,e){var n,p=1e4,d=1e4,g=function(t){return t.id},m=function(){},y=!0,b=!1,v=null;if(e&&("verbose"in e&&(b=!!e.verbose),"stitch-poles"in e&&(y=!!e["stitch-poles"]),"coordinate-system"in e&&(v=i[e["coordinate-system"]]),"minimum-area"in e&&+e["minimum-area"],"quantization"in e&&(p=d=+e.quantization),"pre-quantization"in e&&(p=+e["pre-quantization"]),"post-quantization"in e&&(d=+e["post-quantization"]),"id"in e&&(g=e.id),"property-transform"in e&&(m=e["property-transform"])),p/d%1)throw new Error("post-quantization is not a divisor of pre-quantization");if(p&&!d)throw new Error("post-quantization is required when input is already quantized");f(t,g),h(t,m),s(t);var w=c(t),_=w[0]<-180-1e-6||w[1]<-90-1e-6||w[2]>180+1e-6||w[3]>90+1e-6;if(v||(v=i[_?"cartesian":"spherical"],e&&(e["coordinate-system"]=v.name)),v===i.spherical){if(_)throw new Error("spherical coordinates outside of [180, 90]");w[0]<1e-6-180&&(w[0]=-180),w[1]<1e-6-90&&(w[1]=-90),w[2]>180-1e-6&&(w[2]=180),w[3]>90-1e-6&&(w[3]=90)}b&&console.warn("bounds: "+w.join(" ")+" ("+v.name+")"),p&&(n=u(t,w,p,d),b&&console.warn("pre-quantization: "+n.scale.map(function(t){return v.formatDistance(t)}).join(" "))),v===i.spherical&&y&&r(t,n);var x=o(t);return p&&(x.transform=n),x.bbox=w,b&&console.warn("topology: "+x.arcs.length+" arcs, "+x.arcs.reduce(function(t,e){return t+e.length},0)+" points"),d&&d!==p&&(l(x,p,d),n=x.transform,b&&console.warn("post-quantization: "+n.scale.map(function(t){return v.formatDistance(t)}).join(" "))),d&&a(x),x}},{"./bounds":109,"./compute-id":112,"./coordinate-systems":113,"./delta":114,"./geomify":116,"./post-quantize":117,"./pre-quantize":118,"./stitch":124,"./topology/index":131,"./transform-properties":135,"./type":136}],126:[function(t,e,n){function r(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}var i=t("./join");e.exports=function(t){for(var e=i(t),n=t.coordinates,o=t.lines,a=t.rings,s=0,u=o.length;s<u;++s)for(var l=o[s],c=l[0],f=l[1];++c<f;)if(e.has(n[c])){var h={0:c,1:l[1]};l[1]=c,l=l.next=h}for(s=0,u=a.length;s<u;++s)for(var p=a[s],d=p[0],g=d,m=p[1],y=e.has(n[d]);++g<m;)if(e.has(n[g]))if(y){h={0:g,1:p[1]};p[1]=g,p=p.next=h}else!function(t,e,n,i){r(t,e,n),r(t,e,e+i),r(t,e+i,n)}(n,d,m,m-g),n[m]=n[d],y=!0,g=d;return t}},{"./join":132}],127:[function(t,e,n){t("./join");var r=t("./hashmap"),i=t("./point-hash"),o=t("./point-equal");e.exports=function(t){function e(t){var e,n,r,i;if(r=m.get(e=u[t[0]]))for(var a=0,s=r.length;a<s;++a){var l=r[a];if(function(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,++r)if(!o(u[n],u[r]))return!1;return!0}(l,t))return t[0]=l[0],void(t[1]=l[1])}if(i=m.get(n=u[t[1]]))for(a=0,s=i.length;a<s;++a){var c=i[a];if(function(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!o(u[n],u[a]))return!1;return!0}(c,t))return t[1]=c[0],void(t[0]=c[1])}r?r.push(t):m.set(e,[t]),i?i.push(t):m.set(n,[t]),y.push(t)}function n(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=s(t),l=s(e),c=0;c<i;++c)if(!o(u[n+(c+a)%i],u[r+(c+l)%i]))return!1;return!0}function a(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],l=i-n;if(l!==a-r)return!1;for(var c=s(t),f=l-s(e),h=0;h<l;++h)if(!o(u[n+(h+c)%l],u[a-(h+f)%l]))return!1;return!0}function s(t){for(var e=t[0],n=t[1],r=e,i=r,o=u[r];++r<n;){var a=u[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var u=t.coordinates,l=t.lines,c=t.rings,f=l.length+c.length;delete t.lines,delete t.rings;for(var h=0,p=l.length;h<p;++h)for(var d=l[h];d=d.next;)++f;for(h=0,p=c.length;h<p;++h)for(var g=c[h];g=g.next;)++f;var m=r(2*f*1.4,i,o),y=t.arcs=[];for(h=0,p=l.length;h<p;++h){d=l[h];do{e(d)}while(d=d.next)}for(h=0,p=c.length;h<p;++h){if((g=c[h]).next)do{e(g)}while(g=g.next);else!function(t){var e,r;if(r=m.get(e=u[t[0]]))for(var i=0,o=r.length;i<o;++i){if(n(l=r[i],t))return t[0]=l[0],void(t[1]=l[1]);if(a(l,t))return t[0]=l[1],void(t[1]=l[0])}if(r=m.get(e=u[t[0]+s(t)]))for(i=0,o=r.length;i<o;++i){var l;if(n(l=r[i],t))return t[0]=l[0],void(t[1]=l[1]);if(a(l,t))return t[0]=l[1],void(t[1]=l[0])}r?r.push(t):m.set(e,[t]),y.push(t)}(g)}return t}},{"./hashmap":129,"./join":132,"./point-equal":133,"./point-hash":134}],128:[function(t,e,n){e.exports=function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.coordinates),delete t.coordinates},MultiLineString:function(t){t.arcs=t.coordinates.map(n),delete t.coordinates},Polygon:function(t){t.arcs=t.coordinates.map(r),delete t.coordinates},MultiPolygon:function(t){t.arcs=t.coordinates.map(i),delete t.coordinates}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}},{}],129:[function(t,e,n){e.exports=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=t,c=0;c<t;++c)a[c]=i;return{set:function(r,o){for(var c=e(r)&u,f=a[c],h=0;f!=i;){if(n(f,r))return s[c]=o;if(++h>=t)throw new Error("full hashmap");f=a[c=c+1&u]}return a[c]=r,s[c]=o,--l,o},maybeSet:function(r,o){for(var c=e(r)&u,f=a[c],h=0;f!=i;){if(n(f,r))return s[c];if(++h>=t)throw new Error("full hashmap");f=a[c=c+1&u]}return a[c]=r,s[c]=o,--l,o},get:function(r,o){for(var l=e(r)&u,c=a[l],f=0;c!=i;){if(n(c,r))return s[l];if(++f>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}}},{}],130:[function(t,e,n){e.exports=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=t,u=0;u<t;++u)o[u]=i;return{add:function(r){for(var u=e(r)&a,l=o[u],c=0;l!=i;){if(n(l,r))return!0;if(++c>=t)throw new Error("full hashset");l=o[u=u+1&a]}return o[u]=r,--s,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}},{}],131:[function(t,e,n){function r(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function i(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}var o=t("./hashmap"),a=t("./extract"),s=t("./cut"),u=t("./dedup");e.exports=function(t){function e(t){t&&p.hasOwnProperty(t.type)&&p[t.type](t)}function n(t){var e=[];do{var n=h.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(n)}var c=u(s(a(t))),f=c.coordinates,h=o(1.4*c.arcs.length,r,i);t=c.objects,c.arcs=c.arcs.map(function(t,e){return h.set(t,e),f.slice(t[0],t[1]+1)}),delete c.coordinates,f=null;var p={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(n)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};for(var d in t)e(t[d]);return c}},{"./cut":126,"./dedup":127,"./extract":128,"./hashmap":129}],132:[function(t,e,n){var r=t("./hashset"),i=t("./hashmap"),o=t("./point-hash"),a=t("./point-equal");e.exports=function(t){function e(t,e,n,r){if(h[n]!==t){h[n]=t;var i=p[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++m,g[n]=1)}else p[n]=e,d[n]=r}}function n(t){return o(u[t])}function s(t,e){return a(u[t],u[e])}for(var u=t.coordinates,l=t.lines,c=t.rings,f=function(){for(var t=i(1.4*u.length,n,s,Int32Array,-1,Int32Array),e=new Int32Array(u.length),r=0,o=u.length;r<o;++r)e[r]=t.maybeSet(r,r);return e}(),h=new Int32Array(u.length),p=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),m=0,y=0,b=u.length;y<b;++y)h[y]=p[y]=d[y]=-1;for(y=0,b=l.length;y<b;++y){var v=l[y],w=v[0],_=v[1],x=f[w],k=f[++w];for(++m,g[x]=1;++w<=_;)e(y,x,x=k,k=f[w]);++m,g[k]=1}for(y=0,b=u.length;y<b;++y)h[y]=-1;for(y=0,b=c.length;y<b;++y){var S=c[y],E=S[0]+1,I=S[1];for(e(y,f[I-1],x=f[E-1],k=f[E]);++E<=I;)e(y,x,x=k,k=f[E])}h=p=d=null;var L,M=r(1.4*m,o,a);for(y=0,b=u.length;y<b;++y)g[L=f[y]]&&M.add(u[L]);return M}},{"./hashmap":129,"./hashset":130,"./point-equal":133,"./point-hash":134}],133:[function(t,e,n){e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},{}],134:[function(t,e,n){var r=new ArrayBuffer(16),i=new Float64Array(r),o=new Uint32Array(r);e.exports=function(t){i[0]=t[0],i[1]=t[1];var e=o[0]^o[1];return 2147483647&(e=e<<5^e>>7^o[2]^o[3])}},{}],135:[function(t,e,n){e.exports=function(t,e){function n(t){t&&i.hasOwnProperty(t.type)&&i[t.type](t)}function r(t){if(t.properties){var n=t.properties,r={},i=!0;for(var o in n)e(r,o,n[o])&&(i=!1);i?delete t.properties:t.properties=r}}arguments.length<2&&(e=function(){});var i={Feature:r,FeatureCollection:function(t){t.features.forEach(r)}};for(var o in t)n(t[o]);return t}},{}],136:[function(t,e,n){e.exports=function(t){for(var e in r)e in t||(t[e]=r[e]);return t.defaults=r,t};var r={Feature:function(t){t.geometry&&this.geometry(t.geometry)},FeatureCollection:function(t){for(var e=t.features,n=-1,r=e.length;++n<r;)this.Feature(e[n])},GeometryCollection:function(t){for(var e=t.geometries,n=-1,r=e.length;++n<r;)this.geometry(e[n])},LineString:function(t){this.line(t.coordinates)},MultiLineString:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.line(e[n])},MultiPoint:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.point(e[n])},MultiPolygon:function(t){for(var e=t.coordinates,n=-1,r=e.length;++n<r;)this.polygon(e[n])},Point:function(t){this.point(t.coordinates)},Polygon:function(t){this.polygon(t.coordinates)},object:function(t){return null==t?null:o.hasOwnProperty(t.type)?this[t.type](t):this.geometry(t)},geometry:function(t){return null==t?null:i.hasOwnProperty(t.type)?this[t.type](t):null},point:function(){},line:function(t){for(var e=-1,n=t.length;++e<n;)this.point(t[e])},polygon:function(t){for(var e=-1,n=t.length;++e<n;)this.line(t[e])}},i={LineString:1,MultiLineString:1,MultiPoint:1,MultiPolygon:1,Point:1,Polygon:1,GeometryCollection:1},o={Feature:1,FeatureCollection:1}},{}],137:[function(t,e,r){!function(){function t(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||a.push([t])}),a}function r(e,n,r){function i(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:l})}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in f&&(l=t,f[t.type](t.arcs))}var u=[];if(arguments.length>1){var l,c=[],f={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};s(n),c.forEach(arguments.length<3?function(t){u.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var h=0,p=e.arcs.length;h<p;++h)u.push(h);return{type:"MultiLineString",arcs:t(e,u)}}function i(e,r){function i(t){t.forEach(function(e){e.forEach(function(e){(s[e=e<0?~e:e]||(s[e]=[])).push(t)})}),u.push(t)}function o(t){return function(t){var e,n=-1,r=t.length,i=t[r-1],o=0;for(;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return.5*o}(a(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var s={},u=[],l=[];return r.forEach(function(t){"Polygon"===t.type?i(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(i)}),u.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,l.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){s[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),u.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:l.map(function(r){var i=[];if(r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){s[t<0?~t:t].length<2&&i.push(t)})})}),i=t(e,i),(n=i.length)>1)for(var a,u=o(r[0][0]),l=0;l<n;++l)if(u===o(i[l])){a=i[0],i[0]=i[l],i[l]=a;break}return i})}}function o(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:a(t,e)};return null==e.id&&delete n.id,n}function a(t,e){function n(t,e){e.length&&e.pop();for(var n,r=l[t<0?~t:t],i=0,o=r.length;i<o;++i)e.push(n=r[i].slice()),u(n,i);t<0&&function(t,e){var n,r=t.length,i=r-e;for(;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,o)}function r(t){return t=t.slice(),u(t,0),t}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function a(t){return t.map(o)}function s(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(s)}:e in f?{type:e,coordinates:f[e](t)}:null}var u=c(t.transform),l=t.arcs,f={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return a(t.arcs)},MultiPolygon:function(t){return t.arcs.map(a)}};return s(e)}function s(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function u(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function l(t,e){return t[1][2]-e[1][2]}function c(t){if(!t)return f;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0),t[0]=(e+=t[0])*r+o,t[1]=(n+=t[1])*i+a}}function f(){}var h={version:"1.6.8",mesh:function(t){return a(t,r.apply(this,arguments))},meshArcs:r,merge:function(t){return a(t,i.apply(this,arguments))},mergeArcs:i,feature:function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return o(t,e)})}:o(t,e)},neighbors:function(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),a={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var u in i)for(var l=i[u],c=l.length,f=0;f<c;++f)for(var h=f+1;h<c;++h){var p,d=l[f],g=l[h];(p=o[d])[u=s(p,g)]!==g&&p.splice(u,0,g),(p=o[g])[u=s(p,d)]!==d&&p.splice(u,0,d)}return o},presimplify:function(t,e){function n(t){a.remove(t),t[1][2]=e(t),a.push(t)}var r,i=c(t.transform),o=function(t){if(!t)return f;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=(t[0]-o)/r|0,l=(t[1]-a)/i|0;t[0]=u-e,t[1]=l-n,e=u,n=l}}(t.transform),a=function(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,i=r[n];if(l(t,i)>=0)break;r[i._=e]=i,r[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,a=e,s=r[a];if(o<i&&l(r[o],s)<0&&(s=r[a=o]),n<i&&l(r[n],s)<0&&(s=r[a=n]),a===e)break;r[s._=e]=s,r[t._=e=a]=t}}var n={},r=[],i=0;return n.push=function(e){return t(r[e._=i]=e,i++),i},n.pop=function(){if(!(i<=0)){var t,n=r[0];return--i>0&&(t=r[i],e(r[t._=0]=t,0)),n}},n.remove=function(n){var o,a=n._;if(r[a]===n)return a!==--i&&(o=r[i],(l(o,n)<0?t:e)(r[o._=a]=o,a)),a},n}(),s=0;for(e||(e=u),t.arcs.forEach(function(t){var n=[];t.forEach(i);for(var o=1,s=t.length-1;o<s;++o)(r=t.slice(o-1,o+2))[1][2]=e(r),n.push(r),a.push(r);for(t[0][2]=t[s][2]=1/0,o=0,s=n.length;o<s;++o)(r=n[o]).previous=n[o-1],r.next=n[o+1]});r=a.pop();){var h=r.previous,p=r.next;r[1][2]<s?r[1][2]=s:s=r[1][2],h&&(h.next=p,h[2]=r[2],n(h)),p&&(p.previous=h,p[0]=r[0],n(p))}return t.arcs.forEach(function(t){t.forEach(o)}),t}};"function"==typeof define&&define.amd?define(h):"object"==typeof e&&e.exports?e.exports=h:this.topojson=h}()},{}],138:[function(t,e,n){function r(t){this.value=t}function i(t,e,n){var r=[],i=[],a=!0;return function t(s){function h(){if("object"==typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=u(g.node)),g.isLeaf=0==g.keys.length;for(var t=0;t<i.length;t++)if(i[t].node_===s){g.circular=i[t];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}var p={},d=!0,g={node:n?o(s):s,node_:s,path:[].concat(r),parent:i[i.length-1],parents:i,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(t,e){g.isRoot||(g.parent.node[g.key]=t),g.node=t,e&&(d=!1)},delete:function(t){delete g.parent.node[g.key],t&&(d=!1)},remove:function(t){l(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],t&&(d=!1)},keys:null,before:function(t){p.before=t},after:function(t){p.after=t},pre:function(t){p.pre=t},post:function(t){p.post=t},stop:function(){a=!1},block:function(){d=!1}};if(!a)return g;h();var m=e.call(g,g.node);return void 0!==m&&g.update&&g.update(m),p.before&&p.before.call(g,g.node),d?("object"!=typeof g.node||null===g.node||g.circular||(i.push(g),h(),c(g.keys,function(e,i){r.push(e),p.pre&&p.pre.call(g,g.node[e],e);var o=t(g.node[e]);n&&f.call(g.node,e)&&(g.node[e]=o.node),o.isLast=i==g.keys.length-1,o.isFirst=0==i,p.post&&p.post.call(g,o),r.pop()}),i.pop()),p.after&&p.after.call(g,g.node),g):g}(t).node}function o(t){if("object"==typeof t&&null!==t){var e;if(l(t))e=[];else if(function(t){return"[object Date]"===a(t)}(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===a(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===a(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===a(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===a(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===a(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},r=function(){};r.prototype=n,e=new r}return c(u(t),function(n){e[n]=t[n]}),e}return t}function a(t){return Object.prototype.toString.call(t)}var s=e.exports=function(t){return new r(t)};r.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!f.call(e,r)){e=void 0;break}e=e[r]}return e},r.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!f.call(e,r))return!1;e=e[r]}return!0},r.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];f.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e,e},r.prototype.map=function(t){return i(this.value,t,!0)},r.prototype.forEach=function(t){return this.value=i(this.value,t,!1),this.value},r.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(r=t.call(this,r,e))}),r},r.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},r.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},r.prototype.clone=function(){var t=[],e=[];return function n(r){for(var i=0;i<t.length;i++)if(t[i]===r)return e[i];if("object"==typeof r&&null!==r){var a=o(r);return t.push(r),e.push(a),c(u(r),function(t){a[t]=n(r[t])}),t.pop(),e.pop(),a}return r}(this.value)};var u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};c(u(r.prototype),function(t){s[t]=function(e){var n=[].slice.call(arguments,1),i=new r(e);return i[t].apply(i,n)}});var f=Object.hasOwnProperty||function(t,e){return e in t}},{}],139:[function(t,e,n){function r(t,e){var n=document.createElement(t);return e&&(n.className=e),n}function i(t,e){return t.appendChild(e)}function o(t,e,n){return t.addEventListener(e,n)}e.exports=function(t){function e(t){var e=t.target,o=t.target.parentNode;if(e.classList.contains("open")){for(var a=o.getElementsByClassName("treeui-level"),s=0;s<a.length;s++)a[s].parentNode.removeChild(a[s]);e.classList.remove("open"),e.innerHTML=""}else n(JSON.parse(o.level),i(o,r("div","treeui-level"))),e.classList.add("open"),e.innerHTML=""}function n(e,n){t(e,function(t,e){t||e.forEach(function(t){i(n,u(t))})})}var a=r("div","treeui"),s=function(){},u=function(t){var n=r("div","treeui-item");if(n.level=JSON.stringify(t),c(t)){var a=i(n,r("span","treeui-caret"));a.innerHTML="",a.level=JSON.stringify(t),o(a,"click",e)}var u=i(n,r("span","treeui-label"));return u.textContent=l(t),o(u,"click",function(t){s(JSON.parse(t.target.parentNode.level),t)}),n},l=function(t){return t},c=function(t){return!0};n([],a);var f={appendTo:function(t){return t.appendChild(a),f},onclick:function(t){return s=t,f},display:function(t){return l=t,f},expandable:function(t){return c=t,f}};return f}},{}],140:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],141:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],142:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(e)?r.showHidden=e:e&&n._extend(r,e),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t,e,r){if(t.customInspect&&e&&w(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return d(i)||(i=s(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(d(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(p(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(h(e))return t.stylize("null","null")}(t,e);if(o)return o;var a=Object.keys(e),y=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),v(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(e);if(0===a.length){if(w(e)){var _=e.name?": "+e.name:"";return t.stylize("[Function"+_+"]","special")}if(m(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(b(e))return t.stylize(Date.prototype.toString.call(e),"date");if(v(e))return u(e)}var x="",S=!1,E=["{","}"];if(c(e)&&(S=!0,E=["[","]"]),w(e)){x=" [Function"+(e.name?": "+e.name:"")+"]"}if(m(e)&&(x=" "+RegExp.prototype.toString.call(e)),b(e)&&(x=" "+Date.prototype.toUTCString.call(e)),v(e)&&(x=" "+u(e)),0===a.length&&(!S||0==e.length))return E[0]+x+E[1];if(r<0)return m(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var I;return I=S?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(l(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}(t,e,r,y,a):a.map(function(n){return l(t,e,r,y,n,S)}),t.seen.pop(),function(t,e,n){var r=0;if(t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(I,x,E)}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i,o){var a,u,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(l.value)<0?(u=h(n)?s(t,l.value,null):s(t,l.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function c(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function h(t){return null===t}function p(t){return"number"==typeof t}function d(t){return"string"==typeof t}function g(t){return void 0===t}function m(t){return y(t)&&"[object RegExp]"===_(t)}function y(t){return"object"==typeof t&&null!==t}function b(t){return y(t)&&"[object Date]"===_(t)}function v(t){return y(t)&&("[object Error]"===_(t)||t instanceof Error)}function w(t){return"function"==typeof t}function _(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var S=/%[sdj%]/g;n.format=function(t){if(!d(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(S,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])h(s)||!y(s)?a+=" "+s:a+=" "+i(s);return a},n.deprecate=function(t,i){if(g(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var E,I={};n.debuglog=function(t){if(g(E)&&(E=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(E)){var r=e.pid;I[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else I[t]=function(){};return I[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=c,n.isBoolean=f,n.isNull=h,n.isNullOrUndefined=function(t){return null==t},n.isNumber=p,n.isString=d,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=g,n.isRegExp=m,n.isObject=y,n.isDate=b,n.isError=v,n.isFunction=w,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",function(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!y(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":141,_process:88,inherits:140}],143:[function(t,e,n){function r(t){function e(e){var n=t.substring(l).match(e);return n?(l+=n[0].length,n[0]):null}function n(){e(/^\s*/)}function r(){n();for(var t,r=0,i=[],a=[i],s=i;t=e(/^(\()/)||e(/^(\))/)||e(/^(\,)/)||e(o);){if("("==t)a.push(s),s=[],a[a.length-1].push(s),r++;else if(")"==t){if(!(s=a.pop()))return;if(0==--r)break}else if(","===t)s=[],a[a.length-1].push(s);else{if(isNaN(parseFloat(t)))return null;s.push(parseFloat(t))}n()}return 0!==r?null:i}function i(){for(var t,r,i=[];r=e(o)||e(/^(\,)/);)","==r?(i.push(t),t=[]):(t||(t=[]),t.push(parseFloat(r))),n();return t&&i.push(t),i.length?i:null}function a(){return function(){if(!e(/^(point)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t?(n(),e(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!e(/^(linestring)/i))return null;if(n(),!e(/^(\()/))return null;var t=i();return t&&e(/^(\))/)?{type:"LineString",coordinates:t}:null}()||(e(/^(polygon)/i)?(n(),{type:"Polygon",coordinates:r()}):null)||function(){if(!e(/^(multipoint)/i))return null;n();var t=r();return t?(n(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!e(/^(multilinestring)/i))return null;n();var t=r();return t?(n(),{type:"MultiLineString",coordinates:t}):null}()||(e(/^(multipolygon)/i)?(n(),{type:"MultiPolygon",coordinates:r()}):null)||function(){var t,r=[];if(!e(/^(geometrycollection)/i))return null;if(n(),!e(/^(\()/))return null;for(;t=a();)r.push(t),n(),e(/^(\,)/),n();return e(/^(\))/)?{type:"GeometryCollection",geometries:r}:null}()}var s=t.split(";"),u=(t=s.pop(),(s.shift()||"").split("=").pop()),l=0;return function(t){return t&&u.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+u}}),t}(a())}function i(t){function e(t){return 2===t.length?t[0]+" "+t[1]:3===t.length?t[0]+" "+t[1]+" "+t[2]:void 0}function n(t){return t.map(e).join(", ")}function r(t){return t.map(n).map(o).join(", ")}function o(t){return"("+t+")"}switch("Feature"===t.type&&(t=t.geometry),t.type){case"Point":return"POINT ("+e(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+r(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+function(t){return t.map(r).map(o).join(", ")}(t.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+r(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(i).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}e.exports=r,e.exports.parse=r,e.exports.stringify=i;var o=/^[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/},{}],144:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],145:[function(t,e,n){(function(t){function n(t,e){this.buffer=t,this.position=0,this.isBigEndian=e||!1}function r(t,e,n){return function(){var r;return r=this.isBigEndian?e.call(this.buffer,this.position):t.call(this.buffer,this.position),this.position+=n,r}}e.exports=n,n.prototype.readUInt8=r(t.prototype.readUInt8,t.prototype.readUInt8,1),n.prototype.readUInt16=r(t.prototype.readUInt16LE,t.prototype.readUInt16BE,2),n.prototype.readUInt32=r(t.prototype.readUInt32LE,t.prototype.readUInt32BE,4),n.prototype.readInt8=r(t.prototype.readInt8,t.prototype.readInt8,1),n.prototype.readInt16=r(t.prototype.readInt16LE,t.prototype.readInt16BE,2),n.prototype.readInt32=r(t.prototype.readInt32LE,t.prototype.readInt32BE,4),n.prototype.readFloat=r(t.prototype.readFloatLE,t.prototype.readFloatBE,4),n.prototype.readDouble=r(t.prototype.readDoubleLE,t.prototype.readDoubleBE,8),n.prototype.readVarInt=function(){var t,e=0,n=0;do{e+=(127&(t=this.buffer[this.position+n]))<<7*n,n++}while(t>=128);return this.position+=n,e}}).call(this,t("buffer").Buffer)},{buffer:9}],146:[function(t,e,n){(function(t){function n(e,n){this.buffer=new t(e),this.position=0,this.allowResize=n}function r(t,e){return function(n,r){this.ensureSize(e),t.call(this.buffer,n,this.position,r),this.position+=e}}e.exports=n,n.prototype.writeUInt8=r(t.prototype.writeUInt8,1),n.prototype.writeUInt16LE=r(t.prototype.writeUInt16LE,2),n.prototype.writeUInt16BE=r(t.prototype.writeUInt16BE,2),n.prototype.writeUInt32LE=r(t.prototype.writeUInt32LE,4),n.prototype.writeUInt32BE=r(t.prototype.writeUInt32BE,4),n.prototype.writeInt8=r(t.prototype.writeInt8,1),n.prototype.writeInt16LE=r(t.prototype.writeInt16LE,2),n.prototype.writeInt16BE=r(t.prototype.writeInt16BE,2),n.prototype.writeInt32LE=r(t.prototype.writeInt32LE,4),n.prototype.writeInt32BE=r(t.prototype.writeInt32BE,4),n.prototype.writeFloatLE=r(t.prototype.writeFloatLE,4),n.prototype.writeFloatBE=r(t.prototype.writeFloatBE,4),n.prototype.writeDoubleLE=r(t.prototype.writeDoubleLE,8),n.prototype.writeDoubleBE=r(t.prototype.writeDoubleBE,8),n.prototype.writeBuffer=function(t){this.ensureSize(t.length),t.copy(this.buffer,this.position,0,t.length),this.position+=t.length},n.prototype.writeVarInt=function(t){for(var e=1;0!=(4294967168&t);)this.writeUInt8(127&t|128),t>>>=7,e++;return this.writeUInt8(127&t),e},n.prototype.ensureSize=function(e){if(this.buffer.length<this.position+e){if(!this.allowResize)throw new RangeError("index out of range");var n=new t(this.position+e);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}}}).call(this,t("buffer").Buffer)},{buffer:9}],147:[function(t,e,n){(function(n){function r(){this.srid=void 0,this.hasZ=!1,this.hasM=!1}e.exports=r;var i=t("./types"),o=t("./point"),a=t("./linestring"),s=t("./polygon"),u=t("./multipoint"),l=t("./multilinestring"),c=t("./multipolygon"),f=t("./geometrycollection"),h=t("./binaryreader"),p=t("./binarywriter"),d=t("./wktparser"),g=t("./zigzag.js");r.parse=function(t,e){if("string"===typeof t||t instanceof d)return r._parseWkt(t);if(n.isBuffer(t)||t instanceof h)return r._parseWkb(t,e);throw new Error("first argument must be a string or Buffer")},r._parseWkt=function(t){var e,n,r=(e=t instanceof d?t:new d(t)).matchRegex([/^SRID=(\d+);/]);r&&(n=parseInt(r[1],10));var h=e.matchType(),p=e.matchDimension(),g={srid:n,hasZ:p.hasZ,hasM:p.hasM};switch(h){case i.wkt.Point:return o._parseWkt(e,g);case i.wkt.LineString:return a._parseWkt(e,g);case i.wkt.Polygon:return s._parseWkt(e,g);case i.wkt.MultiPoint:return u._parseWkt(e,g);case i.wkt.MultiLineString:return l._parseWkt(e,g);case i.wkt.MultiPolygon:return c._parseWkt(e,g);case i.wkt.GeometryCollection:return f._parseWkt(e,g)}},r._parseWkb=function(t,e){var n,r,p,d={};switch(n=t instanceof h?t:new h(t),n.isBigEndian=!n.readInt8(),r=n.readUInt32(),d.hasSrid=536870912==(536870912&r),d.isEwkb=536870912&r||1073741824&r||2147483648&r,d.hasSrid&&(d.srid=n.readUInt32()),d.hasZ=!1,d.hasM=!1,d.isEwkb||e&&e.isEwkb?(2147483648&r&&(d.hasZ=!0),1073741824&r&&(d.hasM=!0),p=15&r):r>=1e3&&r<2e3?(d.hasZ=!0,p=r-1e3):r>=2e3&&r<3e3?(d.hasM=!0,p=r-2e3):r>=3e3&&r<4e3?(d.hasZ=!0,d.hasM=!0,p=r-3e3):p=r,p){case i.wkb.Point:return o._parseWkb(n,d);case i.wkb.LineString:return a._parseWkb(n,d);case i.wkb.Polygon:return s._parseWkb(n,d);case i.wkb.MultiPoint:return u._parseWkb(n,d);case i.wkb.MultiLineString:return l._parseWkb(n,d);case i.wkb.MultiPolygon:return c._parseWkb(n,d);case i.wkb.GeometryCollection:return f._parseWkb(n,d);default:throw new Error("GeometryType "+p+" not supported")}},r.parseTwkb=function(t){var e,n={},r=(e=t instanceof h?t:new h(t)).readUInt8(),p=e.readUInt8(),d=15&r;if(n.precision=g.decode(r>>4),n.precisionFactor=Math.pow(10,n.precision),n.hasBoundingBox=p>>0&1,n.hasSizeAttribute=p>>1&1,n.hasIdList=p>>2&1,n.hasExtendedPrecision=p>>3&1,n.isEmpty=p>>4&1,n.hasExtendedPrecision){var m=e.readUInt8();n.hasZ=1==(1&m),n.hasM=2==(2&m),n.zPrecision=g.decode((28&m)>>2),n.zPrecisionFactor=Math.pow(10,n.zPrecision),n.mPrecision=g.decode((224&m)>>5),n.mPrecisionFactor=Math.pow(10,n.mPrecision)}else n.hasZ=!1,n.hasM=!1;if(n.hasSizeAttribute&&e.readVarInt(),n.hasBoundingBox){var y=2;n.hasZ&&y++,n.hasM&&y++;for(var b=0;b<y;b++)e.readVarInt(),e.readVarInt()}switch(d){case i.wkb.Point:return o._parseTwkb(e,n);case i.wkb.LineString:return a._parseTwkb(e,n);case i.wkb.Polygon:return s._parseTwkb(e,n);case i.wkb.MultiPoint:return u._parseTwkb(e,n);case i.wkb.MultiLineString:return l._parseTwkb(e,n);case i.wkb.MultiPolygon:return c._parseTwkb(e,n);case i.wkb.GeometryCollection:return f._parseTwkb(e,n);default:throw new Error("GeometryType "+d+" not supported")}},r.parseGeoJSON=function(t){var e;switch(t.type){case i.geoJSON.Point:e=o._parseGeoJSON(t);break;case i.geoJSON.LineString:e=a._parseGeoJSON(t);break;case i.geoJSON.Polygon:e=s._parseGeoJSON(t);break;case i.geoJSON.MultiPoint:e=u._parseGeoJSON(t);break;case i.geoJSON.MultiLineString:e=l._parseGeoJSON(t);break;case i.geoJSON.MultiPolygon:e=c._parseGeoJSON(t);break;case i.geoJSON.GeometryCollection:e=f._parseGeoJSON(t);break;default:throw new Error("GeometryType "+t.type+" not supported")}if(t.crs&&t.crs.type&&"name"===t.crs.type&&t.crs.properties&&t.crs.properties.name){var n=t.crs.properties.name;if(0===n.indexOf("EPSG:"))e.srid=parseInt(n.substring(5));else{if(0!==n.indexOf("urn:ogc:def:crs:EPSG::"))throw new Error("Unsupported crs: "+n);e.srid=parseInt(n.substring(22))}}return e},r.prototype.toEwkt=function(){return"SRID="+this.srid+";"+this.toWkt()},r.prototype.toEwkb=function(){var t=new p(this._getWkbSize()+4),e=this.toWkb();return t.writeInt8(1),t.writeUInt32LE(536870912|e.slice(1,5).readUInt32LE(0),!0),t.writeUInt32LE(this.srid),t.writeBuffer(e.slice(5)),t.buffer},r.prototype._getWktType=function(t,e){var n=t;return this.hasZ&&this.hasM?n+=" ZM ":this.hasZ?n+=" Z ":this.hasM&&(n+=" M "),!e||this.hasZ||this.hasM||(n+=" "),e&&(n+="EMPTY"),n},r.prototype._getWktCoordinate=function(t){var e=t.x+" "+t.y;return this.hasZ&&(e+=" "+t.z),this.hasM&&(e+=" "+t.m),e},r.prototype._writeWkbType=function(t,e,n){var r=0;void 0!==this.srid||n&&void 0!==n.srid?(this.hasZ&&(r|=2147483648),this.hasM&&(r|=1073741824)):this.hasZ&&this.hasM?r+=3e3:this.hasZ?r+=1e3:this.hasM&&(r+=2e3),t.writeUInt32LE(r+e,!0)},r.getTwkbPrecision=function(t,e,n){return{xy:t,z:e,m:n,xyFactor:Math.pow(10,t),zFactor:Math.pow(10,e),mFactor:Math.pow(10,n)}},r.prototype._writeTwkbHeader=function(t,e,n,r){var i=(g.encode(n.xy)<<4)+e,o=(this.hasZ||this.hasM)<<3;if(o+=r<<4,t.writeUInt8(i),t.writeUInt8(o),this.hasZ||this.hasM){var a=0;this.hasZ&&(a|=1),this.hasM&&(a|=2),t.writeUInt8(a)}},r.prototype.toGeoJSON=function(t){var e={};return this.srid&&t&&(t.shortCrs?e.crs={type:"name",properties:{name:"EPSG:"+this.srid}}:t.longCrs&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+this.srid}})),e}}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":36,"./binaryreader":145,"./binarywriter":146,"./geometrycollection":148,"./linestring":149,"./multilinestring":150,"./multipoint":151,"./multipolygon":152,"./point":153,"./polygon":154,"./types":155,"./wktparser":156,"./zigzag.js":158}],148:[function(t,e,n){function r(t){a.call(this),this.geometries=t||[],this.geometries.length>0&&(this.hasZ=this.geometries[0].hasZ,this.hasM=this.geometries[0].hasM)}e.exports=r;var i=t("util"),o=t("./types"),a=t("./geometry"),s=t("./binarywriter");i.inherits(r,a),r.Z=function(t){var e=new r(t);return e.hasZ=!0,e},r.M=function(t){var e=new r(t);return e.hasM=!0,e},r.ZM=function(t){var e=new r(t);return e.hasZ=!0,e.hasM=!0,e},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();do{n.geometries.push(a.parse(t))}while(t.isMatch([","]));return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var i=t.readUInt32(),o=0;o<i;o++)n.geometries.push(a.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=t.readVarInt(),o=0;o<i;o++)n.geometries.push(a.parseTwkb(t));return n},r._parseGeoJSON=function(t){for(var e=new r,n=0;n<t.geometries.length;n++)e.geometries.push(a.parseGeoJSON(t.geometries[n]));return e.geometries.length>0&&(e.hasZ=e.geometries[0].hasZ),e},r.prototype.toWkt=function(){if(0===this.geometries.length)return this._getWktType(o.wkt.GeometryCollection,!0);for(var t=this._getWktType(o.wkt.GeometryCollection,!1)+"(",e=0;e<this.geometries.length;e++)t+=this.geometries[e].toWkt()+",";return t=t.slice(0,-1),t+=")"},r.prototype.toWkb=function(){var t=new s(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,o.wkb.GeometryCollection),t.writeUInt32LE(this.geometries.length);for(var e=0;e<this.geometries.length;e++)t.writeBuffer(this.geometries[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new s(0,!0),e=a.getTwkbPrecision(5,0,0),n=0===this.geometries.length;if(this._writeTwkbHeader(t,o.wkb.GeometryCollection,e,n),this.geometries.length>0){t.writeVarInt(this.geometries.length);for(var r=0;r<this.geometries.length;r++)t.writeBuffer(this.geometries[r].toTwkb())}return t.buffer},r.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.geometries.length;e++)t+=this.geometries[e]._getWkbSize();return t},r.prototype.toGeoJSON=function(t){var e=a.prototype.toGeoJSON.call(this,t);e.type=o.geoJSON.GeometryCollection,e.geometries=[];for(var n=0;n<this.geometries.length;n++)e.geometries.push(this.geometries[n].toGeoJSON());return e}},{"./binarywriter":146,"./geometry":147,"./types":155,util:142}],149:[function(t,e,n){function r(t){o.call(this),this.points=t||[],this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}e.exports=r;var i=t("util"),o=t("./geometry"),a=t("./types"),s=t("./point"),u=t("./binarywriter");i.inherits(r,o),r.Z=function(t){var e=new r(t);return e.hasZ=!0,e},r.M=function(t){var e=new r(t);return e.hasM=!0,e},r.ZM=function(t){var e=new r(t);return e.hasZ=!0,e.hasM=!0,e},r._parseWkt=function(t,e){var n=new r;return n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"])?n:(t.expectGroupStart(),n.points.push.apply(n.points,t.matchCoordinates(e)),t.expectGroupEnd(),n)},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var i=t.readUInt32(),o=0;o<i;o++)n.points.push(s._readWkbPoint(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=new s(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),o=t.readVarInt(),a=0;a<o;a++)n.points.push(s._readTwkbPoint(t,e,i));return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&(e.hasZ=t.coordinates[0].length>2);for(var n=0;n<t.coordinates.length;n++)e.points.push(s._readGeoJSONPoint(t.coordinates[n]));return e},r.prototype.toWkt=function(){return 0===this.points.length?this._getWktType(a.wkt.LineString,!0):this._getWktType(a.wkt.LineString,!1)+this._toInnerWkt()},r.prototype._toInnerWkt=function(){for(var t="(",e=0;e<this.points.length;e++)t+=this._getWktCoordinate(this.points[e])+",";return t=t.slice(0,-1),t+=")"},r.prototype.toWkb=function(t){var e=new u(this._getWkbSize());e.writeInt8(1),this._writeWkbType(e,a.wkb.LineString,t),e.writeUInt32LE(this.points.length);for(var n=0;n<this.points.length;n++)this.points[n]._writeWkbPoint(e);return e.buffer},r.prototype.toTwkb=function(){var t=new u(0,!0),e=o.getTwkbPrecision(5,0,0),n=0===this.points.length;if(this._writeTwkbHeader(t,a.wkb.LineString,e,n),this.points.length>0){t.writeVarInt(this.points.length);for(var r=new s(0,0,0,0),i=0;i<this.points.length;i++)this.points[i]._writeTwkbPoint(t,e,r)}return t.buffer},r.prototype._getWkbSize=function(){var t=16;return this.hasZ&&(t+=8),this.hasM&&(t+=8),9+this.points.length*t},r.prototype.toGeoJSON=function(t){var e=o.prototype.toGeoJSON.call(this,t);e.type=a.geoJSON.LineString,e.coordinates=[];for(var n=0;n<this.points.length;n++)this.hasZ?e.coordinates.push([this.points[n].x,this.points[n].y,this.points[n].z]):e.coordinates.push([this.points[n].x,this.points[n].y]);return e}},{"./binarywriter":146,"./geometry":147,"./point":153,"./types":155,util:142}],150:[function(t,e,n){function r(t){a.call(this),this.lineStrings=t||[],this.lineStrings.length>0&&(this.hasZ=this.lineStrings[0].hasZ,this.hasM=this.lineStrings[0].hasM)}e.exports=r;var i=t("util"),o=t("./types"),a=t("./geometry"),s=t("./point"),u=t("./linestring"),l=t("./binarywriter");i.inherits(r,a),r.Z=function(t){var e=new r(t);return e.hasZ=!0,e},r.M=function(t){var e=new r(t);return e.hasM=!0,e},r.ZM=function(t){var e=new r(t);return e.hasZ=!0,e.hasM=!0,e},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();do{t.expectGroupStart(),n.lineStrings.push(new u(t.matchCoordinates(e))),t.expectGroupEnd()}while(t.isMatch([","]));return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var i=t.readUInt32(),o=0;o<i;o++)n.lineStrings.push(a.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=new s(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),o=t.readVarInt(),a=0;a<o;a++){var l=new u;l.hasZ=e.hasZ,l.hasM=e.hasM;for(var c=t.readVarInt(),f=0;f<c;f++)l.points.push(s._readTwkbPoint(t,e,i));n.lineStrings.push(l)}return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&t.coordinates[0].length>0&&(e.hasZ=t.coordinates[0][0].length>2);for(var n=0;n<t.coordinates.length;n++)e.lineStrings.push(u._parseGeoJSON({coordinates:t.coordinates[n]}));return e},r.prototype.toWkt=function(){if(0===this.lineStrings.length)return this._getWktType(o.wkt.MultiLineString,!0);for(var t=this._getWktType(o.wkt.MultiLineString,!1)+"(",e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")"},r.prototype.toWkb=function(){var t=new l(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,o.wkb.MultiLineString),t.writeUInt32LE(this.lineStrings.length);for(var e=0;e<this.lineStrings.length;e++)t.writeBuffer(this.lineStrings[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new l(0,!0),e=a.getTwkbPrecision(5,0,0),n=0===this.lineStrings.length;if(this._writeTwkbHeader(t,o.wkb.MultiLineString,e,n),this.lineStrings.length>0){t.writeVarInt(this.lineStrings.length);for(var r=new s(0,0,0,0),i=0;i<this.lineStrings.length;i++){t.writeVarInt(this.lineStrings[i].points.length);for(var u=0;u<this.lineStrings[i].points.length;u++)this.lineStrings[i].points[u]._writeTwkbPoint(t,e,r)}}return t.buffer},r.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._getWkbSize();return t},r.prototype.toGeoJSON=function(t){var e=a.prototype.toGeoJSON.call(this,t);e.type=o.geoJSON.MultiLineString,e.coordinates=[];for(var n=0;n<this.lineStrings.length;n++)e.coordinates.push(this.lineStrings[n].toGeoJSON().coordinates);return e}},{"./binarywriter":146,"./geometry":147,"./linestring":149,"./point":153,"./types":155,util:142}],151:[function(t,e,n){function r(t){a.call(this),this.points=t||[],this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}e.exports=r;var i=t("util"),o=t("./types"),a=t("./geometry"),s=t("./point"),u=t("./binarywriter");i.inherits(r,a),r.Z=function(t){var e=new r(t);return e.hasZ=!0,e},r.M=function(t){var e=new r(t);return e.hasM=!0,e},r.ZM=function(t){var e=new r(t);return e.hasZ=!0,e.hasM=!0,e},r._parseWkt=function(t,e){var n=new r;return n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"])?n:(t.expectGroupStart(),n.points.push.apply(n.points,t.matchCoordinates(e)),t.expectGroupEnd(),n)},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var i=t.readUInt32(),o=0;o<i;o++)n.points.push(a.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=new s(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),o=t.readVarInt(),a=0;a<o;a++)n.points.push(s._readTwkbPoint(t,e,i));return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&(e.hasZ=t.coordinates[0].length>2);for(var n=0;n<t.coordinates.length;n++)e.points.push(s._parseGeoJSON({coordinates:t.coordinates[n]}));return e},r.prototype.toWkt=function(){if(0===this.points.length)return this._getWktType(o.wkt.MultiPoint,!0);for(var t=this._getWktType(o.wkt.MultiPoint,!1)+"(",e=0;e<this.points.length;e++)t+=this._getWktCoordinate(this.points[e])+",";return t=t.slice(0,-1),t+=")"},r.prototype.toWkb=function(){var t=new u(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,o.wkb.MultiPoint),t.writeUInt32LE(this.points.length);for(var e=0;e<this.points.length;e++)t.writeBuffer(this.points[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new u(0,!0),e=a.getTwkbPrecision(5,0,0),n=0===this.points.length;if(this._writeTwkbHeader(t,o.wkb.MultiPoint,e,n),this.points.length>0){t.writeVarInt(this.points.length);for(var r=new s(0,0,0,0),i=0;i<this.points.length;i++)this.points[i]._writeTwkbPoint(t,e,r)}return t.buffer},r.prototype._getWkbSize=function(){var t=16;return this.hasZ&&(t+=8),this.hasM&&(t+=8),t+=5,9+this.points.length*t},r.prototype.toGeoJSON=function(t){var e=a.prototype.toGeoJSON.call(this,t);e.type=o.geoJSON.MultiPoint,e.coordinates=[];for(var n=0;n<this.points.length;n++)e.coordinates.push(this.points[n].toGeoJSON().coordinates);return e}},{"./binarywriter":146,"./geometry":147,"./point":153,"./types":155,util:142}],152:[function(t,e,n){function r(t){a.call(this),this.polygons=t||[],this.polygons.length>0&&(this.hasZ=this.polygons[0].hasZ,this.hasM=this.polygons[0].hasM)}e.exports=r;var i=t("util"),o=t("./types"),a=t("./geometry"),s=t("./point"),u=t("./polygon"),l=t("./binarywriter");i.inherits(r,a),r.Z=function(t){var e=new r(t);return e.hasZ=!0,e},r.M=function(t){var e=new r(t);return e.hasM=!0,e},r.ZM=function(t){var e=new r(t);return e.hasZ=!0,e.hasM=!0,e},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();do{t.expectGroupStart();var i=[],o=[];for(t.expectGroupStart(),i.push.apply(i,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch([","]);)t.expectGroupStart(),o.push(t.matchCoordinates(e)),t.expectGroupEnd();n.polygons.push(new u(i,o)),t.expectGroupEnd()}while(t.isMatch([","]));return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var i=t.readUInt32(),o=0;o<i;o++)n.polygons.push(a.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=new s(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),o=t.readVarInt(),a=0;a<o;a++){var l=new u;l.hasZ=e.hasZ,l.hasM=e.hasM;for(var c=t.readVarInt(),f=t.readVarInt(),h=0;h<f;h++)l.exteriorRing.push(s._readTwkbPoint(t,e,i));for(h=1;h<c;h++){for(var p=[],d=t.readVarInt(),g=0;g<d;g++)p.push(s._readTwkbPoint(t,e,i));l.interiorRings.push(p)}n.polygons.push(l)}return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&t.coordinates[0].length>0&&t.coordinates[0][0].length>0&&(e.hasZ=t.coordinates[0][0][0].length>2);for(var n=0;n<t.coordinates.length;n++)e.polygons.push(u._parseGeoJSON({coordinates:t.coordinates[n]}));return e},r.prototype.toWkt=function(){if(0===this.polygons.length)return this._getWktType(o.wkt.MultiPolygon,!0);for(var t=this._getWktType(o.wkt.MultiPolygon,!1)+"(",e=0;e<this.polygons.length;e++)t+=this.polygons[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")"},r.prototype.toWkb=function(){var t=new l(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,o.wkb.MultiPolygon),t.writeUInt32LE(this.polygons.length);for(var e=0;e<this.polygons.length;e++)t.writeBuffer(this.polygons[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new l(0,!0),e=a.getTwkbPrecision(5,0,0),n=0===this.polygons.length;if(this._writeTwkbHeader(t,o.wkb.MultiPolygon,e,n),this.polygons.length>0){t.writeVarInt(this.polygons.length);for(var r=new s(0,0,0,0),i=0;i<this.polygons.length;i++){t.writeVarInt(1+this.polygons[i].interiorRings.length),t.writeVarInt(this.polygons[i].exteriorRing.length);for(var u=0;u<this.polygons[i].exteriorRing.length;u++)this.polygons[i].exteriorRing[u]._writeTwkbPoint(t,e,r);for(u=0;u<this.polygons[i].interiorRings.length;u++){t.writeVarInt(this.polygons[i].interiorRings[u].length);for(var c=0;c<this.polygons[i].interiorRings[u].length;c++)this.polygons[i].interiorRings[u][c]._writeTwkbPoint(t,e,r)}}}return t.buffer},r.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.polygons.length;e++)t+=this.polygons[e]._getWkbSize();return t},r.prototype.toGeoJSON=function(t){var e=a.prototype.toGeoJSON.call(this,t);e.type=o.geoJSON.MultiPolygon,e.coordinates=[];for(var n=0;n<this.polygons.length;n++)e.coordinates.push(this.polygons[n].toGeoJSON().coordinates);return e}},{"./binarywriter":146,"./geometry":147,"./point":153,"./polygon":154,"./types":155,util:142}],153:[function(t,e,n){function r(t,e,n,r){o.call(this),this.x=t,this.y=e,this.z=n,this.m=r,this.hasZ=void 0!==this.z,this.hasM=void 0!==this.m}e.exports=r;var i=t("util"),o=t("./geometry"),a=t("./types"),s=t("./binarywriter"),u=t("./zigzag.js");i.inherits(r,o),r.Z=function(t,e,n){var i=new r(t,e,n);return i.hasZ=!0,i},r.M=function(t,e,n){var i=new r(t,e,void 0,n);return i.hasM=!0,i},r.ZM=function(t,e,n,i){var o=new r(t,e,n,i);return o.hasZ=!0,o.hasM=!0,o},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();var i=t.matchCoordinate(e);return n.x=i.x,n.y=i.y,n.z=i.z,n.m=i.m,t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=r._readWkbPoint(t,e);return n.srid=e.srid,n},r._readWkbPoint=function(t,e){return new r(t.readDouble(),t.readDouble(),e.hasZ?t.readDouble():void 0,e.hasM?t.readDouble():void 0)},r._parseTwkb=function(t,e){var n=new r;return n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty?n:(n.x=u.decode(t.readVarInt())/e.precisionFactor,n.y=u.decode(t.readVarInt())/e.precisionFactor,n.z=e.hasZ?u.decode(t.readVarInt())/e.zPrecisionFactor:void 0,n.m=e.hasM?u.decode(t.readVarInt())/e.mPrecisionFactor:void 0,n)},r._readTwkbPoint=function(t,e,n){return n.x+=u.decode(t.readVarInt())/e.precisionFactor,n.y+=u.decode(t.readVarInt())/e.precisionFactor,e.hasZ&&(n.z+=u.decode(t.readVarInt())/e.zPrecisionFactor),e.hasM&&(n.m+=u.decode(t.readVarInt())/e.mPrecisionFactor),new r(n.x,n.y,n.z,n.m)},r._parseGeoJSON=function(t){return r._readGeoJSONPoint(t.coordinates)},r._readGeoJSONPoint=function(t){return 0===t.length?new r:t.length>2?new r(t[0],t[1],t[2]):new r(t[0],t[1])},r.prototype.toWkt=function(){return void 0===this.x&&void 0===this.y&&void 0===this.z&&void 0===this.m?this._getWktType(a.wkt.Point,!0):this._getWktType(a.wkt.Point,!1)+"("+this._getWktCoordinate(this)+")"},r.prototype.toWkb=function(t){var e=new s(this._getWkbSize());return e.writeInt8(1),this._writeWkbType(e,a.wkb.Point,t),void 0===this.x&&void 0===this.y?(e.writeDoubleLE(NaN),e.writeDoubleLE(NaN),this.hasZ&&e.writeDoubleLE(NaN),this.hasM&&e.writeDoubleLE(NaN)):this._writeWkbPoint(e),e.buffer},r.prototype._writeWkbPoint=function(t){t.writeDoubleLE(this.x),t.writeDoubleLE(this.y),this.hasZ&&t.writeDoubleLE(this.z),this.hasM&&t.writeDoubleLE(this.m)},r.prototype.toTwkb=function(){var t=new s(0,!0),e=o.getTwkbPrecision(5,0,0),n=void 0===this.x&&void 0===this.y;return this._writeTwkbHeader(t,a.wkb.Point,e,n),n||this._writeTwkbPoint(t,e,new r(0,0,0,0)),t.buffer},r.prototype._writeTwkbPoint=function(t,e,n){var r=this.x*e.xyFactor,i=this.y*e.xyFactor,o=this.z*e.zFactor,a=this.m*e.mFactor;t.writeVarInt(u.encode(r-n.x)),t.writeVarInt(u.encode(i-n.y)),this.hasZ&&t.writeVarInt(u.encode(o-n.z)),this.hasM&&t.writeVarInt(u.encode(a-n.m)),n.x=r,n.y=i,n.z=o,n.m=a},r.prototype._getWkbSize=function(){var t=21;return this.hasZ&&(t+=8),this.hasM&&(t+=8),t},r.prototype.toGeoJSON=function(t){var e=o.prototype.toGeoJSON.call(this,t);return e.type=a.geoJSON.Point,void 0===this.x&&void 0===this.y?e.coordinates=[]:void 0!==this.z?e.coordinates=[this.x,this.y,this.z]:e.coordinates=[this.x,this.y],e}},{"./binarywriter":146,"./geometry":147,"./types":155,"./zigzag.js":158,util:142}],154:[function(t,e,n){function r(t,e){o.call(this),this.exteriorRing=t||[],this.interiorRings=e||[],this.exteriorRing.length>0&&(this.hasZ=this.exteriorRing[0].hasZ,this.hasM=this.exteriorRing[0].hasM)}e.exports=r;var i=t("util"),o=t("./geometry"),a=t("./types"),s=t("./point"),u=t("./binarywriter");i.inherits(r,o),r.Z=function(t,e){var n=new r(t,e);return n.hasZ=!0,n},r.M=function(t,e){var n=new r(t,e);return n.hasM=!0,n},r.ZM=function(t,e){var n=new r(t,e);return n.hasZ=!0,n.hasM=!0,n},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;for(t.expectGroupStart(),t.expectGroupStart(),n.exteriorRing.push.apply(n.exteriorRing,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch([","]);)t.expectGroupStart(),n.interiorRings.push(t.matchCoordinates(e)),t.expectGroupEnd();return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;var i=t.readUInt32();if(i>0){for(var o=t.readUInt32(),a=0;a<o;a++)n.exteriorRing.push(s._readWkbPoint(t,e));for(a=1;a<i;a++){for(var u=[],l=t.readUInt32(),c=0;c<l;c++)u.push(s._readWkbPoint(t,e));n.interiorRings.push(u)}}return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var i=new s(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),o=t.readVarInt(),a=t.readVarInt(),u=0;u<a;u++)n.exteriorRing.push(s._readTwkbPoint(t,e,i));for(u=1;u<o;u++){for(var l=[],c=t.readVarInt(),f=0;f<c;f++)l.push(s._readTwkbPoint(t,e,i));n.interiorRings.push(l)}return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&t.coordinates[0].length>0&&(e.hasZ=t.coordinates[0][0].length>2);for(var n=0;n<t.coordinates.length;n++){n>0&&e.interiorRings.push([]);for(var i=0;i<t.coordinates[n].length;i++)0===n?e.exteriorRing.push(s._readGeoJSONPoint(t.coordinates[n][i])):e.interiorRings[n-1].push(s._readGeoJSONPoint(t.coordinates[n][i]))}return e},r.prototype.toWkt=function(){return 0===this.exteriorRing.length?this._getWktType(a.wkt.Polygon,!0):this._getWktType(a.wkt.Polygon,!1)+this._toInnerWkt()},r.prototype._toInnerWkt=function(){for(var t="((",e=0;e<this.exteriorRing.length;e++)t+=this._getWktCoordinate(this.exteriorRing[e])+",";for(t=t.slice(0,-1),t+=")",e=0;e<this.interiorRings.length;e++){t+=",(";for(var n=0;n<this.interiorRings[e].length;n++)t+=this._getWktCoordinate(this.interiorRings[e][n])+",";t=t.slice(0,-1),t+=")"}return t+=")"},r.prototype.toWkb=function(t){var e=new u(this._getWkbSize());e.writeInt8(1),this._writeWkbType(e,a.wkb.Polygon,t),this.exteriorRing.length>0?(e.writeUInt32LE(1+this.interiorRings.length),e.writeUInt32LE(this.exteriorRing.length)):e.writeUInt32LE(0);for(var n=0;n<this.exteriorRing.length;n++)this.exteriorRing[n]._writeWkbPoint(e);for(n=0;n<this.interiorRings.length;n++){e.writeUInt32LE(this.interiorRings[n].length);for(var r=0;r<this.interiorRings[n].length;r++)this.interiorRings[n][r]._writeWkbPoint(e)}return e.buffer},r.prototype.toTwkb=function(){var t=new u(0,!0),e=o.getTwkbPrecision(5,0,0),n=0===this.exteriorRing.length;if(this._writeTwkbHeader(t,a.wkb.Polygon,e,n),this.exteriorRing.length>0){t.writeVarInt(1+this.interiorRings.length),t.writeVarInt(this.exteriorRing.length);for(var r=new s(0,0,0,0),i=0;i<this.exteriorRing.length;i++)this.exteriorRing[i]._writeTwkbPoint(t,e,r);for(i=0;i<this.interiorRings.length;i++){t.writeVarInt(this.interiorRings[i].length);for(var l=0;l<this.interiorRings[i].length;l++)this.interiorRings[i][l]._writeTwkbPoint(t,e,r)}}return t.buffer},r.prototype._getWkbSize=function(){var t=16;this.hasZ&&(t+=8),this.hasM&&(t+=8);var e=9;this.exteriorRing.length>0&&(e+=4+this.exteriorRing.length*t);for(var n=0;n<this.interiorRings.length;n++)e+=4+this.interiorRings[n].length*t;return e},r.prototype.toGeoJSON=function(t){var e=o.prototype.toGeoJSON.call(this,t);if(e.type=a.geoJSON.Polygon,e.coordinates=[],this.exteriorRing.length>0){for(var n=[],r=0;r<this.exteriorRing.length;r++)this.hasZ?n.push([this.exteriorRing[r].x,this.exteriorRing[r].y,this.exteriorRing[r].z]):n.push([this.exteriorRing[r].x,this.exteriorRing[r].y]);e.coordinates.push(n)}for(var i=0;i<this.interiorRings.length;i++){for(var s=[],u=0;u<this.interiorRings[i].length;u++)this.hasZ?s.push([this.interiorRings[i][u].x,this.interiorRings[i][u].y,this.interiorRings[i][u].z]):s.push([this.interiorRings[i][u].x,this.interiorRings[i][u].y]);e.coordinates.push(s)}return e}},{"./binarywriter":146,"./geometry":147,"./point":153,"./types":155,util:142}],155:[function(t,e,n){e.exports={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7},geoJSON:{Point:"Point",LineString:"LineString",Polygon:"Polygon",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",GeometryCollection:"GeometryCollection"}}},{}],156:[function(t,e,n){function r(t){this.value=t,this.position=0}e.exports=r;var i=t("./types"),o=t("./point");r.prototype.match=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++)if(0===this.value.substring(this.position).indexOf(t[e]))return this.position+=t[e].length,t[e];return null},r.prototype.matchRegex=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++){var n=this.value.substring(this.position).match(t[e]);if(n)return this.position+=n[0].length,n}return null},r.prototype.isMatch=function(t){this.skipWhitespaces();for(var e=0;e<t.length;e++)if(0===this.value.substring(this.position).indexOf(t[e]))return this.position+=t[e].length,!0;return!1},r.prototype.matchType=function(){var t=this.match([i.wkt.Point,i.wkt.LineString,i.wkt.Polygon,i.wkt.MultiPoint,i.wkt.MultiLineString,i.wkt.MultiPolygon,i.wkt.GeometryCollection]);if(!t)throw new Error("Expected geometry type");return t},r.prototype.matchDimension=function(){switch(this.match(["ZM","Z","M"])){case"ZM":return{hasZ:!0,hasM:!0};case"Z":return{hasZ:!0,hasM:!1};case"M":return{hasZ:!1,hasM:!0};default:return{hasZ:!1,hasM:!1}}},r.prototype.expectGroupStart=function(){if(!this.isMatch(["("]))throw new Error("Expected group start")},r.prototype.expectGroupEnd=function(){if(!this.isMatch([")"]))throw new Error("Expected group end")},r.prototype.matchCoordinate=function(t){var e;if(!(e=t.hasZ&&t.hasM?this.matchRegex([/^(-?\d+\.?\d*)\s+(-?\d+\.?\d*)\s+(-?\d+\.?\d*)\s+(-?\d+\.?\d*)/]):t.hasZ||t.hasM?this.matchRegex([/^(-?\d+\.?\d*)\s+(-?\d+\.?\d*)\s+(-?\d+\.?\d*)/]):this.matchRegex([/^(-?\d+\.?\d*)\s+(-?\d+\.?\d*)/])))throw new Error("Expected coordinates");return t.hasZ&&t.hasM?new o(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])):t.hasZ?new o(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])):t.hasM?new o(parseFloat(e[1]),parseFloat(e[2]),void 0,parseFloat(e[3])):new o(parseFloat(e[1]),parseFloat(e[2]))},r.prototype.matchCoordinates=function(t){var e=[];do{var n=this.isMatch(["("]);e.push(this.matchCoordinate(t)),n&&this.expectGroupEnd()}while(this.isMatch([","]));return e},r.prototype.skipWhitespaces=function(){for(;this.position<this.value.length&&" "===this.value[this.position];)this.position++}},{"./point":153,"./types":155}],157:[function(t,e,n){n.Types=t("./types"),n.Geometry=t("./geometry"),n.Point=t("./point"),n.LineString=t("./linestring"),n.Polygon=t("./polygon"),n.MultiPoint=t("./multipoint"),n.MultiLineString=t("./multilinestring"),n.MultiPolygon=t("./multipolygon"),n.GeometryCollection=t("./geometrycollection")},{"./geometry":147,"./geometrycollection":148,"./linestring":149,"./multilinestring":150,"./multipoint":151,"./multipolygon":152,"./point":153,"./polygon":154,"./types":155}],158:[function(t,e,n){e.exports={encode:function(t){return t<<1^t>>31},decode:function(t){return t>>1^-(1&t)}}},{}],159:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}},{}],160:[function(t,e,n){e.exports=function(t){return L.mapbox.accessToken="pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXFhYTA2bTMyeW44ZG0ybXBkMHkifQ.gUGbDOPUN1v1fTs5SeOR4A","geojson.io"===t?(L.mapbox.config.FORCE_HTTPS=!0,{client_id:"62c753fd0faf18392d85",gatekeeper_url:"https://geojsonioauth.herokuapp.com"}):(L.mapbox.config.HTTP_URL="http://a.tiles.mapbox.com/v4",L.mapbox.config.HTTPS_URL="https://a.tiles.mapbox.com/v4",L.mapbox.config.FORCE_HTTPS=!0,L.mapbox.config.REQUIRE_ACCESS_TOKEN=!0,{GithubAPI:null,client_id:"bb7bbe70bd1f707125bc",gatekeeper_url:"https://localhostauth.herokuapp.com"})}},{}],161:[function(t,e,n){e.exports=function(t){"undefined"!=typeof console&&console&&console.log&&(console.log("%c geojson.io api ","font-family:monospace;font-size:20px;color:darkblue;"),console.log("%cfrom here, you can customize geojson.io to your liking by mucking around with the internals","font-family:monospace;font-size:14px;color:darkblue;"),console.log("%chere's what's available ","color:blue;"),console.log(""),console.log("%c- window.api.map: the leaflet map object","font-weight:bold;"),console.log("%O",t.map),console.log("%c- window.api.mapLayer: the leaflet mapLayer object","font-weight:bold;"),console.log("%O",t.mapLayer),console.log("%c- window.api.drawControl: the leaflet.draw control","font-weight:bold;"),console.log("%O",t.drawControl),console.log(""),console.log("%c- window.api.data: the data model","font-weight:bold;"),console.log("%O",t.data),console.log(""),console.log("%cExample:","font-weight:bold;"),console.log(""),console.log("%c  window.api.map.setView([38, -78], 5);","color:green;"),console.log(""),console.log('%c  window.api.data.mergeFeatures([{ type: "Feature", properties: {}, geometry: { type: "Point", coordinates: [0, 0] } }]);',"color:green;"),window.api={map:t.map,mapLayer:t.mapLayer,drawControl:t.drawControl,data:t.data},d3.rebind(window.api,t.dispatch,"on"))}},{}],162:[function(t,e,n){var r=t("clone"),i=t("xtend"),o=t("../config.js")(location.hostname),a={gist:t("../source/gist"),github:t("../source/github"),local:t("../source/local")};e.exports=function(t){function e(t){var e,n;for(e in t.files)if(n=t.files[e].content,-1!==e.indexOf(".geojson")&&n)return e;for(e in t.files)if(n=t.files[e].content,-1!==e.indexOf(".json")&&n)return e}var n={map:{type:"FeatureCollection",features:[]},dirty:!1,source:null,meta:null,type:"local"},s={};return s.hasFeatures=function(){return!!(n.map&&n.map.features&&n.map.features.length)},s.set=function(e,i){for(var o in e)n[o]="object"==typeof e[o]?r(e[o],!1):e[o];return!1!==e.dirty&&(s.dirty=!0),t.dispatch.change({obj:e,source:i}),s},s.clear=function(){s.set({map:{type:"FeatureCollection",features:[]},dirty:!1,source:null,meta:null,type:"local"})},s.mergeFeatures=function(t,e){return n.map.features=(n.map.features||[]).concat(t.map(function(t){for(var e=t.properties,n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i],a=e[o];t.properties[o]=function(t){var e=parseFloat(t);return e.toString()===t?e:t}(a)}return t})),s.set({map:n.map},e)},s.get=function(t){return n[t]},s.all=function(){return r(n,!1)},s.fetch=function(n,r){switch(n.id.split(":")[0]){case"gist":var o=n.id.split(":")[1].split("/")[1];a.gist.load(o,t,function(n,o){if(n)return r(n,o);var s=e(o);if(void 0===s)return r(n,o);var u=o.files[s];if(!0!==u.truncated)return r(n,i(o,{file:u.filename,content:JSON.parse(u.content)}));a.gist.loadRaw(u.raw_url,t,function(t,e){return t?r(t):r(t,i(o,{file:u.filename,content:JSON.parse(e)}))})});break;case"github":var s=n.id.split("/"),u={user:s[0].split(":")[1],repo:s[1],branch:s[3],path:(s.slice(4)||[]).join("/")};a.github.load(u,t,function(e,n){return e?r(e):a.github.loadRaw(u,n.sha,t,function(t,e){try{return r(t,i(n,{content:JSON.parse(e)}))}catch(t){return location.hash="",r(t)}})})}},s.parse=function(t,n){var r,i,a,u,l,c=o.GithubAPI||"https://github.com/";t.files&&(t.type="gist");var f=t.length?t[t.length-1].type:t.type;switch(t.commit&&(f="commit"),f){case"commit":s.set({source:t.content});break;case"local":s.set({type:"local",map:t.content,path:t.path});break;case"blob":r=t[0].login,i=t[1].name,a=t[2].name,u=t.slice(3).map(function(t){return t.path}).join("/"),s.set({type:"github",source:t,meta:{login:r,repo:i,branch:a,name:t.path},path:u,route:"github:"+[r,i,"blob",a,u].join("/"),url:[c,r,i,"blob",a,u].join("/")}),t.content&&s.set({map:t.content});break;case"file":r=(l=t.html_url.split("/"))[3],i=l[4],a=l[6],s.set({type:"github",source:t,meta:{login:r,repo:i,branch:a,name:t.name,sha:t.sha},map:t.content,path:t.path,route:"github:"+[r,i,"blob",a,t.path].join("/"),url:t.html_url});break;case"gist":u=[r=t.owner&&t.owner.login||"anonymous",t.id].join("/");var h=e(t);try{t.files[h].content&&s.set({map:JSON.parse(t.files[h].content)})}catch(t){console.error(t)}s.set({type:"gist",source:t,meta:{login:r,name:h},path:u,route:"gist:"+u,url:t.html_url})}},s.save=function(e){var n=t.data.get("type");"github"===n?a.github.save(t,e):"gist"===n?a.gist.save(t,e):"local"===n&&t.data.path?a.local.save(t,e):a.gist.save(t,e)},s}},{"../config.js":160,"../source/gist":179,"../source/github":180,"../source/local":181,clone:10,xtend:159}],163:[function(t,e,n){var r=t("qs-hash"),i=t("../lib/zoomextent"),o=t("../ui/flash");e.exports=function(t){function e(e,n){t.container.select(".map").classed("loading",!1);var a;if(e){try{a=e.message||JSON.parse(e.responseText).message.replace(/(http:\/\/\S*)/g,'<a href="$&">$&</a>')}catch(t){a="Sorry, an error occurred."}return o(t.container,a)}t.data.parse(n),r.stringQs(location.hash.substring(1)).map&&2!=t.map.getZoom()&&!t.map.getCenter().equals(new L.LatLng(20,0))||i(t)}return function(n){if(n.id||n.data){var a=d3.event?r.stringQs(d3.event.oldURL.split("#")[1]).id:t.data.get("route");if(n.data){var s=n.data.match(/^(data\:[\w\-]+\/[\w\-]+\,?)/);s&&("data:application/json,"==s[0]?function(e){try{t.data.set({map:JSON.parse(e)}),location.hash="",i(t)}catch(e){return o(t.container,"Could not parse JSON")}}(n.data.replace(s[0],"")):"data:text/x-url,"==s[0]&&function(e){d3.json(e).header("Accept","application/vnd.geo+json").on("load",function(e){t.data.set({map:e}),location.hash="",i(t)}).on("error",function(){return o(t.container,"Could not load external file. External files must be served with CORS and be valid GeoJSON.")}).get()}(n.data.replace(s[0],"")))}else n.id!==a&&(t.container.select(".map").classed("loading",!0),t.data.fetch(n,e))}}}},{"../lib/zoomextent":175,"../ui/flash":185,"qs-hash":89}],164:[function(t,e,n){var r=t("../lib/zoomextent"),i=t("qs-hash");e.exports=function(t){d3.select(window).on("unload",function(){if("local"===t.data.get("type")&&t.data.hasFeatures())try{t.storage.set("recover",t.data.all())}catch(t){}else t.storage.remove("recover")}),t.dispatch.on("change",function(){"local"!==t.data.get("type")&&t.storage.remove("recover")});var e=i.stringQs(location.hash.split("#")[1]||"");if("#new"!==location.hash&&!e.id&&!e.data){var n=t.storage.get("recover");n&&confirm("recover your map from the last time you edited?")?(t.data.set(n),setTimeout(function(){r(t)},100)):t.storage.remove("recover")}}},{"../lib/zoomextent":175,"qs-hash":89}],165:[function(t,e,n){var r=t("../config.js")(location.hostname);e.exports=function(t){var e={};return e.details=function(e){var n=r.GithubAPI?r.GithubAPI+"/api/v3/repos/":"https://api.github.com/repos/",i=t.storage.get("github_repo_details"),o=t.data.get("meta"),a=o.login,s=o.repo;i&&i.login===a&&i.repo===s&&i.when>+new Date-36e5?e(null,i.data):(t.storage.remove("github_repo_details"),d3.json(n+[a,s].join("/")).header("Authorization","token "+t.storage.get("github_token")).on("load",function(n){t.storage.set("github_repo_details",{when:+new Date,data:n}),t.storage.set("github_repo",n),e(null,n)}).on("error",function(n){t.storage.remove("github_repo_details"),e(new Error(n))}).get())},e}},{"../config.js":160}],166:[function(t,e,n){var r=t("qs-hash"),i=t("xtend");e.exports=function(t){function e(){var e=d3.event.oldURL.split("#")[1]||"",n=d3.event.newURL.split("#")[1]||"",i=r.stringQs(e),o=r.stringQs(n);if(function(t){return 0===t.indexOf("gist")||0===t.indexOf("github")||!isNaN(parseInt(t,10))}(e))return function(t){var e;isNaN(parseInt(t,10))?(e=t.split(":"),location.hash="#id="+(0===e[1].indexOf("/")?[e[0],e[1].substring(1)].join(":"):t)):location.hash="#id=gist:/"+t}(e);o.id!==i.id&&t.dispatch.route(o)}function n(){var e=o(),n=function(){var e=o();return i(e,{id:t.data.get("route")})}();n.id&&e.id!==n.id&&(location.hash="#"+r.qsString(n))}function o(){return r.stringQs(window.location.hash.substring(1))}var a={};return a.on=function(){return d3.select(window).on("hashchange.router",e),t.dispatch.on("change.route",n),t.dispatch.route(o()),a},a.off=function(){return d3.select(window).on("hashchange.router",null),a},a}},{"qs-hash":89,xtend:159}],167:[function(t,e,n){var r=t("../config.js")(location.hostname);e.exports=function(t){var e={};if(e.details=function(n){if(!t.storage.get("github_token"))return n(new Error("not logged in"));var i=t.storage.get("github_user_details");if(i&&i.when>+new Date-36e5)n(null,i.data);else{t.storage.remove("github_user_details");var o=r.GithubAPI?r.GithubAPI+"/api/v3":"https://api.github.com";d3.json(o+"/user").header("Authorization","token "+t.storage.get("github_token")).on("load",function(e){t.storage.set("github_user_details",{when:+new Date,data:e}),t.storage.set("github_user",e),n(null,e)}).on("error",function(){e.logout(),t.storage.remove("github_user_details"),n(new Error("not logged in"))}).get()}},e.signXHR=function(t){return e.token()?t.header("Authorization","token "+e.token()):t},e.authenticate=function(){window.location.href=(r.GithubAPI||"https://github.com")+"/login/oauth/authorize?client_id="+r.client_id+"&scope=gist,repo"},e.token=function(e){return t.storage.get("github_token")},e.logout=function(){t.storage.remove("github_token")},e.login=function(){t.storage.remove("github_token")},window.location.search&&0===window.location.search.indexOf("?code")){var n=window.location.search.replace(/\?{0,1}code=([^\#\&]+).*$/g,"$1");d3.select(".map").classed("loading",!0),d3.json(r.gatekeeper_url+"/authenticate/"+n).on("load",function(t){d3.select(".map").classed("loading",!1),t.token&&(window.localStorage.github_token=t.token),-1!==window.location.href.indexOf("?code")&&(window.location.href=window.location.href.replace(/\?code=.*$/,""))}).on("error",function(){d3.select(".map").classed("loading",!1),alert("Authentication with GitHub failed")}).get()}return e}},{"../config.js":160}],168:[function(t,e,n){var r=t("./ui"),i=t("./ui/map"),o=t("./core/data"),a=t("./core/loader"),s=t("./core/router"),u=t("./core/recovery"),l=t("./core/repo"),c=t("./core/user"),f=t("./core/api"),h=t("store"),p=function(){var t={};return t.dispatch=d3.dispatch("change","route"),t.storage=h,t.map=i(t),t.data=o(t),t.dispatch.on("route",a(t)),t.repo=l(t),t.router=s(t),t.user=c(t),t}(),d=r(p).write;d3.select(".geojsonio").call(d),p.recovery=u(p),p.router.on(),f(p)},{"./core/api":161,"./core/data":162,"./core/loader":163,"./core/recovery":164,"./core/repo":165,"./core/router":166,"./core/user":167,"./ui":182,"./ui/map":187,store:104}],169:[function(t,e,n){var r=t("qs-hash");t("leaflet-hash"),L.Hash.prototype.parseHash=function(t){var e=(r.stringQs(t.substring(1)).map||"").split("/");if(3==e.length){var n=parseInt(e[0],10),i=parseFloat(e[1]),o=parseFloat(e[2]);return!(isNaN(n)||isNaN(i)||isNaN(o))&&{center:new L.LatLng(i,o),zoom:n}}return!1},L.Hash.prototype.formatHash=function(t){var e=r.stringQs(location.hash.substring(1)),n=t.getCenter(),i=t.getZoom(),o=Math.max(0,Math.ceil(Math.log(i)/Math.LN2));return e.map=[i,n.lat.toFixed(o),n.lng.toFixed(o)].join("/"),"#"+r.qsString(e)}},{"leaflet-hash":62,"qs-hash":89}],170:[function(t,e,n){(function(n){var r=t("escape-html"),i=t("geojson-random"),o=t("geojson-extent"),a=t("geojson-flatten"),s=t("polyline"),u=t("wkx"),l=t("../lib/zoomextent");e.exports.adduserlayer=function(t,e,n){var i=r(e),o=r(n),a=L.tileLayer(i,{maxZoom:t.map.getMaxZoom()});t.layerControl?(t.map.addLayer(a),t.layerControl.addOverlay(a,o)):(t.layerControl=L.control.layers(null,{},{position:"bottomright",collapsed:!1}).addTo(t.map).addOverlay(a,o),t.map.addLayer(a))},e.exports.zoomextent=function(t){l(t)},e.exports.clear=function(t){t.data.clear()},e.exports.random=function(t,e,n){t.data.mergeFeatures(i(e,n).features,"meta")},e.exports.bboxify=function(t){t.data.set({map:o.bboxify(t.data.get("map"))})},e.exports.flatten=function(t){t.data.set({map:a(t.data.get("map"))})},e.exports.polyline=function(t){var e=prompt("Enter your polyline");try{var n=s.toGeoJSON(e);t.data.set({map:n})}catch(t){alert("Sorry, we were unable to decode that polyline")}},e.exports.wkxBase64=function(t){var e=prompt("Enter your Base64 encoded WKB/EWKB");try{var r=u.Geometry.parse(n.from(e,"base64"));t.data.set({map:r.toGeoJSON()}),l(t)}catch(t){console.error(t),alert("Sorry, we were unable to decode that Base64 encoded WKX data")}},e.exports.wkxHex=function(t){var e=prompt("Enter your Hex encoded WKB/EWKB");try{var r=u.Geometry.parse(n.from(e,"hex"));t.data.set({map:r.toGeoJSON()}),l(t)}catch(t){console.error(t),alert("Sorry, we were unable to decode that Hex encoded WKX data")}},e.exports.wkxString=function(t){var e=prompt("Enter your WKT/EWKT String");try{var n=u.Geometry.parse(e);t.data.set({map:n.toGeoJSON()}),l(t)}catch(t){console.error(t),alert("Sorry, we were unable to decode that WKT data")}}}).call(this,t("buffer").Buffer)},{"../lib/zoomextent":175,buffer:9,"escape-html":19,"geojson-extent":25,"geojson-flatten":26,"geojson-random":28,polyline:86,wkx:157}],171:[function(t,e,n){e.exports=function(t){return function(e){var n=d3.select(e.popup._contentNode);n.selectAll(".cancel").on("click",function(){t.map.closePopup(e.popup)}),n.selectAll(".save").on("click",function(){var r={};n.select("table.marker-properties").selectAll("tr").each(function(){d3.select(this).selectAll("input")[0][0].value&&(r[d3.select(this).selectAll("input")[0][0].value]=function(t){var e=parseFloat(t);return e.toString()===t?e:t}(d3.select(this).selectAll("input")[0][1].value))}),e.popup._source.feature.properties=r,t.data.set({map:t.mapLayer.toGeoJSON()},"popup"),t.map.closePopup(e.popup)}),n.selectAll(".add").on("click",function(){var t=n.select("table.marker-properties tbody").append("tr");t.append("th").append("input").attr("type","text"),t.append("td").append("input").attr("type","text")}),n.selectAll(".delete-invert").on("click",function(){e.popup._source&&t.mapLayer.hasLayer(e.popup._source)&&(t.mapLayer.removeLayer(e.popup._source),t.data.set({map:t.mapLayer.toGeoJSON()},"popup"))})}}},{}],172:[function(t,e,n){function r(t,e){try{var n=new FileReader;n.readAsText(t),n.onload=function(t){t.target&&t.target.result?e(null,t.target.result):e({message:"Dropped file could not be loaded"})},n.onerror=function(t){e({message:"Dropped file was unreadable"})}}catch(t){e({message:"Dropped file was unreadable"})}}function i(t,e,n){function r(t){return(new DOMParser).parseFromString(t,"text/xml")}var i=function(t,e){function n(t){return-1!==r.indexOf(t)}var r=t.name?t.name.toLowerCase():"";return"application/vnd.google-earth.kml+xml"===t.type||n(".kml")?"kml":n(".gpx")?"gpx":n(".geojson")||n(".json")||n(".topojson")?"geojson":"text/csv"===t.type||n(".csv")||n(".tsv")||n(".dsv")?"dsv":n(".xml")||n(".osm")?"xml":n(".poly")?"poly":e&&-1!=e.indexOf("shape_id,shape_pt_lat,shape_pt_lon")?"gtfs":void 0}(t,e);if(!i){(t.name?t.name.toLowerCase():"").split(".");return n({message:"Could not detect file type"})}if("kml"===i){var f=r(e);if(!f)return n({message:"Invalid KML file: not valid XML"});var h;f.getElementsByTagName("NetworkLink").length&&(h={message:"The KML file you uploaded included NetworkLinks: some content may not display. Please export and upload KML without NetworkLinks for optimal performance"}),n(null,a.kml(f),h)}else if("xml"===i){var p,d=r(e);if(!d)return n({message:"Invalid XML file: not valid XML"});(p=l.toGeojson(d)).features.forEach(function(t){t.properties=t.properties.tags}),n(null,p)}else if("gpx"===i)n(null,a.gpx(r(e)));else if("geojson"===i)try{var g=JSON.parse(e);if(g&&"Topology"===g.type&&g.objects){var m={type:"FeatureCollection",features:[]};for(var y in g.objects){var b=o.feature(g,g.objects[y]);b.features?m.features=m.features.concat(b.features):m.features=m.features.concat([b])}return n(null,m)}return n(null,g)}catch(t){return void alert("Invalid JSON file: "+t)}else if("dsv"===i)u.csv2geojson(e,{delimiter:"auto"},function(t,r){return t?n({type:"geocode",result:r,raw:e}):n(null,r)});else if("gtfs"===i)try{return n(null,s(e))}catch(t){return n({message:"Invalid GTFS file"})}else"poly"===i&&n(null,c(e))}var o=t("topojson"),a=t("togeojson"),s=t("gtfs2geojson"),u=t("csv2geojson"),l=t("osmtogeojson"),c=t("polytogeojson"),f=t("geojson-normalize");e.exports.readDrop=function(t){return function(){function e(e,n,r){return!n.length&&e.length?t(e[0],null,r):t(null,{type:"FeatureCollection",features:n.reduce(function(t,e){return(e=f(e))&&(t=t.concat(e.features)),t},[])},r)}var n=[],o=[];if(!(d3.event.dataTransfer&&d3.event.dataTransfer&&d3.event.dataTransfer.files&&d3.event.dataTransfer.files.length))return t({message:"No files were dropped"});d3.event.stopPropagation(),d3.event.preventDefault();var a=d3.event.dataTransfer.files.length;[].forEach.call(d3.event.dataTransfer.files,function(t){r(t,function(r,s){r?(o.push(r),--a||e(o,n)):i(t,s,function(t,r,i){t&&o.push(t),r&&n.push(r),i&&n.push(i),--a||e(o,n,i)})})})}},e.exports.readAsText=r,e.exports.readFile=i},{csv2geojson:11,"geojson-normalize":27,gtfs2geojson:33,osmtogeojson:64,polytogeojson:87,togeojson:106,topojson:"topojson"}],173:[function(t,e,n){e.exports=function(t,e,n){var r;e instanceof L.Marker?(r=n.isValid()?t.getBoundsZoom(n)+2:10,t.setView(e.getLatLng(),r)):"getBounds"in e&&e.getBounds().isValid()&&t.fitBounds(e.getBounds())}},{}],174:[function(t,e,n){var r=t("geojsonhint");e.exports=function(t){return function(e,n){function i(t){return d3.select(document.createElement("div")).attr("class","error-marker").attr("message",t).node()}var o=r.hint(e.getValue());if(e.clearGutter("error"),o instanceof Error)return function(t){var n=t.match(/line (\d+)/);n&&n[1]&&(e.clearGutter("error"),e.setGutterMarker(parseInt(n[1],10)-1,"error",i(t)))}(o.message),t({class:"icon-circle-blank",title:"invalid JSON",message:"invalid JSON"});if(o.length)return function(t){e.clearGutter("error"),t.forEach(function(t){e.setGutterMarker(t.line,"error",i(t.message))})}(o),t({class:"icon-circle-blank",title:"invalid GeoJSON",message:"invalid GeoJSON"});var a=0===n.from.ch&&0===n.from.line&&"paste"==n.origin,s=JSON.parse(e.getValue());try{return t(null,s,a)}catch(e){return t({class:"icon-circle-blank",title:"invalid GeoJSON",message:"invalid GeoJSON"})}}}},{geojsonhint:32}],175:[function(t,e,n){e.exports=function(t){var e=t.mapLayer.getBounds();e.isValid()&&t.map.fitBounds(e)}},{}],176:[function(t,e,n){(function(n){var r=t("marked");e.exports=function(t){function e(t){t.html("").append("div").attr("class","pad2 prose").html(i)}var i=n("PGgyPkhlbHA8L2gyPgoKPHA+TmV3IGhlcmU/IDxzdHJvbmc+Z2VvanNvbi5pbzwvc3Ryb25nPiBpcyBhIHF1aWNrLCBzaW1wbGUgdG9vbCBmb3IgY3JlYXRpbmcsCnZpZXdpbmcsIGFuZCBzaGFyaW5nIG1hcHMuIGdlb2pzb24uaW8gaXMgbmFtZWQgYWZ0ZXIgPGEgaHJlZj0naHR0cDovL2dlb2pzb24ub3JnLycgdGFyZ2V0PSdfYmxhbmsnPkdlb0pTT048L2E+LAphbiBvcGVuIHNvdXJjZSBkYXRhIGZvcm1hdCwgYW5kIGl0IHN1cHBvcnRzIEdlb0pTT04gaW4gYWxsIHdheXMgLSBidXQgYWxzbwphY2NlcHRzIEtNTCwgR1BYLCBDU1YsIEdURlMsIFRvcG9KU09OLCBhbmQgb3RoZXIgZm9ybWF0cy48L3A+Cgo8cD5OZWVkIGV4dHJhIGhlbHAgb3Igc2VlIGEgYnVnPyA8YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9nZW9qc29uLmlvL2lzc3Vlcz9zdGF0ZT1vcGVuJz5PcGVuIGFuIGlzc3VlCiAgICBvbiBnZW9qc29uLmlvJ3MgaXNzdWUgdHJhY2tlci48L2E+Cgo8aDM+SSd2ZSBnb3QgZGF0YTwvaDM+Cgo8cD5JZiB5b3UgaGF2ZSBkYXRhLCBsaWtlIGEgS01MLCBHZW9KU09OLCBvciBDU1YgZmlsZSwganVzdCBkcmFnICZhbXA7IGRyb3AKaXQgb250byB0aGUgcGFnZSBvciBjbGljayAnT3BlbicgYW5kICdGaWxlJyAtIHlvdXIgZGF0YSBzaG91bGQgYXBwZWFyIG9uCnRoZSBtYXAhPC9wPgoKPGgzPkkgd2FudCB0byBkcmF3IGZlYXR1cmVzPC9oMz4KCjxwPkNsaWNrIHRoZSBkcmF3aW5nIHRvb2xzIG9uIHRoZSBsZWZ0LWhhbmQgc2lkZSB0byBkcmF3IHBvaW50cywgcG9seWdvbnMsCmxpbmVzIGFuZCByZWN0YW5nbGVzLiBBZnRlciB5b3UncmUgZG9uZSBkcmF3aW5nIHRoZSBzaGFwZXMsIHlvdSBjYW4gYWRkCmluZm9ybWF0aW9uIHRvIGVhY2ggZmVhdHVyZSBieSBjbGlja2luZyBvbiBpdCwgZWRpdGluZyB0aGUgZmVhdHVyZSdzIHByb3BlcnRpZXMsCmFuZCBjbGlja2luZyAnU2F2ZScuPC9wPgoKPHA+UHJvcGVydGllcyBpbiBHZW9KU09OIGFyZSBzdG9yZWQgYXMgJ2tleSB2YWx1ZSBwYWlycycgLSBzbywgZm9yIGluc3RhbmNlLAppZiB5b3Ugd2FudGVkIHRvIGFkZCBhIG5hbWUgdG8gZWFjaCBmZWF0dXJlLCB0eXBlICduYW1lJyBpbiB0aGUgZmlyc3QgdGFibGUKZmllbGQsIGFuZCB0aGUgbmFtZSBvZiB0aGUgZmVhdHVyZSBpbiB0aGUgc2Vjb25kLjwvcD4KCjxoMz5JIHdhbnQgdG8gdXNlIG15IG1hcCBldmVyeXdoZXJlPC9oMz4KCjxwPllvdSBjYW4gc2hhcmUgbWFwcyBpbiBxdWl0ZSBhIGZldyB3YXlzISBJZiB5b3Ugc2F2ZSB5b3VyIG1hcCBoZXJlLCB0aGUgVVJMCm9mIHRoaXMgcGFnZSB3aWxsIHVwZGF0ZSBhbmQgeW91IGNhbiBsaW5rIHNlbmQgZnJpZW5kcyB0aGUgbGluayB0byBzaGFyZQp0aGUgbWFwLCBvciB5b3UgY2FuIGNsaWNrICdEb3dubG9hZCcgdG8gZ3JhYiB0aGUgcmF3IEdlb0pTT04gZGF0YSBhbmQgdXNlCml0IGluIG90aGVyIHNvZnR3YXJlLCBsaWtlIFRpbGVNaWxsIG9yIExlYWZsZXQuPC9wPgoKPGgzPkknbSBhIGNvZGVyPC9oMz4KCjxwPjxhIGhyZWY9JyNnZW9qc29uLWlvLWFwaSc+Z2VvanNvbi5pbyBoYXMgYW4gYXJyYXkgb2YgY2xpIHRvb2xzPC9hPgp0aGF0IG1ha2UgaXQgZWFzeSB0byBnbyBmcm9tIGEgR2VvSlNPTiBmaWxlIG9uIHlvdXIgY29tcHV0ZXIgdG8gZ2VvanNvbi5pby4KCjxoMz5Qcm90aXBzPzwvaDM+Cgo8dWw+CiAgICA8bGk+PHN0cm9uZz5jbWQrczwvc3Ryb25nPjogc2F2ZSBtYXAgdG8gZ2l0aHViIGdpc3RzCiAgICA8bGk+PHN0cm9uZz5jbWQrYTwvc3Ryb25nPjogZG93bmxvYWQgbWFwIGFzIGdlb2pzb24KICAgIDxsaT48c3Ryb25nPmFycm93IGtleXM8L3N0cm9uZz46IG5hdmlnYXRlIHRoZSBtYXAKPC91bD4KCjxoMz5Qcml2YWN5ICZhbXA7IExpY2Vuc2UgSXNzdWVzPC9oMz4KCjx1bD4KICAgIDxsaT48c3Ryb25nPkNsaWNraW5nIHNhdmU8L3N0cm9uZz4gYnkgZGVmYXVsdCBzYXZlcyB0byBhIHByaXZhdGUKICAgIEdpdEh1YiBHaXN0IC0gc28gaXQgd2lsbCBvbmx5IGJlIGFjY2Vzc2libGUgdG8gcGVvcGxlIHlvdSBzaGFyZSB0aGUgVVJMCiAgICB3aXRoLCBhbmQgY3JlYXRpbmcgaXQgd29uJ3QgYXBwZWFyIGluIHlvdXIgR2l0SHViIHRpbWVsaW5lLgogICAgPGxpPjxzdHJvbmc+VGhlIGRhdGEgeW91IGNyZWF0ZSBhbmQgbW9kaWZ5IGluIGdlb2pzb24uaW88L3N0cm9uZz4gZG9lc24ndAogICAgYWNxdWlyZSBhbnkgYWRkaXRpb25hbCBsaWNlbnNlOiBpZiBpdCdzIHNlY3JldCBhbmQgY29weXJpZ2h0ZWQsIGl0IHdpbGwgcmVtYWluCiAgICB0aGF0IHdheSAtIGl0IGRvZXNuJ3QgaGF2ZSB0byBiZSBwdWJsaWMgb3Igb3BlbiBzb3VyY2UuCjwvdWw+Cg==","base64")+"<br><hr><br>"+r("## Geojson.io API\nYou can interact with geojson.io programmatically in two ways:\n\n* [URL parameters](#url-api)\n* [Browser console](#console-api)\n* [Protips](#protips)\n\n## URL API\nYou can do a few interesting things with just URLs and geojson.io. Here are the\ncurrent URL formats.\n\n### `map`\n\nOpen the map at a specific location. The argument is numbers separated by `/`\nin the form `zoom/latitude/longitude`.\n\n#### Example:\n\nhttp://geojson.io/#map=2/20.0/0.0\n\n\n### `data=data:application/json,`\n\nOpen the map and load a chunk of [GeoJSON](http://geojson.org/) data from a\nURL segment directly onto the map. The GeoJSON data should be encoded\nas per `encodeURIComponent(JSON.stringify(geojson_data))`.\n\n#### Example:\n\nhttp://geojson.io/#data=data:application/json,%7B%22type%22%3A%22LineString%22%2C%22coordinates%22%3A%5B%5B0%2C0%5D%2C%5B10%2C10%5D%5D%7D\n\n\n### `data=data:text/x-url,`\n\nLoad GeoJSON data from a URL on the internet onto the map. The URL must\nrefer directly to a resource that is:\n\n* Freely accessible (not behind a password)\n* Supports [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)\n* Is valid GeoJSON\n\nThe URL should be encoded as per `encodeURIComponent(url)`.\n\n#### Example:\n\nhttp://geojson.io/#data=data:text/x-url,http%3A%2F%2Fapi.tiles.mapbox.com%2Fv3%2Ftmcw.map-gdv4cswo%2Fmarkers.geojson\n\n\n### `id=gist:`\n\nLoad GeoJSON data from a [GitHub Gist](https://gist.github.com/), given an argument\nin the form of `login/gistid`. The Gist can be public or private, and must\ncontain a file with a `.geojson` extension that is valid GeoJSON.\n\n#### Example:\n\nhttp://geojson.io/#id=gist:tmcw/e9a29ad54dbaa83dee08&map=8/39.198/-76.981\n\n\n### `id=github:`\n\nLoad a file from a GitHub repository. You must have access to the file, and\nit must be valid GeoJSON.\n\nThe url is in the form:\n\n    login/repository/blob/branch/filepath\n\n#### Example:\n\nhttp://geojson.io/#id=github:benbalter/dc-wifi-social/blob/master/bars.geojson&map=14/38.9140/-77.0302\n\n## Console API\n\n[Pop open your browser console](http://debugbrowser.com/) and see the beautiful\nexamples: geojson.io has started to expose a subset of its inner workings for\nyou to mess around with:\n\n\n### `window.api.map`\n\nThe [Leaflet](http://leafletjs.com/) map that you see and use on the site. See\nthe [Leaflet API](http://leafletjs.com/reference.html) for all the things you\ncan do with it.\n\nFor instance, you could add another map layer:\n\n```js\nwindow.api.map.addLayer(L.tileLayer('http://tile.stamen.com/watercolor/{z}/{x}/{y}.jpg'))\n```\n\n### `window.api.data`\n\nThe data model. See the [code to get an idea of how it works](https://github.com/mapbox/geojson.io/blob/gh-pages/src/core/data.js#L48-L90) -\nyou'll want to use stuff like `data.set({ map: { .. your geojson map information .. })`\nand `data.get('map')` and `data.mergeFeatures([arrayoffeatures])` to do your\ndirty business.\n\n## `window.api.mapLayer`\n\nThis is the Leaflet featureGroup that gets filled with features as you draw\nthem. You can operate on this directly to do advanced stuff like\nselecting a feature with its id:\n\n```js\nvar layers = [];\nwindow.api.mapLayer.eachLayer(l => { layers.push(l); });\nlayers.find(l => l.feature.id == 'a').openPopup();\n```\n\nThat example uses [arrow functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)\nwhich are supported in Chrome & Firefox.\n\n## `window.api.drawControl`\n\nExposes the [Leaflet.Draw](https://github.com/Leaflet/Leaflet.draw) control\ninstance in the console.\n\n## `window.api.on(event, fn)`\n\nExposes d3 events, including `change`.\n\n## Protips\n\nTo include `turf` from [turf](https://github.com/turfjs/turf) so you can manipulate features\nwith its GIS features, run this in the CLI, which will download the script and evaluate it.\n\n```js\nfetch('https://npmcdn.com/@turf/turf@3.1.1/turf.js').then(t => t.text()).then(eval)\n```\n");return e.off=function(){},e}}).call(this,t("buffer").Buffer)},{buffer:9,marked:63}],177:[function(t,e,n){var r=t("../lib/validate"),i=t("../lib/zoomextent"),o=t("../ui/saver.js");e.exports=function(t){function e(){return o(t),!1}function n(e){var n=e.html("").append("textarea"),o=CodeMirror.fromTextArea(n.node(),{mode:"application/json",matchBrackets:!0,tabSize:2,gutters:["error"],theme:"eclipse",autofocus:window===window.top,keyMap:"tabSpace",lineNumbers:!0});o.on("change",r(function(e,n,r){e||(t.data.set({map:n},"json"),r&&i(t))})),t.dispatch.on("change.json",function(e){if("json"!==e.source){var n=o.getScrollInfo();o.setValue(JSON.stringify(t.data.get("map"),null,2)),o.scrollTo(n.left,n.top)}}),o.setValue(JSON.stringify(t.data.get("map"),null,2))}return CodeMirror.keyMap.tabSpace={Tab:function(t){var e=new Array(t.getOption("indentUnit")+1).join(" ");t.replaceSelection(e,"end","+input")},"Ctrl-S":e,"Cmd-S":e,fallthrough:["default"]},n.off=function(){t.dispatch.on("change.json",null)},n}},{"../lib/validate":174,"../lib/zoomextent":175,"../ui/saver.js":191}],178:[function(t,e,n){var r=t("d3-metatable")(d3),i=t("../lib/smartzoom.js");e.exports=function(t){function e(e){function n(){var n,a=t.data.get("map");a&&(a.geometry||a.features&&a.features.length)?(n=a.geometry?[a.properties]:a.features.map(o),e.select(".blank-banner").remove(),e.data([n]).call(r().on("change",function(e,n){var r=t.data.get("map");r.geometry?r.properties=e:r.features[n].properties=e,t.data.set("map",r)}).on("rowfocus",function(e,n){var r=t.mapLayer.getBounds(),o=0;t.mapLayer.eachLayer(function(e){n===o++&&i(t.map,e,r)})}))):e.html("").append("div").attr("class","blank-banner center").text("no features")}function o(t){return t.properties}e.html(""),t.dispatch.on("change.table",function(t){n()}),n()}return e.off=function(){t.dispatch.on("change.table",null)},e}},{"../lib/smartzoom.js":173,"d3-metatable":12}],179:[function(t,e,n){var r="<!DOCTYPE html>\n<html>\n<head>\n  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />\n  <style>\n  body { margin:0; padding:0; }\n  #map { position:absolute; top:0; bottom:0; width:100%; }\n  .marker-properties {\n    border-collapse:collapse;\n    font-size:11px;\n    border:1px solid #eee;\n    margin:0;\n}\n.marker-properties th {\n    white-space:nowrap;\n    border:1px solid #eee;\n    padding:5px 10px;\n}\n.marker-properties td {\n    border:1px solid #eee;\n    padding:5px 10px;\n}\n.marker-properties tr:last-child td,\n.marker-properties tr:last-child th {\n    border-bottom:none;\n}\n.marker-properties tr:nth-child(even) th,\n.marker-properties tr:nth-child(even) td {\n    background-color:#f7f7f7;\n}\n  </style>\n  <script src='//api.tiles.mapbox.com/mapbox.js/v2.2.2/mapbox.js'><\/script>\n  <script src='//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js' ><\/script>\n  <link href='//api.tiles.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />\n</head>\n<body>\n<div id='map'></div>\n<script type='text/javascript'>\nL.mapbox.accessToken = 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXFhYTA2bTMyeW44ZG0ybXBkMHkifQ.gUGbDOPUN1v1fTs5SeOR4A';\nvar map = L.mapbox.map('map');\n\nL.mapbox.tileLayer('mapbox.streets').addTo(map);\n\n$.getJSON('map.geojson', function(geojson) {\n    var geojsonLayer = L.mapbox.featureLayer(geojson).addTo(map);\n    var bounds = geojsonLayer.getBounds();\n    if (bounds.isValid()) {\n        map.fitBounds(geojsonLayer.getBounds());\n    } else {\n        map.setView([0, 0], 2);\n    }\n    geojsonLayer.eachLayer(function(l) {\n        showProperties(l);\n    });\n});\n\nfunction showProperties(l) {\n    var properties = l.toGeoJSON().properties;\n    var table = document.createElement('table');\n    table.setAttribute('class', 'marker-properties display')\n    for (var key in properties) {\n        var tr = createTableRows(key, properties[key]);\n        table.appendChild(tr);\n    }\n    if (table) l.bindPopup(table);\n}\n\nfunction createTableRows(key, value) {\n    var tr = document.createElement('tr');\n    var th = document.createElement('th');\n    var td = document.createElement('td');\n    key = document.createTextNode(key);\n    value = document.createTextNode(value);\n    th.appendChild(key);\n    td.appendChild(value);\n    tr.appendChild(th);\n    tr.appendChild(td);\n    return tr\n}\n\n<\/script>\n</body>\n</html>\n",i=t("../config.js")(location.hostname),o=i.GithubAPI?i.GithubAPI+"/api/v3":"https://api.github.com";e.exports.save=function(t,e){var n=t.data.get("source"),r=t.data.get("meta"),i=r&&r.name||"map.geojson",a=t.data.get("map");n&&n.description,!!n&&n.public,t.user.details(function(n,s){var u="POST",l=t.data.get("source"),c={},f=o+"/gists";!n&&s&&s.login&&r&&l&&l.id&&r.login&&s.login===r.login?(f+="/"+l.id,u="PATCH"):!n&&l&&l.id&&(f+="/"+l.id+"/forks"),c[i]={content:JSON.stringify(a,null,2)},t.user.signXHR(d3.json(f)).on("load",function(t){t.type="gist",e(null,t)}).on("error",function(t){var n;try{n=JSON.parse(t.responseText).message.replace(/(http:\/\/\S*)/g,'<a href="$&">$&</a>')}catch(t){n="Sorry, an error occurred"}e(n)}).send(u,JSON.stringify({files:c}))})},e.exports.saveBlocks=function(t,e){d3.json(o+"/gists").on("load",function(t){e(null,t)}).on("error",function(t){var n;n=JSON.parse(t.responseText).message.replace(/(http:\/\/\S*)/g,'<a href="$&">$&</a>'),e(n)}).send("POST",JSON.stringify({description:"via:geojson.io",public:!1,files:{"index.html":{content:r},"map.geojson":{content:JSON.stringify(t)}}}))},e.exports.load=function(t,e,n){var r=o+"/gists/";e.user.signXHR(d3.json(r+t)).on("load",function(t){n(null,t)}).on("error",function(t){n(t,null)}).get()},e.exports.loadRaw=function(t,e,n){e.user.signXHR(d3.text(t)).on("load",function(t){n(null,t)}).on("error",function(t){n(t,null)}).get()}},{"../config.js":160}],180:[function(t,e,n){e.exports.save=function(t,e){var n=t.data.get("source"),r=t.data.get("meta"),o=t.data.get("newpath"),a=r&&r.name||"map.geojson",s=t.data.get("map");return-1===navigator.appVersion.indexOf("MSIE 9")&&window.XMLHttpRequest?localStorage.github_token?void t.repo.details(function(u,l){var c,f,h="POST",p={};if(!u&&l.permissions.push){if(!(c=t.commitMessage||prompt("Commit message:")))return;f=n.url,h="PUT";var d={message:c,branch:r.branch,content:btoa(encodeURIComponent(JSON.stringify(s,null,2)).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))};o&&(d.path=o,t.data.set({newpath:null})),n.sha&&(d.sha=n.sha)}else f=i+"/gists",p[a]={content:JSON.stringify(s,null,2)},d={files:p};t.user.signXHR(d3.json(f)).on("load",function(t){e(null,t)}).on("error",function(t){var n;try{n=JSON.parse(t.responseText).message.replace(/(http:\/\/\S*)/g,'<a href="$&">$&</a>')}catch(t){n="Sorry, an error occurred."}e(n)}).send(h,JSON.stringify(d))}):alert("You need to log in with GitHub to commit changes"):alert("Sorry, saving and sharing is not supported in IE9 and lower. Please use a modern browser to enjoy the full featureset of geojson.io")},e.exports.load=function(t,e,n){e.user.signXHR(d3.json(function(t){return i+"/repos/"+t.user+"/"+t.repo+"/contents/"+t.path+"?ref="+t.branch}(t))).on("load",function(t){n(null,t)}).on("error",function(t){n(t,null)}).get()},e.exports.loadRaw=function(t,e,n,r){n.user.signXHR(d3.text(function(t,e){return i+"/repos/"+t.user+"/"+t.repo+"/git/blobs/"+e}(t,e))).on("load",function(t){r(null,t)}).on("error",function(t){r(t,null)}).header("Accept","application/vnd.github.raw").get()};var r=t("../config.js")(location.hostname),i=r.GithubAPI?r.GithubAPI+"/api/v3":"https://api.github.com"},{"../config.js":160}],181:[function(t,e,n){e.exports.save=function(t,e){var n=t.data.get("path"),r=t.data.get("map"),i=JSON.stringify(r,null,2);fs.writeFile(n,i,function(t,i){e(null,{type:"local",path:n,content:r})})}},{}],182:[function(t,e,n){var r=t("./ui/mode_buttons"),i=t("./ui/file_bar"),o=t("./ui/dnd"),a=t("./ui/user"),s=t("./ui/layer_switch");e.exports=function(t){function e(e){var n=e.append("div").attr("class","container");return n.append("div").attr("class","map").call(t.map).call(s(t)),t.container=n,n}return{read:e,write:function(n){var s=e(n),u=s.append("div").attr("class","right"),l=u.append("div").attr("class","top");l.append("button").attr("class","collapse-button").attr("title","Collapse").on("click",function(){d3.select("body").classed("fullscreen",!d3.select("body").classed("fullscreen"));var e=d3.select("body").classed("fullscreen");d3.select(this).select(".icon").classed("icon-caret-up",!e).classed("icon-caret-down",e),t.map.invalidateSize()}).append("class","span").attr("class","icon icon-caret-up");var c=u.append("div").attr("class","pane");l.append("div").attr("class","user fr pad1 deemphasize").call(a(t)),l.append("div").attr("class","buttons").call(r(t,c)),s.append("div").attr("class","file-bar").call(i(t)),o(t)}}}},{"./ui/dnd":183,"./ui/file_bar":184,"./ui/layer_switch":186,"./ui/mode_buttons":190,"./ui/user":193}],183:[function(t,e,n){var r=t("../lib/readfile.js").readDrop,i=t("./flash.js"),o=t("../lib/zoomextent");e.exports=function(t){function e(){d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.dataTransfer.dropEffect="copy",d3.select("body").classed("dragover",!0)}d3.select("body").attr("dropzone","copy").on("drop.import",r(function(e,n,r){e&&e.message&&i(t.container,e.message).classed("error","true"),n&&n.features&&(t.data.mergeFeatures(n.features),r?i(t.container,r.message):i(t.container,"Imported "+n.features.length+" features.").classed("success","true"),o(t)),d3.select("body").classed("dragover",!1)})).on("dragenter.import",e).on("dragleave.import",function(){d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.dataTransfer.dropEffect="copy",d3.select("body").classed("dragover",!1)}).on("dragover.import",e)}},{"../lib/readfile.js":172,"../lib/zoomextent":175,"./flash.js":185}],184:[function(t,e,n){var r=t("shp-write"),i=t("clone"),o=t("geojson2dsv"),a=t("topojson"),s=t("filesaver.js"),u=t("tokml"),l=t("@mapbox/github-file-browser"),c=t("@mapbox/gist-map-browser"),f=t("geojson-normalize"),h=t("wellknown"),p=t("./share"),d=t("./modal.js"),g=t("./flash"),m=t("../lib/zoomextent"),y=t("../lib/readfile"),b=t("../lib/meta.js"),v=t("../ui/saver.js"),w=t("../config.js")(location.hostname);e.exports=function(t){function e(t,e,n){return t[e]=n,!0}var n="undefined"!=typeof ArrayBuffer,_=/a\.tiles\.mapbox.com/.test(L.mapbox.config.HTTP_URL),x=!!w.GithubAPI,k=x?w.GithubAPI+"/api/v3":"https://api.github.com",S=[{title:"GeoJSON",action:function(){d3.event&&d3.event.preventDefault();var e=JSON.stringify(t.data.get("map")),n=t.data.get("meta");s(new Blob([e],{type:"text/plain;charset=utf-8"}),n&&n.name||"map.geojson")}},{title:"TopoJSON",action:function(){var n=JSON.stringify(a.topology({collection:i(t.data.get("map"))},{"property-transform":e}));s(new Blob([n],{type:"text/plain;charset=utf-8"}),"map.topojson")}},{title:"CSV",action:function(){d3.event&&d3.event.preventDefault();var e=o(t.data.get("map"));s(new Blob([e],{type:"text/plain;charset=utf-8"}),"points.csv")}},{title:"KML",action:function(){d3.event&&d3.event.preventDefault();var e=u(t.data.get("map"));t.data.get("meta"),s(new Blob([e],{type:"text/plain;charset=utf-8"}),"map.kml")}},{title:"WKT",action:function(){d3.event&&d3.event.preventDefault();var e=t.data.get("map").features;if(0!==e.length){var n=e.map(h.stringify).join("\n");t.data.get("meta"),s(new Blob([n],{type:"text/plain;charset=utf-8"}),"map.wkt")}}}];return n&&S.push({title:"Shapefile",action:function(){d3.event&&d3.event.preventDefault(),d3.select(".map").classed("loading",!0);try{r.download(t.data.get("map"))}finally{d3.select(".map").classed("loading",!1)}}}),function(e){function n(){d3.event&&d3.event.preventDefault(),v(t)}function r(){var e=d3.select("body").append("input").attr("type","file").style("visibility","hidden").style("position","absolute").style("height","0").on("change",function(){var n=this.files;n&&n[0]&&(y.readAsText(n[0],function(e,r){y.readFile(n[0],r,i),n[0].path&&t.data.set({path:n[0].path})}),e.remove())});e.node().click()}function i(e,n,r){(n=f(n))&&(t.data.mergeFeatures(n.features),r?g(t.container,r.message):g(t.container,"Imported "+n.features.length+" features.").classed("success","true"),m(t))}var o=[{title:"Save",action:_||x?n:function(){},children:S},{title:"New",action:function(){window.open(window.location.origin+window.location.pathname+"#new")}},{title:"Meta",action:function(){},children:[{title:"Add map layer",alt:"Add a custom tile layer",action:function(){var e=prompt("Layer URL \n(http://tile.stamen.com/watercolor/{z}/{x}/{y}.jpg)");if(null!==e){var n=prompt("Layer name");null!==n&&b.adduserlayer(t,e,n)}}},{title:"Zoom to features",alt:"Zoom to the extent of all features",action:function(){b.zoomextent(t)}},{title:"Clear",alt:"Delete all features from the map",action:function(){confirm("Are you sure you want to delete all features from this map?")&&b.clear(t)}},{title:"Random: Points",alt:"Add random points to your map",action:function(){var e=prompt("Number of points (default: 100)");if(null!==e){var n=parseInt(e,10);isNaN(n)&&(n=100),b.random(t,n,"point")}}},{title:"Add bboxes",alt:"Add bounding box members to all applicable GeoJSON objects",action:function(){b.bboxify(t)}},{title:"Flatten Multi Features",alt:"Flatten MultiPolygons, MultiLines, and GeometryCollections into simple geometries",action:function(){b.flatten(t)}},{title:"Load encoded polyline",alt:"Decode and show an encoded polyline. Precision 5 is supported.",action:function(){b.polyline(t)}},{title:"Load WKB Base64 Encoded String",alt:"Decode and show WKX data",action:function(){b.wkxBase64(t)}},{title:"Load WKB Hex Encoded String",alt:"Decode and show WKX data",action:function(){b.wkxHex(t)}},{title:"Load WKT String",alt:"Decode and show WKX data",action:function(){b.wkxString(t)}}]}];_||x?(o.unshift({title:"Open",children:[{title:"File",alt:"GeoJSON, TopoJSON, GTFS, KML, CSV, GPX and OSM XML supported",action:r},{title:"GitHub",alt:"GeoJSON files in GitHub Repositories",authenticated:!0,action:function(){if(!t.user.token())return g(t.container,"You must authenticate to use this API.");var e=d(d3.select("div.geojsonio"));e.select(".m").attr("class","modal-splash modal col6"),e.select(".content").append("div").attr("class","header pad2 fillD").append("h1").text("GitHub"),l(t.user.token(),!1,k).open().onclick(function(n){if(n&&n.length){var r=n[n.length-1];if(!r.path)throw new Error("last is invalid: "+JSON.stringify(r));if(!r.path.match(/\.(geo)?json/i))return alert("only GeoJSON files are supported from GitHub");"blob"===r.type&&l.request("/repos/"+n[1].full_name+"/git/blobs/"+r.sha,function(r,i){n.content=JSON.parse(decodeURIComponent(Array.prototype.map.call(atob(i[0].content),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))),t.data.parse(n),m(t),e.close()})}}).appendTo(e.select(".content").append("div").attr("class","repos pad2").node())}},{title:"Gist",alt:"GeoJSON files in GitHub Gists",authenticated:!0,action:function(){if(!t.user.token())return g(t.container,"You must authenticate to use this API.");var e=d(d3.select("div.geojsonio"));e.select(".m").attr("class","modal-splash modal col6"),c(t.user.token(),k).open().onclick(function(n){t.data.parse(n),m(t),e.close()}).appendTo(e.select(".content").append("div").attr("class","repos pad2").node())}}]}),o[1].children.unshift({title:"GitHub",alt:"GeoJSON files in GitHub Repositories",authenticated:!0,action:function(){if(!t.user.token())return g(t.container,"You must authenticate to use this API.");var e=d(d3.select("div.geojsonio"));e.select(".m").attr("class","modal-splash modal col6"),e.select(".content").append("div").attr("class","header pad2 fillD").append("h1").text("GitHub"),l(t.user.token(),!0,k).open().onclick(function(n){if(n&&n.length){var r,i,o=n[n.length-1];if("new"===o.type){var a=prompt("New file name");if(!a)return void e.close();(r=n.slice(3)).pop(),r.push({path:a}),i=r.map(function(t){return t.path}).join("/"),t.data.set({source:{url:k+"/repos/"+n[0].login+"/"+n[1].name+"/contents/"+i+"?ref="+n[2].name},type:"github",meta:{branch:n[2].name,login:n[0].login,repo:n[1].name}}),t.data.set({newpath:i+a}),e.close(),v(t)}else"blob"===o.type&&(i=(r=n.slice(3)).map(function(t){return t.path}).join("/"),t.data.set({source:{url:k+"/repos/"+n[0].login+"/"+n[1].name+"/contents/"+i+"?ref="+n[2].name,sha:o.sha},type:"github",meta:{branch:n[2].name,login:n[0].login,repo:n[1].name}}),e.close(),v(t))}}).appendTo(e.select(".content").append("div").attr("class","repos pad2").node())}},{title:"Gist",alt:"GeoJSON files in GitHub Gists",authenticated:!0,action:function(){d3.event&&d3.event.preventDefault(),t.data.set({type:"gist"}),v(t)}}),_&&o.splice(3,0,{title:"Share",action:function(){t.container.call(p(t))}})):o.unshift({title:"Open",alt:"CSV, GTFS, KML, GPX, and other filetypes",action:r});var a=e.append("div").attr("class","inline").selectAll("div.item").data(o).enter().append("div").attr("class","item"),s=a.append("a").attr("class","parent").on("click",function(t){t.action&&t.action.apply(this,t)}).text(function(t){return" "+t.title});a.each(function(t){t.children&&d3.select(this).append("div").attr("class","children").call(function(t){return function(e){e.selectAll("a").data(t).enter().append("a").attr("title",function(t){if("File"==t.title||"GitHub"==t.title||"Gist"==t.title||"Add map layer"==t.title||"Zoom to features"==t.title||"Clear"==t.title||"Random: Points"==t.title||"Add bboxes"==t.title||"Flatten Multi Features"==t.title)return t.alt}).text(function(t){return t.title}).on("click",function(t){t.action.apply(this,t)})}}(t.children))});var u=e.append("div").attr("class","name");if(_||x)var h=u.append("a").attr("target","_blank").attr("class","icon-file-alt"),w=u.append("span").attr("class","filename").text("unsaved");t.dispatch.on("change.filebar",function(e){var n=e.obj,r=n.type,i=n.path;(_||x)&&w.text(i||"unsaved").classed("deemphasize",t.data.dirty),(_||x)&&h.attr("href",n.url).attr("class",function(t){return"github"==t?"icon-github":"gist"==t?"icon-github-alt":"icon-file-alt"}(r)),function(t){s.filter(function(t){return"Save"===t.title}).select("span.title").text(t)}("github"==r?"Commit":"Save")}),d3.select(document).call(d3.keybinding("file_bar").on("+o",function(){r(),d3.event.preventDefault()}).on("+s",n))}}},{"../config.js":160,"../lib/meta.js":170,"../lib/readfile":172,"../lib/zoomextent":175,"../ui/saver.js":191,"./flash":185,"./modal.js":189,"./share":192,"@mapbox/gist-map-browser":2,"@mapbox/github-file-browser":3,clone:10,"filesaver.js":21,"geojson-normalize":27,geojson2dsv:31,"shp-write":92,tokml:107,topojson:"topojson",wellknown:143}],185:[function(t,e,n){var r=t("./message");e.exports=function(t,e){"use strict";var n=r(t);return e&&n.select(".content").html(e),setTimeout(function(){n.transition().style("opacity",0).remove()},5e3),n}},{"./message":188}],186:[function(t,e,n){e.exports=function(t){return function(e){var n;n=/a\.tiles\.mapbox.com/.test(L.mapbox.config.HTTP_URL)?[{title:"Mapbox",layer:L.mapbox.tileLayer("mapbox.streets")},{title:"Satellite",layer:L.mapbox.tileLayer("mapbox.satellite")},{title:"OCM",layer:L.tileLayer("https://a.tile.thunderforest.com/cycle/{z}/{x}/{y}.png",{attribution:'Maps &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, Data &copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})},{title:"OSM",layer:L.tileLayer("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})}]:[{title:"Mapbox",layer:L.mapbox.tileLayer("mapbox.osm-bright")},{title:"Mapbox Outdoors",layer:L.mapbox.tileLayer("mapbox.mapbox-outdoors")},{title:"Satellite",layer:L.mapbox.tileLayer("mapbox.satellite-full")}];var r=function(e){var r=this instanceof d3.selection?this.node():this;i.classed("active",function(){return r===this}),n.forEach(function(n){var r=e instanceof d3.selection?e.datum():e;n.layer==r.layer?t.map.addLayer(r.layer):t.map.hasLayer(n.layer)&&t.map.removeLayer(n.layer)})},i=e.append("div").attr("class","layer-switch").selectAll("button").data(n).enter().append("button").attr("class","pad0x").on("click",r).text(function(t){return t.title});i.filter(function(t,e){return 0===e}).call(r)}}},{}],187:[function(t,e,n){function r(t,e){e.clearLayers(),L.geoJson(t,{style:L.mapbox.simplestyle.style,pointToLayer:function(t,e){return t.properties||(t.properties={}),L.mapbox.marker.style(t,e)}}).eachLayer(function(t){!function(t){var e=JSON.parse(JSON.stringify(t.toGeoJSON().properties)),n="",r="",i={};for(var s in e){var c=o(s);"object"==typeof e[s]?i[c]=o(JSON.stringify(e[s])):i[c]=o(e[s])}if(i){Object.keys(i).length||(i={"":""}),t.feature&&t.feature.geometry&&u&&("Point"!==t.feature.geometry.type&&"MultiPoint"!==t.feature.geometry.type||("marker-color"in i||(n+='<tr class="style-row"><th><input type="text" value="marker-color"'+(u?"":" readonly")+' /></th><td><input type="color" value="#7E7E7E"'+(u?"":" readonly")+" /></td></tr>"),"marker-size"in i||(n+='<tr class="style-row"><th><input type="text" value="marker-size"'+(u?"":" readonly")+' /></th><td><input type="text" list="marker-size" value="medium"'+(u?"":" readonly")+' /><datalist id="marker-size"><option value="small"><option value="medium"><option value="large"></datalist></td></tr>'),"marker-symbol"in i||(n+='<tr class="style-row"><th><input type="text" value="marker-symbol"'+(u?"":" readonly")+' /></th><td><input type="text" list="marker-symbol" value=""'+(u?"":" readonly")+' /><datalist id="marker-symbol">'+f+"</datalist></td></tr>")),"LineString"!==t.feature.geometry.type&&"MultiLineString"!==t.feature.geometry.type&&"Polygon"!==t.feature.geometry.type&&"MultiPolygon"!==t.feature.geometry.type||("threat"in i||(n+='<tr class="style-row"><th><input type="text" value="threat"'+(u?"":" readonly")+' /></th><td><input type="text" list="threat" value=""'+(u?"":" readonly")+' /><datalist id="threat"><option value="High Winds"><option value="Duststorm"><option value="Tornado"></datalist> </td></tr>'),"threat_detail"in i||(n+='<tr class="style-row"><th><input type="text" value="threat_detail"'+(u?"":" readonly")+' /></th><td><input type="text" list="threatDetail" value=""'+(u?"":" readonly")+' /><datalist id="threatDetail"><option value="35kt to 50 kt winds expected"><option value="less than 1 mile visibility expected"><option value="Tornadoes expected"></datalist> </td></tr>'),"time"in i||(n+='<tr class="style-row"><th><input type="text" value="time"'+(u?"":" readonly")+' /></th><td><input type="datetime-local" value=""'+(u?"":" readonly")+" /></td></tr>")));for(var h in i)n+="marker-color"!=h&&"stroke"!=h&&"fill"!=h||!u?"marker-size"==h&&u?'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="text" list="marker-size" value="'+i[h]+'"'+(u?"":" readonly")+' /><datalist id="marker-size"><option value="small"><option value="medium"><option value="large"></datalist></td></tr>':"marker-symbol"==h&&u?'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="text" list="marker-symbol" value="'+i[h]+'"'+(u?"":" readonly")+' /><datalist id="marker-symbol">'+f+"</datalist></td></tr>":"stroke-width"==h&&u?'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="number" min="0" step="0.1" value="'+i[h]+'"'+(u?"":" readonly")+" /></td></tr>":"stroke-opacity"!=h&&"fill-opacity"!=h||!u?"time"==h&&u?'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="datetime-local" value="'+i[h]+'"'+(u?"":" readonly")+" /></td></tr>":'<tr><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="text" value="'+i[h]+'"'+(u?"":" readonly")+" /></td></tr>":'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="number" min="0" max="1" step="0.1" value="'+i[h]+'"'+(u?"":" readonly")+" /></td></tr>":'<tr class="style-row"><th><input type="text" value="'+h+'"'+(u?"":" readonly")+' /></th><td><input type="color" value="'+i[h]+'"'+(u?"":" readonly")+" /></td></tr>";if(t.feature&&t.feature.geometry){if(r+='<table class="metadata">',"LineString"===t.feature.geometry.type){var p=d3.pairs(t.feature.geometry.coordinates).reduce(function(t,e){return t+L.latLng(e[0][1],e[0][0]).distanceTo(L.latLng(e[1][1],e[1][0]))},0);r+="<tr><td>Meters</td><td>"+p.toFixed(2)+"</td></tr><tr><td>Kilometers</td><td>"+(p/1e3).toFixed(2)+"</td></tr><tr><td>Feet</td><td>"+(p/.3048).toFixed(2)+"</td></tr><tr><td>Yards</td><td>"+(p/.9144).toFixed(2)+"</td></tr><tr><td>Miles</td><td>"+(p/1609.34).toFixed(2)+"</td></tr>"}else"Point"===t.feature.geometry.type?r+="<tr><td>Latitude </td><td>"+t.feature.geometry.coordinates[1].toFixed(4)+"</td></tr><tr><td>Longitude</td><td>"+t.feature.geometry.coordinates[0].toFixed(4)+"</td></tr>":"Polygon"===t.feature.geometry.type&&(r+="<tr><td>Sq. Meters</td><td>"+a.area(t).toFixed(2)+"</td></tr><tr><td>Sq. Kilometers</td><td>"+(a.area(t)/1e6).toFixed(2)+"</td></tr><tr><td>Sq. Feet</td><td>"+(a.area(t)/.092903).toFixed(2)+"</td></tr><tr><td>Acres</td><td>"+(a.area(t)/4046.86).toFixed(2)+"</td></tr><tr><td>Sq. Miles</td><td>"+(a.area(t)/2589990).toFixed(2)+"</td></tr>");r+="</table>"}var d='<div class="pad1 tabs-ui clearfix col12"><div class="tab col12"><input class="hide" type="radio" id="properties" name="tab-group" checked="true"><label class="keyline-top keyline-right tab-toggle pad0 pin-bottomleft z10 center col6" for="properties">Properties</label><div class="space-bottom1 col12 content"><table class="space-bottom0 marker-properties">'+n+"</table>"+(u?'<div class="add-row-button add fl col3"><span class="icon-plus"> Add row</div><div class="fl text-right col9"><input type="checkbox" id="show-style" name="show-style" value="true" checked><label for="show-style">Show style properties</label></div>':"")+'</div></div><div class="space-bottom2 tab col12"><input class="hide" type="radio" id="info" name="tab-group"><label class="keyline-top tab-toggle pad0 pin-bottomright z10 center col6" for="info">Info</label><div class="space-bottom1 col12 content"><div class="marker-info">'+r+" </div></div></div></div>"+(u?'<div class="clearfix col12 pad1 keyline-top"><div class="pill col6"><button class="save col6 major">Save</button> <button class="minor col6 cancel">Cancel</button></div><button class="col6 text-right pad0 delete-invert"><span class="icon-remove-sign"></span> Delete feature</button></div>':"");t.bindPopup(L.popup({closeButton:!1,maxWidth:500,maxHeight:400,autoPanPadding:[5,45],className:"geojsonio-feature"},t).setContent(d)),t.on("popupopen",function(t){!1===l&&(d3.select("#show-style").property("checked",!1),d3.selectAll(".style-row").style("display","none")),d3.select("#show-style").on("click",function(){this.checked?(l=!0,d3.selectAll(".style-row").style("display","")):(l=!1,d3.selectAll(".style-row").style("display","none"))})})}}(t),t.addTo(e)})}t("qs-hash"),t("../lib/custom_hash.js");for(var i=t("../lib/popup"),o=t("escape-html"),a=t("leaflet-geodesy"),s=t("geojson-rewind"),u=!1,l=!0,c=t("../../data/maki.json"),f="",h=0;h<c.length;h++)f+='<option value="'+c[h].icon+'">';e.exports=function(t,e){return u=!e,function(e){function n(){var e=t.mapLayer.toGeoJSON();r(e=s(e),t.mapLayer),t.data.set({map:function(t){var e=[];return t.eachLayer(function(t){"toGeoJSON"in t&&e.push(t.toGeoJSON())}),{type:"FeatureCollection",features:e}}(t.mapLayer)},"map")}t.map=L.mapbox.map(e.node(),null).setView([20,0],2).addControl(L.mapbox.geocoderControl("mapbox.places",{position:"topright"})),L.control.scale().setPosition("bottomright").addTo(t.map),t.map.zoomControl.setPosition("topright"),L.hash(t.map),t.mapLayer=L.featureGroup().addTo(t.map),u&&(t.drawControl=new L.Control.Draw({position:"topright",edit:{featureGroup:t.mapLayer},draw:{circle:!1,polyline:{metric:"en-us"!==navigator.language&&"en-US"!==navigator.language},polygon:{metric:"en-us"!==navigator.language&&"en-US"!==navigator.language},marker:{icon:L.mapbox.marker.icon({})}}}).addTo(t.map),t.map.on("draw:edited",n).on("draw:deleted",n)),t.map.on("draw:created",function(e){t.mapLayer.addLayer(e.layer),n()}).on("popupopen",i(t)),t.map.attributionControl.setPrefix('<a target="_blank" href="http://tmcw.wufoo.com/forms/z7x4m1/">Feedback</a> | <a target="_blank" href="http://geojson.io/about.html">About</a>'),t.dispatch.on("change.map",function(){r(t.data.get("map"),t.mapLayer)})}}},{"../../data/maki.json":1,"../lib/custom_hash.js":169,"../lib/popup":171,"escape-html":19,"geojson-rewind":29,"leaflet-geodesy":61,"qs-hash":89}],188:[function(t,e,n){e.exports=function(t){"use strict";t.select("div.message").remove();var e=t.append("div").attr("class","message pad1");return e.append("a").attr("class","icon-remove fr").on("click",function(){e.remove()}),e.append("div").attr("class","content"),e.style("opacity",0).transition().duration(200).style("opacity",1),e.close=function(){e.transition().duration(200).style("opacity",0).remove(),e.transition().duration(200).style("top","0px")},e}},{}],189:[function(t,e,n){e.exports=function(t,e){var n=t.select("div.modal"),r=n.empty();n.transition().duration(200).style("opacity",0).remove();var i=t.append("div").attr("class","shaded").style("opacity",0);i.close=function(){i.transition().duration(200).style("opacity",0).remove(),a.transition().duration(200).style("top","0px"),o.off()};var o=d3.keybinding("modal").on("",i.close).on("",i.close);d3.select(document).call(o);var a=i.append("div").attr("class","modal fillL col6");return i.on("click.remove-modal",function(){d3.event.target!==this||e||i.close()}),a.append("button").attr("class","close").on("click",function(){e||i.close()}).append("div").attr("class","icon close"),a.append("div").attr("class","content"),r?(i.transition().style("opacity",1),a.style("top","0px").transition().duration(200).style("top","40px")):i.style("opacity",1),i}},{}],190:[function(t,e,n){var r=t("../panel/table"),i=t("../panel/json"),o=t("../panel/help");e.exports=function(t,e){return function(n){var a=null,s=[{icon:"code",title:" JSON",alt:"JSON Source",behavior:i},{icon:"table",title:" Table",alt:"Edit feature properties in a table",behavior:r},{icon:"question",title:" Help",alt:"Help",behavior:o}],u=n.selectAll("button").data(s,function(t){return t.icon}),l=u.enter().append("button").attr("title",function(t){return t.alt}).on("click",function(n){u.classed("active",function(t){return n.icon==t.icon}),a&&a.off(),a=n.behavior(t),e.call(a)});l.append("span").attr("class",function(t){return"icon-"+t.icon}),l.append("span").text(function(t){return t.title}),d3.select(u.node()).trigger("click")}}},{"../panel/help":176,"../panel/json":177,"../panel/table":178}],191:[function(t,e,n){var r=t("./flash");e.exports=function(t){function e(e,n){if(e)return r(t.container,e.toString());var i,o,a,s=t.data.get("type");"gist"===s||"gist"===n.type?(i="Changes to this map saved to Gist: ",o=n.html_url,a=n.id):"github"===s?(i="Changes committed to GitHub: ",o=n.commit.html_url,a=n.commit.sha.substring(0,10)):i="Changes saved to disk.",r(t.container,i+(o?'<a href="'+o+'">'+a+"</a>":"")),t.container.select(".map").classed("loading",!1),t.data.parse(n)}d3.event&&d3.event.preventDefault();t.data.get("meta");var n=t.data.get("map"),i=n&&n.geometry||n.features&&n.features.length,o=t.data.get("type");if(!i)return r(t.container,"Add a feature to the map to save it");t.container.select(".map").classed("loading",!0),"github"===o?t.repo.details(function(n,r){if(!n&&r.permissions.push){var i=prompt("Commit Message");if(!i)return void t.container.select(".map").classed("loading",!1);t.commitMessage=i,t.data.save(e)}else t.data.save(e)}):t.data.save(e)}},{"./flash":185}],192:[function(t,e,n){var r=t("../source/gist"),i=t("./modal");e.exports=function(t){return function(e){r.saveBlocks(t.data.get("map"),function(t,e){var n=i(d3.select("div.geojsonio"));n.select(".m").attr("class","modal-splash modal col6");var r=n.select(".content");if(r.append("div").attr("class","header pad2 fillD").append("h1").text("Share"),t||!e)r.append("div").attr("class","pad2").text("Could not share: an error occurred: "+t);else{var o=r.append("div").attr("class","pad2");o.append("input").style("width","100%").property("value","http://bl.ocks.org/d/"+e.id),o.append("p").text("URL to the full-screen map in that embed")}})}}},{"../source/gist":179,"./modal":189}],193:[function(t,e,n){e.exports=function(e){return/a\.tiles\.mapbox\.com/.test(L.mapbox.config.HTTP_URL)||t("../config.js")(location.hostname).GithubAPI?function(t){function n(){a.text("login").on("click",r),o.text("anon").attr("href","#").on("click",function(){d3.event.preventDefault()})}function r(){d3.event.preventDefault(),e.user.authenticate()}function i(){d3.event.preventDefault(),e.user.logout(),n()}var o=t.append("a").attr("target","_blank");t.append("span").text(" | ");var a=t.append("a").attr("href","#");n(),e.user.token()&&e.user.details(function(t,e){t||(o.text(e.login),o.attr("href",e.html_url),o.on("click",null),a.text("logout").on("click",i))})}:function(){}}},{"../config.js":160}],topojson:[function(t,e,n){var r=e.exports=t("./topojson");r.topology=t("./lib/topojson/topology"),r.simplify=t("./lib/topojson/simplify"),r.clockwise=t("./lib/topojson/clockwise"),r.filter=t("./lib/topojson/filter"),r.prune=t("./lib/topojson/prune"),r.bind=t("./lib/topojson/bind"),r.stitch=t("./lib/topojson/stitch"),r.scale=t("./lib/topojson/scale")},{"./lib/topojson/bind":108,"./lib/topojson/clockwise":111,"./lib/topojson/filter":115,"./lib/topojson/prune":119,"./lib/topojson/scale":121,"./lib/topojson/simplify":122,"./lib/topojson/stitch":124,"./lib/topojson/topology":125,"./topojson":137}]},{},[168]);